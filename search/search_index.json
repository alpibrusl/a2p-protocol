{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"a2p Protocol - User-Sovereign Profiles for AI Agents","text":"Agent2Profile Protocol <p>       The open standard for user-sovereign AI profiles.       Your preferences. Your memories. Your control.     </p> Get Started Read the Spec GitHub \ud83d\udc64 User Ownership <p>Your AI profile belongs to you via decentralized identity. Not to AI companies.</p> \ud83d\udd04 Portable <p>Take your preferences to any AI agent. Switch providers without losing context.</p> \ud83d\udd10 Privacy-First <p>Granular consent controls. You decide what each agent can see.</p> \u2696\ufe0f Compliant <p>GDPR and EU AI Act requirements built into the protocol.</p>"},{"location":"#the-problem","title":"The Problem","text":"<p>Today, when you use AI assistants, your preferences and context are trapped in silos:</p> <pre><code>graph LR\n    subgraph \"Current State\"\n        U[You] --&gt; A1[ChatGPT&lt;br/&gt;Your Data]\n        U --&gt; A2[Claude&lt;br/&gt;Your Data]\n        U --&gt; A3[Gemini&lt;br/&gt;Your Data]\n    end\n    style U fill:#7c3aed,stroke:#a78bfa,color:#fff\n    style A1 fill:#ef4444,stroke:#fca5a5,color:#fff\n    style A2 fill:#ef4444,stroke:#fca5a5,color:#fff\n    style A3 fill:#ef4444,stroke:#fca5a5,color:#fff</code></pre> <ul> <li>Switch AI providers? Start from scratch.</li> <li>Want to know what they stored? Good luck.</li> <li>Exercise your GDPR rights? Per vendor.</li> </ul>"},{"location":"#the-solution","title":"The Solution","text":"<p>With a2p, you own your profile and share it selectively:</p> <pre><code>graph LR\n    subgraph \"With a2p\"\n        P[Your Profile&lt;br/&gt;You Own It] --&gt; A1[ChatGPT]\n        P --&gt; A2[Claude]\n        P --&gt; A3[Gemini]\n    end\n    style P fill:#10b981,stroke:#34d399,color:#fff\n    style A1 fill:#3b82f6,stroke:#93c5fd,color:#fff\n    style A2 fill:#3b82f6,stroke:#93c5fd,color:#fff\n    style A3 fill:#3b82f6,stroke:#93c5fd,color:#fff</code></pre> <ul> <li>One profile that you control</li> <li>Portable across any compliant agent</li> <li>Granular permissions per agent</li> <li>Built-in compliance with EU regulations</li> </ul>"},{"location":"#quick-start","title":"Quick Start","text":"TypeScriptPython <pre><code>import { A2PClient } from '@a2p/sdk';\n\nconst client = new A2PClient({\n  agentDid: 'did:a2p:agent:local:my-agent'\n});\n\n// Request access to user profile\nconst profile = await client.getProfile({\n  userDid: 'did:a2p:user:local:alice',\n  scopes: ['a2p:preferences', 'a2p:interests'],\n  purpose: {\n    type: 'personalization',\n    description: 'Tailor responses to your preferences'\n  }\n});\n\n// Propose a memory\nawait client.proposeMemory({\n  userDid: 'did:a2p:user:local:alice',\n  content: 'Prefers concise responses',\n  category: 'a2p:preferences.communication',\n  confidence: 0.85\n});\n</code></pre> <pre><code>from a2p import A2PClient\n\nclient = A2PClient(agent_did=\"did:a2p:agent:local:my-agent\")\n\n# Request access to user profile\nprofile = await client.get_profile(\n    user_did=\"did:a2p:user:local:alice\",\n    scopes=[\"a2p:preferences\", \"a2p:interests\"],\n    purpose={\n        \"type\": \"personalization\",\n        \"description\": \"Tailor responses to your preferences\"\n    }\n)\n\n# Propose a memory\nawait client.propose_memory(\n    user_did=\"did:a2p:user:local:alice\",\n    content=\"Prefers concise responses\",\n    category=\"a2p:preferences.communication\",\n    confidence=0.85\n)\n</code></pre>"},{"location":"#how-it-works","title":"How It Works","text":"1 Create Your Profile <p>Set up your a2p profile with your preferences, interests, and context.</p> 2 Set Your Rules <p>Define consent policies: who can access what, for what purpose.</p> 3 Agents Request Access <p>AI agents request access with a declared purpose. You approve or deny.</p> 4 Agents Propose, You Approve <p>Agents suggest new memories. You review and approve before storage.</p>"},{"location":"#framework-adapters","title":"Framework Adapters","text":"<p>Use a2p with your favorite AI frameworks:</p> LangChain Memory integration OpenAI Assistants API LangGraph State persistence CrewAI Agent memory"},{"location":"#built-for-compliance","title":"Built for Compliance","text":"\ud83c\uddea\ud83c\uddfa GDPR <ul> <li>Purpose limitation</li> <li>Consent management</li> <li>Data subject rights</li> <li>Audit trails</li> </ul> \ud83e\udd16 EU AI Act <ul> <li>Risk classification</li> <li>Transparency obligations</li> <li>Human oversight</li> <li>Record-keeping</li> </ul>"},{"location":"#a2p-in-the-ecosystem","title":"a2p in the Ecosystem","text":"<p>a2p is complementary to major protocols and frameworks:</p> Protocol/Framework Focus Relationship with a2p A2A Agent-to-Agent communication \u2705 Complementary - a2p provides user context for A2A agents MCP AI assistant tool integration \u2705 Complementary - a2p profiles exposed as MCP resources Solid Decentralized data storage \u2705 Infrastructure partner - a2p can use Solid Pods OpenID Connect Authentication \u2705 Complementary - different layer (auth vs profiles) LangChain Agent framework \u2705 Integration - a2p as memory backend <p>Key Message: a2p doesn't compete with these\u2014it fills the user profile gap they all need.</p>"},{"location":"#open-source-eu-made","title":"Open Source &amp; EU-MadeReady to Get Started?","text":"EUPL-1.2 <p>European Union Public License - designed for EU legal frameworks</p> \ud83c\uddea\ud83c\uddfa Made in EU <p>Developed in Madrid, Spain with EU digital sovereignty in mind</p> <p>Build AI agents that respect user sovereignty.</p> Start Building View on GitHub"},{"location":"adapters/crewai/","title":"CrewAI Adapter","text":"<p>Use a2p profiles with CrewAI agents.</p>"},{"location":"adapters/crewai/#installation","title":"Installation","text":"<pre><code>pip install a2p-crewai\n</code></pre>"},{"location":"adapters/crewai/#quick-start","title":"Quick Start","text":"<pre><code>from a2p_crewai import A2PCrewMemory\nfrom crewai import Agent, Task, Crew\n\nmemory = A2PCrewMemory(\n    user_did=\"did:a2p:user:local:alice\",\n    agent_did=\"did:a2p:agent:local:my-agent\"\n)\n\nagent = Agent(\n    role=\"Personal Assistant\",\n    goal=\"Help the user with their tasks\",\n    memory=memory\n)\n\ntask = Task(\n    description=\"Help plan today's schedule\",\n    agent=agent\n)\n\ncrew = Crew(agents=[agent], tasks=[task])\nresult = crew.kickoff()\n</code></pre>"},{"location":"adapters/crewai/#features","title":"Features","text":""},{"location":"adapters/crewai/#user-context","title":"User Context","text":"<pre><code># Memory automatically provides user context\n# - Preferences\n# - Interests\n# - Professional info\n</code></pre>"},{"location":"adapters/crewai/#memory-proposals","title":"Memory Proposals","text":"<pre><code># After task completion\nawait memory.propose_memory(\n    content=\"User prefers morning meetings\",\n    category=\"a2p:preferences.schedule\",\n    confidence=0.85\n)\n</code></pre>"},{"location":"adapters/crewai/#next-steps","title":"Next Steps","text":"<ul> <li>LangChain Adapter</li> <li>Adapter Overview</li> </ul>"},{"location":"adapters/langchain/","title":"LangChain Adapter","text":"<p>Use a2p profiles as memory in LangChain applications.</p>"},{"location":"adapters/langchain/#installation","title":"Installation","text":"TypeScriptPython <pre><code>npm install @a2p/langchain\n</code></pre> <pre><code>pip install a2p-langchain\n</code></pre>"},{"location":"adapters/langchain/#quick-start","title":"Quick Start","text":"TypeScriptPython <pre><code>import { A2PLangChainMemory } from '@a2p/langchain';\nimport { ChatOpenAI } from '@langchain/openai';\nimport { ConversationChain } from 'langchain/chains';\n\nconst memory = new A2PLangChainMemory({\n  userDid: 'did:a2p:user:local:alice',\n  agentDid: 'did:a2p:agent:local:my-agent',\n  scopes: ['a2p:preferences', 'a2p:interests']\n});\n\nconst chain = new ConversationChain({\n  llm: new ChatOpenAI(),\n  memory\n});\n\nconst response = await chain.call({\n  input: 'What should I work on today?'\n});\n</code></pre> <pre><code>from a2p_langchain import A2PLangChainMemory\nfrom langchain_openai import ChatOpenAI\nfrom langchain.chains import ConversationChain\n\nmemory = A2PLangChainMemory(\n    user_did=\"did:a2p:user:local:alice\",\n    agent_did=\"did:a2p:agent:local:my-agent\",\n    scopes=[\"a2p:preferences\", \"a2p:interests\"]\n)\n\nchain = ConversationChain(\n    llm=ChatOpenAI(),\n    memory=memory\n)\n\nresponse = chain.invoke({\n    \"input\": \"What should I work on today?\"\n})\n</code></pre>"},{"location":"adapters/langchain/#configuration","title":"Configuration","text":"Option Type Description <code>userDid</code> string User's DID <code>agentDid</code> string Your agent's DID <code>scopes</code> string[] Scopes to request <code>purpose</code> Purpose Access purpose (auto-generated if not provided) <code>autoPropose</code> boolean Auto-propose memories from conversation"},{"location":"adapters/langchain/#memory-variables","title":"Memory Variables","text":"<p>The adapter provides these memory variables:</p> Variable Content <code>a2p_profile</code> User preferences and context <code>a2p_memories</code> Episodic memories <code>history</code> Conversation history"},{"location":"adapters/langchain/#proposing-memories","title":"Proposing Memories","text":"<pre><code>// Enable auto-propose\nconst memory = new A2PLangChainMemory({\n  // ...\n  autoPropose: true,\n  proposeThreshold: 0.8  // Minimum confidence\n});\n\n// Or manually\nawait memory.proposeMemory(\n  'User prefers detailed explanations',\n  { category: 'a2p:preferences.communication', confidence: 0.9 }\n);\n</code></pre>"},{"location":"adapters/langchain/#next-steps","title":"Next Steps","text":"<ul> <li>OpenAI Adapter</li> <li>LangGraph Adapter</li> <li>Adapter Overview</li> </ul>"},{"location":"adapters/langgraph/","title":"LangGraph Adapter","text":"<p>Use a2p profiles with LangGraph state persistence.</p>"},{"location":"adapters/langgraph/#installation","title":"Installation","text":"<pre><code>npm install @a2p/langgraph\n</code></pre>"},{"location":"adapters/langgraph/#quick-start","title":"Quick Start","text":"<pre><code>import { A2PMemorySaver } from '@a2p/langgraph';\nimport { StateGraph } from '@langchain/langgraph';\n\nconst memorySaver = new A2PMemorySaver({\n  userDid: 'did:a2p:user:local:alice',\n  agentDid: 'did:a2p:agent:local:my-agent'\n});\n\nconst graph = new StateGraph({ ... })\n  .addNode('chat', chatNode)\n  .compile({ checkpointer: memorySaver });\n\n// Run with user context\nconst result = await graph.invoke(\n  { messages: [...] },\n  { configurable: { thread_id: 'conversation-1' } }\n);\n</code></pre>"},{"location":"adapters/langgraph/#features","title":"Features","text":""},{"location":"adapters/langgraph/#state-persistence","title":"State Persistence","text":"<p>User context persists across graph invocations.</p>"},{"location":"adapters/langgraph/#memory-proposals","title":"Memory Proposals","text":"<pre><code>// In your node\nasync function myNode(state) {\n  // Propose memory\n  await memorySaver.proposeMemory({\n    content: 'User asked about TypeScript',\n    category: 'a2p:interests.topics',\n    confidence: 0.8\n  });\n}\n</code></pre>"},{"location":"adapters/langgraph/#next-steps","title":"Next Steps","text":"<ul> <li>LangChain Adapter</li> <li>Adapter Overview</li> </ul>"},{"location":"adapters/openai/","title":"OpenAI Assistants Adapter","text":"<p>Use a2p profiles with OpenAI Assistants API.</p>"},{"location":"adapters/openai/#installation","title":"Installation","text":"<pre><code>npm install @a2p/openai\n</code></pre>"},{"location":"adapters/openai/#quick-start","title":"Quick Start","text":"<pre><code>import { A2POpenAIAdapter } from '@a2p/openai';\nimport OpenAI from 'openai';\n\nconst openai = new OpenAI();\nconst adapter = new A2POpenAIAdapter({\n  userDid: 'did:a2p:user:local:alice',\n  agentDid: 'did:a2p:agent:local:my-assistant'\n});\n\n// Get enhanced system instructions\nconst instructions = await adapter.getSystemInstructions();\n\n// Create assistant with user context\nconst assistant = await openai.beta.assistants.create({\n  name: 'My Assistant',\n  instructions,\n  model: 'gpt-4-turbo'\n});\n</code></pre>"},{"location":"adapters/openai/#features","title":"Features","text":""},{"location":"adapters/openai/#system-instructions","title":"System Instructions","text":"<pre><code>const instructions = await adapter.getSystemInstructions();\n// Includes user preferences, language, style, etc.\n</code></pre>"},{"location":"adapters/openai/#function-tools","title":"Function Tools","text":"<pre><code>const tools = adapter.getTools();\n// Returns a2p function definitions for:\n// - propose_memory\n// - get_user_preference\n</code></pre>"},{"location":"adapters/openai/#memory-proposals","title":"Memory Proposals","text":"<pre><code>// Handle function calls\nif (functionName === 'propose_memory') {\n  await adapter.handleProposeMemory(functionArgs);\n}\n</code></pre>"},{"location":"adapters/openai/#next-steps","title":"Next Steps","text":"<ul> <li>LangChain Adapter</li> <li>Adapter Overview</li> </ul>"},{"location":"adapters/overview/","title":"Framework Adapters","text":"<p>a2p provides ready-to-use adapters for popular AI frameworks.</p>"},{"location":"adapters/overview/#available-adapters","title":"Available Adapters","text":"Framework Language Package Status LangChain TypeScript <code>@a2p/langchain</code> \u2705 Stable LangChain Python <code>a2p-langchain</code> \u2705 Stable OpenAI Assistants TypeScript <code>@a2p/openai</code> \u2705 Stable LangGraph TypeScript <code>@a2p/langgraph</code> \u2705 Stable CrewAI Python <code>a2p-crewai</code> \u2705 Stable"},{"location":"adapters/overview/#how-adapters-work","title":"How Adapters Work","text":"<p>Adapters provide native integration with each framework:</p> <pre><code>graph LR\n    subgraph \"Your Agent\"\n        Framework[AI Framework]\n        Adapter[a2p Adapter]\n    end\n\n    subgraph \"a2p\"\n        Profile[User Profile]\n    end\n\n    Framework --&gt; Adapter\n    Adapter --&gt; Profile</code></pre>"},{"location":"adapters/overview/#what-adapters-do","title":"What Adapters Do","text":"<ol> <li>Read user context \u2014 Fetch profile data for personalization</li> <li>Inject into prompts \u2014 Add user preferences to system prompts</li> <li>Propose memories \u2014 Learn from conversations</li> <li>Handle consent \u2014 Respect user policies</li> </ol>"},{"location":"adapters/overview/#quick-start","title":"Quick Start","text":"LangChain (TS)LangChain (Python)OpenAI AssistantsCrewAI <pre><code>import { A2PLangChainMemory } from '@a2p/langchain';\n\nconst memory = new A2PLangChainMemory({\n  userDid: 'did:a2p:user:local:alice',\n  agentDid: 'did:a2p:agent:local:my-agent',\n  scopes: ['a2p:preferences', 'a2p:interests']\n});\n\nconst chain = new ConversationChain({\n  llm: new ChatOpenAI(),\n  memory\n});\n</code></pre> <pre><code>from a2p_langchain import A2PLangChainMemory\n\nmemory = A2PLangChainMemory(\n    user_did=\"did:a2p:user:local:alice\",\n    agent_did=\"did:a2p:agent:local:my-agent\",\n    scopes=[\"a2p:preferences\", \"a2p:interests\"]\n)\n\nchain = ConversationChain(\n    llm=ChatOpenAI(),\n    memory=memory\n)\n</code></pre> <pre><code>import { A2POpenAIAdapter } from '@a2p/openai';\n\nconst adapter = new A2POpenAIAdapter({\n  userDid: 'did:a2p:user:local:alice',\n  agentDid: 'did:a2p:agent:local:my-agent'\n});\n\n// Get enhanced system instructions\nconst instructions = await adapter.getSystemInstructions();\n</code></pre> <pre><code>from a2p_crewai import A2PCrewMemory\n\nmemory = A2PCrewMemory(\n    user_did=\"did:a2p:user:local:alice\",\n    agent_did=\"did:a2p:agent:local:my-agent\"\n)\n\nagent = Agent(\n    role=\"Assistant\",\n    memory=memory\n)\n</code></pre>"},{"location":"adapters/overview/#common-patterns","title":"Common Patterns","text":""},{"location":"adapters/overview/#reading-user-context","title":"Reading User Context","text":"<p>All adapters load user preferences:</p> <pre><code>// Context is automatically loaded\nconst preferences = memory.getPreferences();\n// { language: \"en-US\", style: \"concise\" }\n</code></pre>"},{"location":"adapters/overview/#proposing-memories","title":"Proposing Memories","text":"<p>Adapters can propose memories from conversations:</p> <pre><code>// After a conversation turn\nawait memory.proposeMemory(\n  \"User prefers detailed explanations for technical topics\",\n  { category: \"a2p:preferences.communication\", confidence: 0.8 }\n);\n</code></pre>"},{"location":"adapters/overview/#respecting-consent","title":"Respecting Consent","text":"<p>Adapters automatically respect user policies:</p> <pre><code>// Only returns data the agent is allowed to see\nconst profile = await memory.loadProfile();\n// Health data excluded if denied by policy\n</code></pre>"},{"location":"adapters/overview/#building-custom-adapters","title":"Building Custom Adapters","text":"<p>If your framework isn't supported, you can build a custom adapter:</p> <pre><code>import { A2PClient } from '@a2p/sdk';\n\nclass MyFrameworkAdapter {\n  private client: A2PClient;\n  private userDid: string;\n\n  constructor(config: { userDid: string; agentDid: string }) {\n    this.userDid = config.userDid;\n    this.client = new A2PClient({ agentDid: config.agentDid });\n  }\n\n  async getContext(): Promise&lt;Record&lt;string, any&gt;&gt; {\n    const profile = await this.client.getProfile({\n      userDid: this.userDid,\n      scopes: ['a2p:preferences']\n    });\n    return profile.common.preferences;\n  }\n\n  async learn(content: string, category: string): Promise&lt;void&gt; {\n    await this.client.proposeMemory({\n      userDid: this.userDid,\n      content,\n      category,\n      confidence: 0.8\n    });\n  }\n}\n</code></pre>"},{"location":"adapters/overview/#next-steps","title":"Next Steps","text":"<ul> <li>LangChain Adapter \u2014 Full LangChain guide</li> <li>OpenAI Adapter \u2014 OpenAI Assistants guide</li> <li>SDK Reference \u2014 Build custom adapters</li> </ul>"},{"location":"community/contributing/","title":"Contributing to a2p","text":"<p>We welcome contributions to the a2p protocol! Here's how to get involved.</p>"},{"location":"community/contributing/#ways-to-contribute","title":"Ways to Contribute","text":"Type Description \ud83d\udc1b Bug Reports Report issues you find \ud83d\udca1 Feature Requests Suggest new features \ud83d\udcd6 Documentation Improve docs and examples \ud83d\udcbb Code Fix bugs or add features \ud83e\uddea Testing Test implementations \ud83c\udf0d Translations Translate documentation"},{"location":"community/contributing/#getting-started","title":"Getting Started","text":""},{"location":"community/contributing/#1-fork-the-repository","title":"1. Fork the Repository","text":"<pre><code>git clone https://github.com/a2p-protocol/a2p.git\ncd a2p\n</code></pre>"},{"location":"community/contributing/#2-install-dependencies","title":"2. Install Dependencies","text":"<pre><code>pnpm install\n</code></pre>"},{"location":"community/contributing/#3-run-tests","title":"3. Run Tests","text":"<pre><code>pnpm test\n</code></pre>"},{"location":"community/contributing/#4-make-changes","title":"4. Make Changes","text":"<p>Create a branch for your changes:</p> <pre><code>git checkout -b feature/my-feature\n</code></pre>"},{"location":"community/contributing/#contribution-guidelines","title":"Contribution Guidelines","text":""},{"location":"community/contributing/#code-style","title":"Code Style","text":"<ul> <li>Use TypeScript for new code</li> <li>Follow existing patterns</li> <li>Add tests for new features</li> <li>Update documentation</li> </ul>"},{"location":"community/contributing/#commit-messages","title":"Commit Messages","text":"<p>Follow Conventional Commits:</p> <pre><code>feat(sdk): add memory proposal batching\nfix(gateway): handle rate limit edge case\ndocs: update quickstart tutorial\n</code></pre>"},{"location":"community/contributing/#pull-requests","title":"Pull Requests","text":"<ol> <li>Create a clear PR title</li> <li>Describe what changed and why</li> <li>Link related issues</li> <li>Ensure CI passes</li> </ol>"},{"location":"community/contributing/#development-setup","title":"Development Setup","text":""},{"location":"community/contributing/#project-structure","title":"Project Structure","text":"<pre><code>a2p/\n\u251c\u2500\u2500 docs/              # Specification docs\n\u251c\u2500\u2500 schemas/           # JSON Schema files\n\u251c\u2500\u2500 packages/\n\u2502   \u251c\u2500\u2500 sdk-typescript/\n\u2502   \u251c\u2500\u2500 sdk-python/\n\u2502   \u251c\u2500\u2500 gateway/\n\u2502   \u2514\u2500\u2500 adapters/\n\u251c\u2500\u2500 examples/          # Example code\n\u2514\u2500\u2500 docs/              # Documentation (this site)\n</code></pre>"},{"location":"community/contributing/#building","title":"Building","text":"<pre><code># Build all packages\npnpm build\n\n# Build specific package\npnpm --filter @a2p/sdk build\n</code></pre>"},{"location":"community/contributing/#testing","title":"Testing","text":"<pre><code># Run all tests\npnpm test\n\n# Run specific package tests\npnpm --filter @a2p/sdk test\n</code></pre>"},{"location":"community/contributing/#rfc-process","title":"RFC Process","text":"<p>Major changes go through an RFC (Request for Comments):</p> <ol> <li>Draft \u2014 Write RFC in <code>rfcs/</code> folder</li> <li>Discuss \u2014 Open PR for community feedback</li> <li>Revise \u2014 Incorporate feedback</li> <li>Accept/Reject \u2014 Working group decision</li> <li>Implement \u2014 Build the feature</li> </ol>"},{"location":"community/contributing/#rfc-template","title":"RFC Template","text":"<pre><code># RFC-XXXX: [Title]\n\n## Summary\n[One paragraph summary]\n\n## Motivation\n[Why is this needed?]\n\n## Detailed Design\n[Technical details]\n\n## Alternatives\n[Other approaches considered]\n\n## Compatibility\n[Breaking changes, migration]\n</code></pre>"},{"location":"community/contributing/#code-of-conduct","title":"Code of Conduct","text":"<p>We follow the Contributor Covenant.</p>"},{"location":"community/contributing/#summary","title":"Summary","text":"<ul> <li>Be welcoming and inclusive</li> <li>Be respectful of differing viewpoints</li> <li>Accept constructive criticism gracefully</li> <li>Focus on what's best for the community</li> </ul>"},{"location":"community/contributing/#license","title":"License","text":"<p>By contributing, you agree that your contributions will be licensed under EUPL-1.2.</p>"},{"location":"community/contributing/#getting-help","title":"Getting Help","text":"<ul> <li>\ud83d\udcac Discord \u2014 Chat with the community</li> <li>\ud83d\udcdd GitHub Discussions \u2014 Ask questions</li> <li>\ud83d\udc1b GitHub Issues \u2014 Report bugs</li> </ul>"},{"location":"community/contributing/#recognition","title":"Recognition","text":"<p>Contributors are recognized in:</p> <ul> <li><code>CONTRIBUTORS.md</code> file</li> <li>Release notes</li> <li>Community spotlight</li> </ul> <p>Thank you for contributing to a2p! \ud83d\ude4f</p>"},{"location":"community/governance/","title":"Governance","text":"<p>How the a2p protocol is governed.</p>"},{"location":"community/governance/#structure","title":"Structure","text":"<pre><code>Steering Committee\n\u251c\u2500\u2500 Core Protocol WG\n\u251c\u2500\u2500 Security WG\n\u251c\u2500\u2500 Implementation WG\n\u251c\u2500\u2500 Legal &amp; Compliance WG\n\u251c\u2500\u2500 Registry WG\n\u2514\u2500\u2500 Community WG\n</code></pre>"},{"location":"community/governance/#decision-making","title":"Decision Making","text":"Type Process Editorial Maintainer approval Minor 2 maintainer approvals Significant RFC + WG consensus Breaking RFC + SC approval"},{"location":"community/governance/#rfc-process","title":"RFC Process","text":"<ol> <li>Draft \u2014 Author develops proposal</li> <li>Proposed \u2014 WG review (2-4 weeks)</li> <li>Final Comment \u2014 Community feedback (2 weeks)</li> <li>Accepted/Rejected \u2014 WG decision</li> <li>Published \u2014 Merged into spec</li> </ol>"},{"location":"community/governance/#contributing","title":"Contributing","text":"<p>See Contributing for how to get involved.</p>"},{"location":"community/governance/#license","title":"License","text":"<p>The protocol is licensed under EUPL-1.2.</p>"},{"location":"community/roadmap/","title":"Roadmap","text":"<p>The a2p protocol development roadmap.</p>"},{"location":"community/roadmap/#current-status","title":"Current Status","text":"<p>Version: 1.0.0-draft</p> <p>\u2705 Complete: - Protocol specification - TypeScript SDK - Python SDK - Framework adapters - Reference gateway</p>"},{"location":"community/roadmap/#v10-q1-2026","title":"v1.0 (Q1 2026)","text":"<ul> <li> Public specification release</li> <li> SDK stable releases</li> <li> Documentation site</li> <li> Conformance test suite</li> <li> First certified agents</li> </ul>"},{"location":"community/roadmap/#v11-q2-q3-2026","title":"v1.1 (Q2-Q3 2026)","text":"<ul> <li> WebSocket real-time notifications</li> <li> GraphQL API option</li> <li> Profile templates</li> <li> Enhanced analytics</li> </ul>"},{"location":"community/roadmap/#v20-2027","title":"v2.0 (2027)","text":"<ul> <li> Post-quantum cryptography</li> <li> Extended framework adapters</li> <li> Enterprise features</li> <li> Multi-region federation</li> </ul>"},{"location":"community/roadmap/#how-to-influence","title":"How to Influence","text":"<ul> <li>\ud83d\udcac GitHub Discussions</li> <li>\ud83d\udcdd Submit RFCs</li> <li>\ud83d\udc1b Report Issues</li> </ul>"},{"location":"compliance/ai-act/","title":"EU AI Act Compliance","text":"<p>How a2p supports EU AI Act requirements.</p>"},{"location":"compliance/ai-act/#agent-classification","title":"Agent Classification","text":"<p>Agent profiles include AI Act fields:</p> <pre><code>{\n  \"aiActCompliance\": {\n    \"riskLevel\": \"limited\",\n    \"transparencyObligations\": [\n      \"user_notification\",\n      \"ai_generated_content_marking\"\n    ],\n    \"humanOversight\": {\n      \"required\": true,\n      \"mechanism\": \"human_on_the_loop\"\n    }\n  }\n}\n</code></pre>"},{"location":"compliance/ai-act/#risk-levels","title":"Risk Levels","text":"Level Description a2p Support Minimal Low risk AI \u2705 Basic profile Limited Transparency needed \u2705 Transparency fields High Significant impact \u2705 Full compliance fields Unacceptable Prohibited \u274c Not supported"},{"location":"compliance/ai-act/#transparency-article-52","title":"Transparency (Article 52)","text":"Obligation Implementation User notification <code>transparencyObligations</code> array AI content marking Declared in profile Capability disclosure Agent capabilities field"},{"location":"compliance/ai-act/#human-oversight-article-14","title":"Human Oversight (Article 14)","text":"<pre><code>{\n  \"humanOversight\": {\n    \"required\": true,\n    \"mechanism\": \"human_on_the_loop\",\n    \"interventionCapability\": true\n  }\n}\n</code></pre> <p>Memory proposals implement human-in-the-loop by default.</p>"},{"location":"compliance/ai-act/#next-steps","title":"Next Steps","text":"<ul> <li>GDPR \u2014 GDPR compliance</li> <li>DPIA Guide \u2014 Assessment guide</li> </ul>"},{"location":"compliance/dpia/","title":"DPIA Guide","text":"<p>Data Protection Impact Assessment guidance for a2p implementations.</p>"},{"location":"compliance/dpia/#when-required","title":"When Required","text":"<p>A DPIA may be required when:</p> <ul> <li>Processing sensitive categories (health, etc.)</li> <li>Large-scale profiling</li> <li>Automated decision-making</li> <li>New technologies</li> </ul>"},{"location":"compliance/dpia/#template-sections","title":"Template Sections","text":""},{"location":"compliance/dpia/#1-processing-description","title":"1. Processing Description","text":"<p>Describe how you use a2p: - What data is accessed - What scopes are requested - How data is used</p>"},{"location":"compliance/dpia/#2-necessity-assessment","title":"2. Necessity Assessment","text":"<p>Justify the processing: - Why is this data needed? - What's the legal basis? - Can you achieve the goal with less data?</p>"},{"location":"compliance/dpia/#3-risk-assessment","title":"3. Risk Assessment","text":"<p>Identify risks: - Data breach - Unauthorized access - Purpose creep</p>"},{"location":"compliance/dpia/#4-mitigation-measures","title":"4. Mitigation Measures","text":"<p>a2p provides: - Granular consent - Audit trails - Purpose limitation - Encryption</p>"},{"location":"compliance/dpia/#a2p-specific-considerations","title":"a2p Specific Considerations","text":"Aspect Risk Level Mitigation User ownership Low User controls data Consent Low Explicit, granular Access logging Low Full audit trail Proposals Low Human review"},{"location":"compliance/dpia/#next-steps","title":"Next Steps","text":"<ul> <li>GDPR \u2014 GDPR compliance</li> <li>AI Act \u2014 AI Act compliance</li> </ul>"},{"location":"compliance/gdpr/","title":"GDPR Compliance","text":"<p>How a2p implements GDPR requirements.</p>"},{"location":"compliance/gdpr/#overview","title":"Overview","text":"<p>a2p is designed with GDPR compliance built-in:</p> GDPR Principle a2p Implementation Purpose limitation Required purpose field Consent Granular consent policies Data minimization Scoped access Transparency Audit trails Data subject rights User-owned profiles"},{"location":"compliance/gdpr/#article-mapping","title":"Article Mapping","text":""},{"location":"compliance/gdpr/#article-5-principles","title":"Article 5: Principles","text":"Principle Implementation Purpose limitation <code>purpose.type</code> and <code>purpose.description</code> required Data minimization Scope-based access, only request what's needed Storage limitation <code>purpose.retention</code> declaration"},{"location":"compliance/gdpr/#article-6-lawful-basis","title":"Article 6: Lawful Basis","text":"<pre><code>{\n  \"purpose\": {\n    \"legalBasis\": \"consent\"  // or contract, etc.\n  }\n}\n</code></pre>"},{"location":"compliance/gdpr/#articles-15-22-data-subject-rights","title":"Articles 15-22: Data Subject Rights","text":"Right Implementation Access User views own profile Rectification User edits profile Erasure User deletes memories Portability JSON export Object Revoke consent per agent"},{"location":"compliance/gdpr/#consent-receipts","title":"Consent Receipts","text":"<p>Every access creates a receipt:</p> <pre><code>{\n  \"receiptId\": \"rcpt_abc123\",\n  \"grantedAt\": \"2025-12-25T10:00:00Z\",\n  \"purpose\": { ... },\n  \"grantedScopes\": [\"a2p:preferences.*\"]\n}\n</code></pre>"},{"location":"compliance/gdpr/#next-steps","title":"Next Steps","text":"<ul> <li>EU AI Act \u2014 AI Act compliance</li> <li>DPIA Guide \u2014 Assessment guide</li> </ul>"},{"location":"documentation/architecture/","title":"Architecture","text":"<p>This page describes the high-level architecture of the a2p protocol.</p>"},{"location":"documentation/architecture/#system-overview","title":"System Overview","text":"<pre><code>graph TB\n    subgraph \"Users\"\n        U1[User App]\n        U2[User Wallet]\n    end\n\n    subgraph \"a2p Infrastructure\"\n        GW[Gateway / API]\n        PS[Profile Storage]\n        AR[Agent Registry]\n    end\n\n    subgraph \"AI Agents\"\n        A1[Agent 1]\n        A2[Agent 2]\n        A3[Agent 3]\n    end\n\n    U1 --&gt; GW\n    U2 --&gt; GW\n    GW --&gt; PS\n    GW --&gt; AR\n    A1 --&gt; GW\n    A2 --&gt; GW\n    A3 --&gt; GW</code></pre>"},{"location":"documentation/architecture/#core-components","title":"Core Components","text":""},{"location":"documentation/architecture/#1-user-profile","title":"1. User Profile","text":"<p>The central data structure owned by the user:</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502              User Profile               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 Identity        \u2502 DID, display name     \u2502\n\u2502 Preferences     \u2502 Language, style       \u2502\n\u2502 Memories        \u2502 Categorized facts     \u2502\n\u2502 Policies        \u2502 Consent rules         \u2502\n\u2502 Pending         \u2502 Proposals to review   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"documentation/architecture/#2-gateway-api","title":"2. Gateway / API","text":"<p>Handles all protocol operations:</p> <ul> <li>Profile retrieval (with access control)</li> <li>Access requests (with purpose)</li> <li>Memory proposals</li> <li>Consent management</li> </ul>"},{"location":"documentation/architecture/#3-profile-storage","title":"3. Profile Storage","text":"<p>Pluggable storage backends:</p> Option Use Case Local User's device Cloud Managed service Decentralized IPFS, Solid pods"},{"location":"documentation/architecture/#4-agent-registry","title":"4. Agent Registry","text":"<p>Optional directory of verified agents:</p> <ul> <li>Agent profiles and capabilities</li> <li>Trust/reputation information</li> <li>Certification status</li> </ul>"},{"location":"documentation/architecture/#request-flow","title":"Request Flow","text":""},{"location":"documentation/architecture/#reading-a-profile","title":"Reading a Profile","text":"<pre><code>sequenceDiagram\n    participant Agent\n    participant Gateway\n    participant Storage\n    participant PolicyEngine\n\n    Agent-&gt;&gt;Gateway: GET /profile/{did}&lt;br/&gt;Authorization: A2P-Signature\n    Gateway-&gt;&gt;Gateway: Verify signature\n    Gateway-&gt;&gt;Storage: Fetch profile\n    Storage--&gt;&gt;Gateway: Full profile\n    Gateway-&gt;&gt;PolicyEngine: Apply policies(agentDid, profile)\n    PolicyEngine--&gt;&gt;Gateway: Filtered profile\n    Gateway--&gt;&gt;Agent: 200 OK + filtered profile</code></pre>"},{"location":"documentation/architecture/#proposing-a-memory","title":"Proposing a Memory","text":"<pre><code>sequenceDiagram\n    participant Agent\n    participant Gateway\n    participant Storage\n    participant User\n\n    Agent-&gt;&gt;Gateway: POST /profile/{did}/memories/propose\n    Gateway-&gt;&gt;Gateway: Verify signature\n    Gateway-&gt;&gt;Gateway: Validate proposal\n    Gateway-&gt;&gt;Storage: Store pending proposal\n    Storage--&gt;&gt;Gateway: proposalId\n    Gateway--&gt;&gt;Agent: 201 Created\n    Gateway-&gt;&gt;User: Notify (webhook/push)</code></pre>"},{"location":"documentation/architecture/#data-model","title":"Data Model","text":""},{"location":"documentation/architecture/#profile-schema","title":"Profile Schema","text":"<pre><code>{\n  \"id\": \"did:a2p:user:local:...\",\n  \"version\": \"1.0\",\n  \"profileType\": \"human\",\n  \"created\": \"2025-01-01T00:00:00Z\",\n  \"updated\": \"2025-12-25T10:00:00Z\",\n\n  \"identity\": { ... },\n  \"common\": {\n    \"preferences\": { ... },\n    \"interests\": { ... }\n  },\n  \"memories\": {\n    \"a2p:professional\": { ... },\n    \"a2p:episodic\": [ ... ]\n  },\n  \"accessPolicies\": [ ... ],\n  \"pendingProposals\": [ ... ]\n}\n</code></pre>"},{"location":"documentation/architecture/#relationships","title":"Relationships","text":"<pre><code>erDiagram\n    PROFILE ||--o{ MEMORY : contains\n    PROFILE ||--o{ POLICY : defines\n    PROFILE ||--o{ PROPOSAL : has_pending\n    AGENT ||--o{ PROPOSAL : creates\n    POLICY ||--o{ CONSENT_RECEIPT : generates\n    AGENT }|--|| AGENT_PROFILE : has</code></pre>"},{"location":"documentation/architecture/#security-architecture","title":"Security Architecture","text":""},{"location":"documentation/architecture/#defense-in-depth","title":"Defense in Depth","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    Layer 1: Network                         \u2502\n\u2502  TLS 1.3, WAF, DDoS mitigation                             \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                    Layer 2: Transport                       \u2502\n\u2502  Rate limiting, IP filtering                               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                    Layer 3: Authentication                  \u2502\n\u2502  DID signatures, nonce validation, timestamp checks        \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                    Layer 4: Authorization                   \u2502\n\u2502  Consent policies, scope checking, purpose validation      \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                    Layer 5: Data Protection                 \u2502\n\u2502  Encryption at rest, encryption in transit                 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"documentation/architecture/#key-management","title":"Key Management","text":"<p>Users control cryptographic keys:</p> <ul> <li>Primary key \u2014 Signs all operations</li> <li>Recovery key \u2014 Backup for key loss</li> <li>Delegation keys \u2014 For specific agents</li> </ul>"},{"location":"documentation/architecture/#deployment-options","title":"Deployment Options","text":""},{"location":"documentation/architecture/#option-1-self-hosted","title":"Option 1: Self-Hosted","text":"<p>User runs their own profile storage:</p> <pre><code>User Device\n\u251c\u2500\u2500 a2p Client\n\u251c\u2500\u2500 Local Storage\n\u2514\u2500\u2500 DID Keys\n</code></pre>"},{"location":"documentation/architecture/#option-2-managed-service","title":"Option 2: Managed Service","text":"<p>Profile hosted by a2p-compatible provider:</p> <pre><code>a2p Cloud\n\u251c\u2500\u2500 Gateway\n\u251c\u2500\u2500 Storage\n\u2514\u2500\u2500 User Dashboard\n</code></pre>"},{"location":"documentation/architecture/#option-3-hybrid","title":"Option 3: Hybrid","text":"<p>Local for sensitive, cloud for convenience:</p> <pre><code>User Device (sensitive)          Cloud (general)\n\u251c\u2500\u2500 Health data                  \u251c\u2500\u2500 Preferences\n\u251c\u2500\u2500 Financial data               \u251c\u2500\u2500 Interests\n\u2514\u2500\u2500 Private keys                 \u2514\u2500\u2500 General memories\n</code></pre>"},{"location":"documentation/architecture/#interoperability","title":"Interoperability","text":""},{"location":"documentation/architecture/#with-a2a-protocol","title":"With A2A Protocol","text":"<p>a2p complements A2A (Agent2Agent):</p> <pre><code>graph LR\n    User[User] --&gt; Profile[a2p Profile]\n    Profile --&gt; Agent1[Agent A]\n    Agent1 &lt;--&gt; |A2A| Agent2[Agent B]\n    Agent2 &lt;--&gt; |A2A| Agent3[Agent C]</code></pre> <ul> <li>a2p: Agent accesses user context</li> <li>A2A: Agents communicate with each other</li> </ul>"},{"location":"documentation/architecture/#with-mcp","title":"With MCP","text":"<p>a2p profiles can be exposed as MCP resources:</p> <pre><code>MCP Server\n\u2514\u2500\u2500 a2p Resource Provider\n    \u251c\u2500\u2500 profile://user/preferences\n    \u2514\u2500\u2500 profile://user/context\n</code></pre>"},{"location":"documentation/architecture/#scalability","title":"Scalability","text":""},{"location":"documentation/architecture/#horizontal-scaling","title":"Horizontal Scaling","text":"<pre><code>Load Balancer\n\u251c\u2500\u2500 Gateway 1 \u2500\u2500\u2510\n\u251c\u2500\u2500 Gateway 2 \u2500\u2500\u253c\u2500\u2500 Storage Cluster\n\u2514\u2500\u2500 Gateway 3 \u2500\u2500\u2518\n</code></pre>"},{"location":"documentation/architecture/#caching-strategy","title":"Caching Strategy","text":"Data Cache TTL Invalidation Public profile 1 hour On update Policies 5 minutes On change Agent registry 1 hour On verification"},{"location":"documentation/architecture/#rate-limits","title":"Rate Limits","text":"Operation Limit Profile reads 100/hour Proposals 20/hour Policy updates 10/hour"},{"location":"documentation/architecture/#next-steps","title":"Next Steps","text":"<ul> <li>Specification Overview \u2014 Detailed protocol spec</li> <li>Security Spec \u2014 Security details</li> <li>Quickstart \u2014 Build an integration</li> </ul>"},{"location":"documentation/comparison/","title":"Comparison with Other Solutions","text":"<p>How does a2p compare to existing protocols and solutions?</p>"},{"location":"documentation/comparison/#quick-comparison","title":"Quick Comparison","text":"Feature a2p A2A MCP Solid OpenID Connect LangChain Memory Focus User profiles for AI Agent-to-agent AI assistant tools General data pods Identity federation Agent memory User ownership \u2705 N/A N/A \u2705 \u274c \u274c AI-specific \u2705 \u2705 \u2705 \u274c \u274c \u2705 Portable \u2705 \u2705 \u2705 \u2705 \u274c \u274c GDPR built-in \u2705 \u274c \u274c Partial \u274c \u274c AI Act ready \u2705 \u274c \u274c \u274c \u274c \u274c Open standard \u2705 \u2705 \u2705 \u2705 \u2705 \u274c Relationship Core Complementary Complementary Infrastructure Complementary Replacement target"},{"location":"documentation/comparison/#a2ps-role-in-the-ecosystem","title":"a2p's Role in the Ecosystem","text":"<p>a2p is NOT a competitor to A2A, MCP, Solid, or OpenID. Instead, it fills a unique gap in the AI agent ecosystem by providing user-owned profiles that complement existing protocols.</p>"},{"location":"documentation/comparison/#ecosystem-map","title":"Ecosystem Map","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502              AI Agent Ecosystem                          \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                           \u2502\n\u2502  Authentication: OpenID Connect                          \u2502\n\u2502       \u2502                                                    \u2502\n\u2502       \u25bc                                                    \u2502\n\u2502  Identity: DIDs                                            \u2502\n\u2502       \u2502                                                    \u2502\n\u2502       \u25bc                                                    \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510               \u2502\n\u2502  \u2502      a2p: User Profiles                \u2502               \u2502\n\u2502  \u2502  (Preferences, Memories, Consent)       \u2502               \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518               \u2502\n\u2502       \u2502                                                    \u2502\n\u2502       \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u2502\n\u2502       \u25bc          \u25bc          \u25bc          \u25bc          \u25bc       \u2502\n\u2502    A2A        MCP       Solid      LangChain   Others    \u2502\n\u2502  (Agent     (AI Tools) (Storage)   (Memory)               \u2502\n\u2502   Comm)                                                    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"documentation/comparison/#a2p-vs-a2a-protocol","title":"a2p vs A2A Protocol","text":"<p>A2A (Agent2Agent) is Google's protocol for agent communication, now part of the Linux Foundation.</p>"},{"location":"documentation/comparison/#different-focus-complementary-not-competitive","title":"Different Focus - Complementary, NOT Competitive","text":"Aspect a2p A2A Purpose User context for agents Agent-to-agent communication Data User preferences, memories Tasks, messages between agents Owner User Agents/platforms Flow Agent \u2192 Profile \u2192 Agent Agent \u2194 Agent Question \"What should agents know about the user?\" \"How do agents talk to each other?\""},{"location":"documentation/comparison/#complementary-integration","title":"Complementary Integration","text":"<p>They work together seamlessly:</p> <pre><code>graph LR\n    User[User] --&gt; Profile[a2p Profile]\n    Profile --&gt; AgentA[Agent A]\n    AgentA &lt;--&gt; |A2A| AgentB[Agent B]\n    AgentB &lt;--&gt; |A2A| AgentC[Agent C]</code></pre> <ol> <li>Agent A loads user profile from a2p</li> <li>Agent A communicates with Agents B and C via A2A</li> <li>User context travels in A2A message metadata</li> <li>All agents respect user preferences throughout the interaction</li> </ol>"},{"location":"documentation/comparison/#integration-status","title":"Integration Status","text":"<p>\u2705 Already Integrated: The <code>a2p-a2a</code> adapter is implemented and documented. User context automatically flows through A2A messages.</p>"},{"location":"documentation/comparison/#example-use-case","title":"Example Use Case","text":"<p>A travel planning scenario:</p> <ol> <li>a2p: User profile provides travel preferences, budget, dietary restrictions</li> <li>A2A: Travel agent coordinates with flight, hotel, and restaurant agents</li> <li>Integration: User preferences embedded in A2A messages ensure all agents respect user constraints</li> <li>Result: Personalized trip based on user profile, with all agents aware of preferences</li> </ol> <p>Key Message: a2p is the user profile layer that A2A agents need. Without a2p, A2A agents have no standardized way to access user context.</p>"},{"location":"documentation/comparison/#a2p-vs-solid-project","title":"a2p vs Solid Project","text":"<p>Solid is Tim Berners-Lee's project for decentralized data ownership.</p>"},{"location":"documentation/comparison/#synergy-not-competition","title":"Synergy, Not Competition","text":"<p>Key Insight: Solid provides infrastructure (storage), while a2p provides application layer (AI profiles). They are complementary.</p>"},{"location":"documentation/comparison/#similarities","title":"Similarities","text":"Both have Description User data ownership Users control their data Decentralized identity Not tied to platforms Data portability Move between providers Open standards W3C-aligned"},{"location":"documentation/comparison/#differences-and-complementarity","title":"Differences and Complementarity","text":"Aspect a2p Solid Layer Application (profiles) Infrastructure (storage) Scope AI agent profiles specifically General-purpose data pods Complexity Focused, simpler More comprehensive, complex AI features Memory proposals, agent policies Generic, needs extension Adoption focus AI developers General web developers Compliance GDPR/AI Act native General privacy focus"},{"location":"documentation/comparison/#integration-opportunity","title":"Integration Opportunity","text":"<p>a2p can use Solid Pods as storage backend:</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   a2p Profile    \u2502\n\u2502  (Schema/Data)   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502\n         \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Solid Pod     \u2502\n\u2502  (Storage)      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Benefits: - \u2705 Users can store a2p profiles in their Solid Pods - \u2705 Leverages Solid's decentralized infrastructure - \u2705 a2p brings AI-specific features to Solid ecosystem - \u2705 Solid users can use a2p for AI agent profiles</p> <p>Status: \u2705 Implemented - <code>SolidStorage</code> backend available in SDK. See Solid integration example.</p>"},{"location":"documentation/comparison/#when-to-use-which","title":"When to Use Which","text":"<ul> <li>Solid: Building a general decentralized app, need general data storage</li> <li>a2p: Building AI agents that need user context</li> <li>Together: Store a2p profiles in Solid Pods for maximum decentralization</li> </ul>"},{"location":"documentation/comparison/#a2p-vs-openid-connect","title":"a2p vs OpenID Connect","text":"<p>OpenID Connect is the standard for identity federation.</p>"},{"location":"documentation/comparison/#different-layers-complementary-not-competitive","title":"Different Layers - Complementary, NOT Competitive","text":"<p>Key Insight: OpenID Connect handles authentication (\"who are you?\"), while a2p handles profile data (\"what are your preferences?\"). They operate at different layers and are complementary.</p>"},{"location":"documentation/comparison/#different-purposes","title":"Different Purposes","text":"Aspect a2p OpenID Connect Layer Profile data Authentication Purpose AI profile access Identity verification What it shares Preferences, context, memories Identity claims (name, email) Control Per-agent policies Per-app consent AI-specific \u2705 \u274c Question \"What should agents know about you?\" \"Who are you?\""},{"location":"documentation/comparison/#complementary-integration_1","title":"Complementary Integration","text":"<p>Typical Flow:</p> <pre><code>graph LR\n    User[User] --&gt; OIDC[OIDC Login]\n    OIDC --&gt; DID[User DID]\n    DID --&gt; Profile[a2p Profile]\n    Profile --&gt; Agent[AI Agent]</code></pre> <ol> <li>OpenID Connect: User authenticates (\"I am Alice\")</li> <li>DID Mapping: OIDC identity maps to user DID</li> <li>a2p Profile: Agent accesses user's preferences, memories, consent policies</li> <li>Result: Authenticated user with personalized AI experience</li> </ol> <p>Integration Status: \u2705 Example available - See OIDC integration example. OIDC authentication integration in Gaugid is planned.</p> <p>Key Message: OpenID answers \"who are you?\", a2p answers \"what should I know about you?\". They work together, not against each other.</p>"},{"location":"documentation/comparison/#a2p-vs-langchain-memory","title":"a2p vs LangChain Memory","text":"<p>LangChain provides memory systems for AI agents.</p>"},{"location":"documentation/comparison/#key-differences","title":"Key Differences","text":"Aspect a2p LangChain Memory Ownership User owns Agent/developer owns Portability Across agents Single agent Standard Open protocol Library feature Consent Explicit, granular None Compliance GDPR native Manual implementation"},{"location":"documentation/comparison/#integration","title":"Integration","text":"<p>a2p provides a LangChain adapter:</p> <pre><code>from a2p_langchain import A2PMemory\n\n# Use a2p as LangChain memory backend\nmemory = A2PMemory(\n    user_did=\"did:a2p:user:local:alice\",\n    agent_did=\"did:a2p:agent:local:my-agent\"\n)\n</code></pre> <p>Best of both: LangChain's ecosystem + a2p's user sovereignty.</p>"},{"location":"documentation/comparison/#a2p-vs-mem0","title":"a2p vs Mem0","text":"<p>Mem0 is a memory layer for AI applications.</p>"},{"location":"documentation/comparison/#comparison","title":"Comparison","text":"Aspect a2p Mem0 Architecture Decentralized, user-owned Centralized service Control User controls Developer controls Standard Open protocol Proprietary API Self-hosting \u2705 Limited Compliance Built-in Manual"},{"location":"documentation/comparison/#a2p-vs-vector-databases","title":"a2p vs Vector Databases","text":"<p>Some teams use Pinecone, Weaviate, or Chroma for user context.</p>"},{"location":"documentation/comparison/#comparison_1","title":"Comparison","text":"Aspect a2p Vector DB Purpose User profiles Similarity search Ownership User Developer Structure Typed schemas Vectors Access control Consent policies App-level Portability \u2705 \u274c"},{"location":"documentation/comparison/#together","title":"Together","text":"<p>a2p for structured profile + Vector DB for semantic search:</p> <pre><code>User Query\n    \u2502\n    \u251c\u2500\u2500 a2p: Get user preferences\n    \u2502\n    \u2514\u2500\u2500 Vector DB: Search relevant context\n</code></pre>"},{"location":"documentation/comparison/#summary-matrix","title":"Summary Matrix","text":"Need Best Solution AI agents talking to each other A2A User profiles for AI a2p General decentralized data Solid Authentication OpenID Connect Agent memory (single agent) LangChain/Mem0 Semantic search Vector DB User sovereignty + AI a2p \u2705"},{"location":"documentation/comparison/#why-choose-a2p","title":"Why Choose a2p?","text":"<p>\u2705 If you need: - User-owned AI profiles - Portability across AI agents - Built-in GDPR/AI Act compliance - Granular consent management - Open standard with SDKs - Integration with A2A, MCP, Solid, or LangChain</p> <p>\u274c If you need: - Just agent-to-agent communication \u2192 Use A2A (but consider a2p for user context) - General data pods \u2192 Use Solid (but consider a2p for AI profiles on top) - Just authentication \u2192 Use OIDC (but consider a2p for profile data after auth) - AI assistant tool integration \u2192 Use MCP (but consider a2p for user profile resources) - Quick prototype without compliance \u2192 Use Mem0 (but consider a2p for production)</p> <p>Remember: a2p complements these solutions. You can use A2A + a2p, MCP + a2p, Solid + a2p, or OIDC + a2p together!</p>"},{"location":"documentation/comparison/#next-steps","title":"Next Steps","text":"<ul> <li>What is a2p? \u2014 Full introduction</li> <li>Core Concepts \u2014 Technical deep-dive</li> <li>Quickstart \u2014 Start building</li> </ul>"},{"location":"documentation/consent/","title":"Consent &amp; Policies","text":"<p>a2p gives users fine-grained control over who can access their data and for what purpose.</p>"},{"location":"documentation/consent/#access-control-overview","title":"Access Control Overview","text":"<pre><code>flowchart LR\n    agent[\"\ud83e\udd16 Agent\"] --&gt;|\"Request access\"| gateway[\"\ud83c\udf10 Gateway\"]\n    gateway --&gt;|\"Check policies\"| profile[\"\ud83d\udccb Profile\"]\n    profile --&gt;|\"Evaluate\"| policies[\"\ud83d\udcdc Policies\"]\n    policies --&gt;|\"Grant/Deny\"| gateway\n    gateway --&gt;|\"Response\"| agent</code></pre>"},{"location":"documentation/consent/#access-policies","title":"Access Policies","text":"<p>Policies define who can access what:</p> <pre><code>{\n  \"accessPolicies\": [\n    {\n      \"id\": \"policy_001\",\n      \"name\": \"Work AI Policy\",\n      \"priority\": 1,\n      \"agentPattern\": \"did:a2p:agent:local:work-*\",\n      \"allow\": [\n        \"a2p:preferences.*\",\n        \"a2p:professional.*\"\n      ],\n      \"deny\": [\n        \"a2p:health.*\",\n        \"a2p:financial.*\"\n      ],\n      \"permissions\": [\"read_scoped\", \"propose\"],\n      \"conditions\": {\n        \"purposeRequired\": true,\n        \"maxRetention\": \"24h\"\n      }\n    }\n  ]\n}\n</code></pre>"},{"location":"documentation/consent/#policy-fields","title":"Policy Fields","text":"Field Description <code>id</code> Unique policy identifier <code>name</code> Human-readable name <code>priority</code> Higher = evaluated first (conflicts resolved by priority) <code>agentPattern</code> Which agents this applies to (supports wildcards) <code>allow</code> Categories/scopes to allow <code>deny</code> Categories/scopes to deny (overrides allow) <code>permissions</code> What actions are permitted <code>conditions</code> Additional requirements"},{"location":"documentation/consent/#agent-patterns","title":"Agent Patterns","text":"Pattern Matches <code>*</code> All agents <code>did:a2p:agent:local:claude</code> Specific agent <code>did:a2p:agent:local:work-*</code> Agents with work- prefix <code>did:a2p:org:local:mycompany:*</code> All agents from an organization"},{"location":"documentation/consent/#permissions","title":"Permissions","text":"Permission Description Use Case <code>read_public</code> Read only public info Anonymous/untrusted agents <code>read_scoped</code> Read allowed categories Normal agent access <code>read_full</code> Read entire profile Rare, trusted admin tools <code>propose</code> Submit memory proposals Learning agents <code>write</code> Direct write access Very rare, user tools only"},{"location":"documentation/consent/#permission-examples","title":"Permission Examples","text":"<pre><code>// Minimal access (view-only)\n{ \"permissions\": [\"read_public\"] }\n\n// Normal agent\n{ \"permissions\": [\"read_scoped\", \"propose\"] }\n\n// Trusted agent\n{ \"permissions\": [\"read_scoped\", \"propose\", \"write\"] }\n</code></pre>"},{"location":"documentation/consent/#purpose-requirements","title":"Purpose Requirements","text":"<p>GDPR requires purpose limitation. a2p enforces this:</p>"},{"location":"documentation/consent/#access-request-with-purpose","title":"Access Request with Purpose","text":"<pre><code>{\n  \"agentDid\": \"did:a2p:agent:local:my-agent\",\n  \"userDid\": \"did:a2p:user:local:alice\",\n  \"scopes\": [\"a2p:preferences\", \"a2p:interests\"],\n  \"purpose\": {\n    \"type\": \"personalization\",\n    \"description\": \"To tailor responses to your communication preferences\",\n    \"legalBasis\": \"consent\",\n    \"retention\": \"session_only\",\n    \"automated\": {\n      \"decisionMaking\": false,\n      \"profiling\": false\n    },\n    \"sharing\": {\n      \"thirdParties\": false\n    }\n  }\n}\n</code></pre>"},{"location":"documentation/consent/#purpose-types","title":"Purpose Types","text":"Type Description <code>personalization</code> Tailoring responses <code>recommendation</code> Suggesting content <code>context_enrichment</code> Adding context to interactions <code>analysis</code> Understanding user needs <code>support</code> Providing customer support <code>research</code> Anonymized research <code>compliance</code> Legal/regulatory requirements"},{"location":"documentation/consent/#legal-bases-gdpr-article-6","title":"Legal Bases (GDPR Article 6)","text":"Basis When to Use <code>consent</code> User explicitly agreed <code>contract</code> Necessary for service delivery <code>legal_obligation</code> Required by law <code>vital_interests</code> Emergency situations <code>public_task</code> Public authority functions <code>legitimate_interests</code> Business need with balance test"},{"location":"documentation/consent/#consent-receipts","title":"Consent Receipts","text":"<p>Every granted access generates a consent receipt:</p> <pre><code>{\n  \"receiptId\": \"rcpt_abc123\",\n  \"userDid\": \"did:a2p:user:local:alice\",\n  \"agentDid\": \"did:a2p:agent:local:my-agent\",\n  \"grantedScopes\": [\n    \"a2p:preferences.language\",\n    \"a2p:preferences.communication\"\n  ],\n  \"deniedScopes\": [\n    \"a2p:health.*\"\n  ],\n  \"purpose\": {\n    \"type\": \"personalization\",\n    \"description\": \"To tailor responses\",\n    \"legalBasis\": \"consent\"\n  },\n  \"grantedAt\": \"2025-12-25T10:00:00Z\",\n  \"expiresAt\": \"2025-12-26T10:00:00Z\",\n  \"proof\": {\n    \"type\": \"Ed25519Signature2020\",\n    \"signature\": \"...\"\n  }\n}\n</code></pre>"},{"location":"documentation/consent/#receipt-uses","title":"Receipt Uses","text":"<ul> <li>Audit trail \u2014 Prove what was consented to</li> <li>Compliance \u2014 Satisfy GDPR record-keeping</li> <li>Transparency \u2014 Users can review access history</li> </ul>"},{"location":"documentation/consent/#policy-templates","title":"Policy Templates","text":"<p>For user convenience, a2p provides predefined templates:</p>"},{"location":"documentation/consent/#minimal-maximum-privacy","title":"Minimal (Maximum Privacy)","text":"<pre><code>{\n  \"template\": \"minimal\",\n  \"defaultPermission\": \"deny\",\n  \"allow\": [\n    \"a2p:identity.displayName\",\n    \"a2p:preferences.language\"\n  ],\n  \"proposalsEnabled\": false\n}\n</code></pre>"},{"location":"documentation/consent/#balanced-recommended","title":"Balanced (Recommended)","text":"<pre><code>{\n  \"template\": \"balanced\",\n  \"defaultPermission\": \"deny\",\n  \"allow\": [\n    \"a2p:preferences.*\",\n    \"a2p:interests.topics\"\n  ],\n  \"deny\": [\n    \"a2p:health.*\",\n    \"a2p:financial.*\"\n  ],\n  \"proposalsEnabled\": true,\n  \"autoApprove\": {\n    \"minConfidence\": 0.9,\n    \"trustedAgentsOnly\": true\n  }\n}\n</code></pre>"},{"location":"documentation/consent/#open-maximum-personalization","title":"Open (Maximum Personalization)","text":"<pre><code>{\n  \"template\": \"open\",\n  \"defaultPermission\": \"allow\",\n  \"deny\": [\n    \"a2p:health.conditions\",\n    \"a2p:financial.*\"\n  ],\n  \"proposalsEnabled\": true,\n  \"autoApprove\": {\n    \"minConfidence\": 0.7\n  }\n}\n</code></pre>"},{"location":"documentation/consent/#revoking-consent","title":"Revoking Consent","text":"<p>Users can revoke access at any time:</p> TypeScript <pre><code>const userClient = new A2PUserClient();\n\n// Revoke specific agent\nawait userClient.revokeAccess('did:a2p:agent:local:my-agent');\n\n// Revoke all agents\nawait userClient.revokeAllAccess();\n\n// Update policy to deny agent\nawait userClient.updatePolicy('policy_001', {\n  deny: ['a2p:*']\n});\n</code></pre>"},{"location":"documentation/consent/#revocation-effects","title":"Revocation Effects","text":"<ol> <li>Agent immediately loses access</li> <li>Existing consent receipts marked as revoked</li> <li>Agent notified via webhook (if subscribed)</li> <li>Future requests denied</li> </ol>"},{"location":"documentation/consent/#purpose-based-filtering","title":"Purpose-Based Filtering","text":"<p>Policies can require specific purposes:</p> <pre><code>{\n  \"purposeRequirements\": {\n    \"allowedPurposes\": [\"personalization\", \"support\"],\n    \"deniedPurposes\": [\"research\", \"marketing\"],\n    \"allowedLegalBases\": [\"consent\", \"contract\"],\n    \"maxRetention\": \"30d\",\n    \"allowThirdPartySharing\": false,\n    \"allowProfiling\": false\n  }\n}\n</code></pre>"},{"location":"documentation/consent/#conditional-access","title":"Conditional Access","text":"<p>Advanced policies can include conditions:</p> <pre><code>{\n  \"conditions\": {\n    \"timeRestrictions\": {\n      \"allowedHours\": { \"start\": \"09:00\", \"end\": \"18:00\" },\n      \"timezone\": \"Europe/Madrid\"\n    },\n    \"rateLimit\": {\n      \"maxRequests\": 100,\n      \"window\": \"1h\"\n    },\n    \"requireVerification\": {\n      \"agentCertified\": true,\n      \"operatorVerified\": true\n    }\n  }\n}\n</code></pre>"},{"location":"documentation/consent/#inherited-policies","title":"Inherited Policies","text":"<p>Organization policies can cascade:</p> <pre><code>flowchart TB\n    corp[\"\ud83c\udfe2 Corporation\\n(Enforced: no health data)\"]\n    dept[\"\ud83c\udfec Department\\n(Adds: work hours only)\"]\n    user[\"\ud83d\udc64 Employee\\n(Adds: personal preferences)\"]\n\n    corp --&gt;|\"Enforced\"| dept\n    dept --&gt;|\"Inherited\"| user</code></pre>"},{"location":"documentation/consent/#enforced-vs-default","title":"Enforced vs Default","text":"Type Can Override? Example Enforced No \"No health data sharing\" Default Yes \"Work hours access only\""},{"location":"documentation/consent/#managing-policies","title":"Managing Policies","text":""},{"location":"documentation/consent/#creating-a-policy","title":"Creating a Policy","text":"TypeScript <pre><code>await userClient.createPolicy({\n  name: 'Personal AI Policy',\n  agentPattern: 'did:a2p:agent:local:personal-*',\n  allow: ['a2p:preferences.*', 'a2p:interests.*'],\n  deny: ['a2p:professional.*'],\n  permissions: ['read_scoped', 'propose']\n});\n</code></pre>"},{"location":"documentation/consent/#listing-policies","title":"Listing Policies","text":"TypeScript <pre><code>const policies = await userClient.listPolicies();\n\nfor (const policy of policies) {\n  console.log(`${policy.name}: ${policy.allow.join(', ')}`);\n}\n</code></pre>"},{"location":"documentation/consent/#viewing-access-history","title":"Viewing Access History","text":"TypeScript <pre><code>const receipts = await userClient.listConsentReceipts({\n  agentDid: 'did:a2p:agent:local:my-agent',\n  since: '2025-12-01'\n});\n\nfor (const receipt of receipts) {\n  console.log(`${receipt.grantedAt}: ${receipt.grantedScopes.join(', ')}`);\n}\n</code></pre>"},{"location":"documentation/consent/#next-steps","title":"Next Steps","text":"<ul> <li>Security \u2014 Authentication and encryption</li> <li>Specification: API \u2014 Full API reference</li> </ul>"},{"location":"documentation/core-concepts/","title":"Core Concepts","text":"<p>This page explains the fundamental building blocks of the a2p protocol.</p>"},{"location":"documentation/core-concepts/#decentralized-identifiers-dids","title":"Decentralized Identifiers (DIDs)","text":"<p>Every actor in a2p has a DID \u2014 a globally unique, user-controlled identifier.</p> <pre><code>did:a2p:user:local:alice123\ndid:a2p:agent:local:my-assistant\ndid:a2p:entity:local:acme-corp\n</code></pre>"},{"location":"documentation/core-concepts/#why-dids","title":"Why DIDs?","text":"Benefit Description User-owned No central authority controls your identity Portable Works across platforms and providers Cryptographic Signatures prove ownership Standard W3C specification"},{"location":"documentation/core-concepts/#did-structure","title":"DID Structure","text":"<pre><code>did:a2p:user:local:alice123\n\u2502   \u2502   \u2502    \u2514\u2500\u2500 Unique identifier\n\u2502   \u2502   \u2514\u2500\u2500 Actor type (user, agent, entity)\n\u2502   \u2514\u2500\u2500 a2p method\n\u2514\u2500\u2500 DID scheme\n</code></pre>"},{"location":"documentation/core-concepts/#profile-types","title":"Profile Types","text":"<p>a2p supports three profile types:</p>"},{"location":"documentation/core-concepts/#human-profiles","title":"Human Profiles","text":"<p>For individual users:</p> <pre><code>{\n  \"id\": \"did:a2p:user:local:alice\",\n  \"profileType\": \"human\",\n  \"identity\": { \"displayName\": \"Alice\" },\n  \"common\": { \"preferences\": { ... } },\n  \"memories\": { ... }\n}\n</code></pre>"},{"location":"documentation/core-concepts/#agent-profiles","title":"Agent Profiles","text":"<p>For AI agents and services:</p> <pre><code>{\n  \"id\": \"did:a2p:agent:local:my-bot\",\n  \"profileType\": \"agent\",\n  \"identity\": { \"name\": \"My Assistant\" },\n  \"capabilities\": [\"conversation\", \"code\"],\n  \"operator\": { \"did\": \"did:a2p:entity:local:company\" },\n  \"aiActCompliance\": { \"riskLevel\": \"limited\" }\n}\n</code></pre>"},{"location":"documentation/core-concepts/#entity-profiles","title":"Entity Profiles","text":"<p>For organizations, teams, departments:</p> <pre><code>{\n  \"id\": \"did:a2p:entity:local:acme\",\n  \"profileType\": \"entity\",\n  \"entityType\": \"organization\",\n  \"identity\": { \"name\": \"Acme Corp\" },\n  \"enforcedPolicies\": [ ... ]\n}\n</code></pre>"},{"location":"documentation/core-concepts/#memory-categories","title":"Memory Categories","text":"<p>Memories are organized in namespaced categories:</p>"},{"location":"documentation/core-concepts/#standard-categories-a2p","title":"Standard Categories (a2p:)","text":"Category Description <code>a2p:preferences</code> User preferences (language, style) <code>a2p:interests</code> Topics, hobbies <code>a2p:professional</code> Work-related context <code>a2p:health</code> Health information (sensitive) <code>a2p:financial</code> Financial context (sensitive) <code>a2p:relationships</code> Social connections <code>a2p:episodic</code> Things learned in conversations"},{"location":"documentation/core-concepts/#extension-categories-ext","title":"Extension Categories (ext:)","text":"<p>Third parties can register custom categories:</p> <pre><code>ext:spotify:music.preferences\next:github:coding.style\n</code></pre>"},{"location":"documentation/core-concepts/#sensitivity-levels","title":"Sensitivity Levels","text":"Level Description Default Sharing <code>public</code> Safe to share widely Open <code>standard</code> Normal preferences With consent <code>sensitive</code> Personal information Restricted <code>restricted</code> Health, financial Explicit only"},{"location":"documentation/core-concepts/#consent-policies","title":"Consent Policies","text":"<p>Users control access through consent policies.</p>"},{"location":"documentation/core-concepts/#policy-structure","title":"Policy Structure","text":"<pre><code>{\n  \"id\": \"policy_work\",\n  \"name\": \"Work Assistant Policy\",\n  \"agentPattern\": \"did:a2p:agent:local:work-*\",\n  \"allow\": [\n    \"a2p:preferences.*\",\n    \"a2p:professional.*\"\n  ],\n  \"deny\": [\n    \"a2p:health.*\",\n    \"a2p:financial.*\"\n  ],\n  \"permissions\": [\"read_scoped\", \"propose\"],\n  \"validUntil\": \"2026-01-01T00:00:00Z\"\n}\n</code></pre>"},{"location":"documentation/core-concepts/#permissions","title":"Permissions","text":"Permission Description <code>read_public</code> Read public info only <code>read_scoped</code> Read allowed categories <code>read_full</code> Read entire profile <code>propose</code> Propose new memories <code>write</code> Direct write (rare)"},{"location":"documentation/core-concepts/#agent-patterns","title":"Agent Patterns","text":"Pattern Matches <code>did:a2p:agent:local:my-bot</code> Exact match <code>did:a2p:agent:local:work-*</code> Wildcard prefix <code>*</code> Any agent"},{"location":"documentation/core-concepts/#memory-proposals","title":"Memory Proposals","text":"<p>Agents don't write directly to profiles. They propose memories.</p>"},{"location":"documentation/core-concepts/#proposal-flow","title":"Proposal Flow","text":"<pre><code>sequenceDiagram\n    participant Agent\n    participant Profile\n    participant User\n\n    Agent-&gt;&gt;Profile: proposeMemory(content, category, confidence)\n    Profile-&gt;&gt;Profile: Store as pending\n    Profile-&gt;&gt;User: Notify of proposal\n\n    User-&gt;&gt;Profile: Review proposal\n    alt Approved\n        User-&gt;&gt;Profile: approve(proposalId)\n        Profile-&gt;&gt;Profile: Add to memories\n    else Rejected\n        User-&gt;&gt;Profile: reject(proposalId)\n        Profile-&gt;&gt;Profile: Discard\n    else Edited\n        User-&gt;&gt;Profile: approve(proposalId, editedContent)\n        Profile-&gt;&gt;Profile: Add edited version\n    end</code></pre>"},{"location":"documentation/core-concepts/#proposal-structure","title":"Proposal Structure","text":"<pre><code>{\n  \"id\": \"prop_abc123\",\n  \"agentDid\": \"did:a2p:agent:local:assistant\",\n  \"content\": \"User prefers TypeScript over JavaScript\",\n  \"category\": \"a2p:professional.preferences\",\n  \"confidence\": 0.85,\n  \"context\": \"Based on conversation about frameworks\",\n  \"status\": \"pending\",\n  \"expiresAt\": \"2025-01-07T00:00:00Z\"\n}\n</code></pre>"},{"location":"documentation/core-concepts/#purpose-specification","title":"Purpose Specification","text":"<p>Every access request must include a purpose (GDPR requirement).</p> <pre><code>{\n  \"purpose\": {\n    \"type\": \"personalization\",\n    \"description\": \"Tailor responses to your communication preferences\",\n    \"legalBasis\": \"consent\",\n    \"retention\": \"session_only\",\n    \"automated\": {\n      \"decisionMaking\": false,\n      \"profiling\": false\n    }\n  }\n}\n</code></pre>"},{"location":"documentation/core-concepts/#purpose-types","title":"Purpose Types","text":"Type Description <code>personalization</code> Tailoring responses <code>recommendation</code> Suggesting content <code>context_enrichment</code> Adding context to interactions <code>analysis</code> Understanding patterns <code>compliance</code> Legal requirements"},{"location":"documentation/core-concepts/#legal-bases","title":"Legal Bases","text":"Basis When to Use <code>consent</code> User explicitly agreed <code>contract</code> Necessary for service <code>legal_obligation</code> Required by law <code>legitimate_interests</code> Business need, balanced"},{"location":"documentation/core-concepts/#consent-receipts","title":"Consent Receipts","text":"<p>When access is granted, a consent receipt is created:</p> <pre><code>{\n  \"receiptId\": \"rcpt_xyz789\",\n  \"userDid\": \"did:a2p:user:local:alice\",\n  \"agentDid\": \"did:a2p:agent:local:assistant\",\n  \"grantedScopes\": [\"a2p:preferences.*\"],\n  \"deniedScopes\": [\"a2p:health.*\"],\n  \"purpose\": { ... },\n  \"grantedAt\": \"2025-12-25T10:00:00Z\",\n  \"expiresAt\": \"2025-12-26T10:00:00Z\"\n}\n</code></pre> <p>This creates an audit trail for compliance.</p>"},{"location":"documentation/core-concepts/#security-model","title":"Security Model","text":""},{"location":"documentation/core-concepts/#authentication","title":"Authentication","text":"<p>All requests are signed:</p> <pre><code>Authorization: A2P-Signature \n  did=\"did:a2p:agent:local:my-agent\",\n  sig=\"&lt;base64-signature&gt;\",\n  ts=\"2025-12-25T10:00:00Z\",\n  nonce=\"abc123xyz\"\n</code></pre>"},{"location":"documentation/core-concepts/#protection-mechanisms","title":"Protection Mechanisms","text":"Mechanism Purpose Signatures Prove identity Nonces Prevent replay attacks Timestamps Limit validity window Rate limiting Prevent abuse"},{"location":"documentation/core-concepts/#next-steps","title":"Next Steps","text":"<ul> <li>Architecture \u2014 System design</li> <li>Profiles Spec \u2014 Full profile specification</li> <li>Consent Spec \u2014 Full consent specification</li> </ul>"},{"location":"documentation/memories/","title":"Memories &amp; Proposals","text":"<p>Memories are pieces of information that AI agents learn about users. a2p uses a proposal system to ensure users control what gets stored.</p>"},{"location":"documentation/memories/#memory-categories","title":"Memory Categories","text":"<p>Memories are organized into namespaced categories:</p>"},{"location":"documentation/memories/#standard-categories-a2p","title":"Standard Categories (a2p:)","text":"Category Description Sensitivity <code>a2p:identity</code> Basic identity info Standard <code>a2p:professional</code> Work, skills, career Standard <code>a2p:interests</code> Topics, hobbies, preferences Low <code>a2p:preferences</code> Interaction preferences Low <code>a2p:context</code> Current focus, recent topics Low <code>a2p:health</code> Health information High <code>a2p:financial</code> Financial context High <code>a2p:relationships</code> Social connections High <code>a2p:episodic</code> Learned facts from conversations Standard"},{"location":"documentation/memories/#extension-categories-ext","title":"Extension Categories (ext:)","text":"<p>Third parties can define custom categories:</p> <pre><code>ext:mycompany:preferences\next:healthcare:conditions\next:spotify:listening\n</code></pre>"},{"location":"documentation/memories/#memory-structure","title":"Memory Structure","text":""},{"location":"documentation/memories/#structured-memory","title":"Structured Memory","text":"<p>For predefined categories with known schema:</p> <pre><code>{\n  \"a2p:professional\": {\n    \"occupation\": \"Software Engineer\",\n    \"industry\": \"Technology\",\n    \"skills\": [\"TypeScript\", \"Python\", \"AI/ML\"],\n    \"yearsExperience\": 10,\n    \"currentRole\": \"Senior Engineer\"\n  }\n}\n</code></pre>"},{"location":"documentation/memories/#episodic-memory","title":"Episodic Memory","text":"<p>For facts learned from conversations:</p> <pre><code>{\n  \"a2p:episodic\": [\n    {\n      \"id\": \"mem_abc123\",\n      \"content\": \"Prefers TypeScript over JavaScript for new projects\",\n      \"category\": \"a2p:professional.preferences\",\n      \"confidence\": 0.88,\n      \"source\": {\n        \"type\": \"agent_proposal\",\n        \"agentDid\": \"did:a2p:agent:local:copilot\",\n        \"sessionId\": \"sess_xyz\",\n        \"timestamp\": \"2025-12-20T14:30:00Z\"\n      },\n      \"metadata\": {\n        \"approvedAt\": \"2025-12-20T14:35:00Z\",\n        \"useCount\": 5,\n        \"lastUsed\": \"2025-12-25T10:00:00Z\"\n      }\n    }\n  ]\n}\n</code></pre>"},{"location":"documentation/memories/#the-proposal-system","title":"The Proposal System","text":"<p>Agents don't write directly to profiles. They propose memories, and users decide.</p>"},{"location":"documentation/memories/#why-proposals","title":"Why Proposals?","text":"<ol> <li>Accuracy \u2014 Users can correct misunderstandings</li> <li>Consent \u2014 Nothing stored without explicit approval</li> <li>Transparency \u2014 Users see what AI \"thinks\" it learned</li> <li>Control \u2014 Edit or reject before saving</li> </ol>"},{"location":"documentation/memories/#proposal-flow","title":"Proposal Flow","text":"<pre><code>sequenceDiagram\n    participant A as \ud83e\udd16 Agent\n    participant G as \ud83c\udf10 Gateway\n    participant P as \ud83d\udccb Profile\n    participant U as \ud83d\udc64 User\n\n    A-&gt;&gt;G: POST /profile/:did/memories/propose\n    G-&gt;&gt;P: Create proposal\n    P-&gt;&gt;U: Notification (optional)\n\n    Note over U: User reviews proposal\n\n    alt Approved\n        U-&gt;&gt;P: Approve (optional edit)\n        P-&gt;&gt;P: Add memory\n        P-&gt;&gt;A: Webhook: proposal.approved\n    else Rejected\n        U-&gt;&gt;P: Reject\n        P-&gt;&gt;A: Webhook: proposal.rejected\n    else Expired\n        Note over P: 7 days timeout\n        P-&gt;&gt;A: Webhook: proposal.expired\n    end</code></pre>"},{"location":"documentation/memories/#creating-a-proposal","title":"Creating a Proposal","text":"TypeScriptPython <pre><code>import { A2PClient } from '@a2p/sdk';\n\nconst client = new A2PClient({ agentDid: 'did:a2p:agent:local:my-agent' });\n\nconst proposal = await client.proposeMemory({\n  userDid: 'did:a2p:user:local:alice',\n  content: 'Prefers concise responses without unnecessary elaboration',\n  category: 'a2p:preferences.communication',\n  confidence: 0.85,\n  context: 'User explicitly requested shorter responses twice'\n});\n\nconsole.log('Proposal ID:', proposal.id);\nconsole.log('Status:', proposal.status); // 'pending'\nconsole.log('Expires:', proposal.expiresAt);\n</code></pre> <pre><code>from a2p import A2PClient\n\nclient = A2PClient(agent_did=\"did:a2p:agent:local:my-agent\")\n\nproposal = await client.propose_memory(\n    user_did=\"did:a2p:user:local:alice\",\n    content=\"Prefers concise responses without unnecessary elaboration\",\n    category=\"a2p:preferences.communication\",\n    confidence=0.85,\n    context=\"User explicitly requested shorter responses twice\"\n)\n\nprint(f\"Proposal ID: {proposal.id}\")\nprint(f\"Status: {proposal.status}\")  # 'pending'\n</code></pre>"},{"location":"documentation/memories/#proposal-structure","title":"Proposal Structure","text":"<pre><code>{\n  \"id\": \"prop_abc123xyz\",\n  \"userDid\": \"did:a2p:user:local:alice\",\n  \"agentDid\": \"did:a2p:agent:local:my-agent\",\n  \"content\": \"Prefers concise responses\",\n  \"category\": \"a2p:preferences.communication\",\n  \"confidence\": 0.85,\n  \"context\": \"User explicitly requested shorter responses twice\",\n  \"status\": \"pending\",\n  \"proposedAt\": \"2025-12-25T10:00:00Z\",\n  \"expiresAt\": \"2026-01-01T10:00:00Z\"\n}\n</code></pre>"},{"location":"documentation/memories/#reviewing-proposals","title":"Reviewing Proposals","text":""},{"location":"documentation/memories/#user-actions","title":"User Actions","text":"Action Result Approve Memory added to profile as-is Edit &amp; Approve Memory added with user's edits Reject Proposal discarded Ignore Expires after 7 days"},{"location":"documentation/memories/#reviewing-via-sdk","title":"Reviewing via SDK","text":"TypeScript <pre><code>const userClient = new A2PUserClient();\n\n// List pending proposals\nconst proposals = await userClient.listProposals({ status: 'pending' });\n\nfor (const proposal of proposals) {\n  console.log(`From: ${proposal.agentDid}`);\n  console.log(`Content: ${proposal.content}`);\n  console.log(`Confidence: ${proposal.confidence}`);\n}\n\n// Approve a proposal\nawait userClient.reviewProposal(proposal.id, {\n  action: 'approve'\n});\n\n// Approve with edits\nawait userClient.reviewProposal(proposal.id, {\n  action: 'approve',\n  editedContent: 'Prefers brief, concise responses'\n});\n\n// Reject\nawait userClient.reviewProposal(proposal.id, {\n  action: 'reject',\n  reason: 'This is not accurate'\n});\n</code></pre>"},{"location":"documentation/memories/#auto-approval","title":"Auto-Approval","text":"<p>For convenience, users can enable automatic approval:</p> <pre><code>{\n  \"autoApprove\": {\n    \"enabled\": true,\n    \"conditions\": {\n      \"trustedAgentsOnly\": true,\n      \"minConfidence\": 0.9,\n      \"allowedCategories\": [\n        \"a2p:preferences.*\",\n        \"a2p:interests.*\"\n      ],\n      \"deniedCategories\": [\n        \"a2p:health.*\",\n        \"a2p:financial.*\"\n      ],\n      \"maxProposalsPerDay\": 5,\n      \"requireReview\": \"weekly\"\n    }\n  }\n}\n</code></pre>"},{"location":"documentation/memories/#auto-approval-conditions","title":"Auto-Approval Conditions","text":"Condition Description <code>trustedAgentsOnly</code> Only certified or explicitly trusted agents <code>minConfidence</code> Minimum confidence score (0.0-1.0) <code>allowedCategories</code> Categories eligible for auto-approval <code>deniedCategories</code> Categories that always require manual review <code>maxProposalsPerDay</code> Limit to prevent flooding <code>requireReview</code> Periodic review even if auto-approved"},{"location":"documentation/memories/#memory-confidence","title":"Memory Confidence","text":"<p>Confidence scores indicate how certain the agent is:</p> Score Meaning Example 0.9+ Very confident User explicitly stated 0.7-0.9 Confident Strong inference from behavior 0.5-0.7 Moderate Reasonable inference &lt;0.5 Low Guess, should verify"},{"location":"documentation/memories/#confidence-decay","title":"Confidence Decay","text":"<p>Memories can decay over time if not reinforced:</p> <pre><code>{\n  \"memoryManagement\": {\n    \"confidenceDecay\": {\n      \"enabled\": true,\n      \"halfLife\": \"180d\",\n      \"minimumConfidence\": 0.3\n    }\n  }\n}\n</code></pre>"},{"location":"documentation/memories/#memory-consolidation","title":"Memory Consolidation","text":"<p>Multiple related memories can be consolidated:</p> <pre><code>flowchart LR\n    mem1[\"Likes Python\"] --&gt; consolidated[\"Prefers Python and TypeScript\\nfor different use cases\"]\n    mem2[\"Uses TypeScript for frontend\"]\n    mem3[\"Prefers TypeScript for new projects\"]\n    mem2 --&gt; consolidated\n    mem3 --&gt; consolidated</code></pre>"},{"location":"documentation/memories/#consolidation-triggers","title":"Consolidation Triggers","text":"<ul> <li>Manual user action</li> <li>Automated when memories conflict</li> <li>Periodic cleanup</li> </ul>"},{"location":"documentation/memories/#deleting-memories","title":"Deleting Memories","text":"<p>Users can delete any memory:</p> TypeScript <pre><code>// Delete specific memory\nawait userClient.deleteMemory('mem_abc123');\n\n// Delete all memories from an agent\nawait userClient.deleteMemoriesFrom('did:a2p:agent:local:my-agent');\n\n// Delete entire category\nawait userClient.deleteCategory('a2p:episodic');\n</code></pre>"},{"location":"documentation/memories/#best-practices-for-agents","title":"Best Practices for Agents","text":""},{"location":"documentation/memories/#do","title":"Do","text":"<ul> <li>\u2705 Only propose high-confidence memories</li> <li>\u2705 Provide clear context for why you're proposing</li> <li>\u2705 Use appropriate categories</li> <li>\u2705 Respect sensitivity levels</li> <li>\u2705 Handle rejections gracefully</li> </ul>"},{"location":"documentation/memories/#dont","title":"Don't","text":"<ul> <li>\u274c Flood users with low-value proposals</li> <li>\u274c Propose without sufficient confidence</li> <li>\u274c Propose sensitive information without strong signal</li> <li>\u274c Re-propose rejected memories</li> </ul>"},{"location":"documentation/memories/#next-steps","title":"Next Steps","text":"<ul> <li>Consent &amp; Policies \u2014 Control who can access memories</li> <li>Security \u2014 How memories are protected</li> </ul>"},{"location":"documentation/profiles/","title":"Profiles","text":"<p>Profiles are the core data structure in a2p. This page covers profile types, structure, and management.</p>"},{"location":"documentation/profiles/#profile-types","title":"Profile Types","text":"<p>a2p supports three profile types:</p> Type Use Case Example <code>human</code> Individual users Personal AI assistant user <code>agent</code> AI systems, bots, services ChatGPT, Claude, custom agent <code>entity</code> Organizations, teams, groups Company, department, project"},{"location":"documentation/profiles/#human-profile","title":"Human Profile","text":"<p>The most common profile type, owned by individual users.</p>"},{"location":"documentation/profiles/#full-structure","title":"Full Structure","text":"<pre><code>{\n  \"$schema\": \"https://a2p.protocol/schemas/v1/profile.json\",\n  \"id\": \"did:a2p:user:local:alice\",\n  \"version\": \"1.0\",\n  \"profileType\": \"human\",\n  \"created\": \"2025-01-01T00:00:00Z\",\n  \"updated\": \"2025-12-25T10:00:00Z\",\n\n  \"identity\": {\n    \"did\": \"did:a2p:user:local:alice\",\n    \"displayName\": \"Alice Chen\",\n    \"pronouns\": \"she/her\",\n    \"avatar\": \"https://example.com/alice.jpg\",\n    \"email\": \"alice@example.com\"\n  },\n\n  \"common\": {\n    \"preferences\": {\n      \"language\": \"en-US\",\n      \"timezone\": \"Europe/Madrid\",\n      \"communication\": {\n        \"style\": \"concise\",\n        \"formality\": \"casual\",\n        \"humor\": true,\n        \"verbosity\": \"brief\"\n      },\n      \"accessibility\": {\n        \"screenReader\": false,\n        \"highContrast\": false,\n        \"reducedMotion\": false\n      }\n    },\n    \"context\": {\n      \"currentFocus\": \"a2p protocol development\",\n      \"recentTopics\": [\"AI agents\", \"privacy\"]\n    }\n  },\n\n  \"memories\": {\n    \"a2p:professional\": {\n      \"occupation\": \"Software Engineer\",\n      \"industry\": \"Technology\",\n      \"skills\": [\"TypeScript\", \"Python\", \"AI/ML\"],\n      \"experience\": \"10+ years\"\n    },\n    \"a2p:interests\": {\n      \"topics\": [\"AI ethics\", \"privacy tech\", \"open source\"],\n      \"music\": {\n        \"genres\": [\"jazz\", \"electronic\"],\n        \"favoriteArtists\": [\"Nils Frahm\"]\n      }\n    },\n    \"a2p:episodic\": [\n      {\n        \"id\": \"mem_001\",\n        \"content\": \"Prefers TypeScript for new projects\",\n        \"confidence\": 0.9,\n        \"source\": {\n          \"agentDid\": \"did:a2p:agent:local:copilot\",\n          \"timestamp\": \"2025-12-20T14:00:00Z\"\n        }\n      }\n    ]\n  },\n\n  \"accessPolicies\": [\n    {\n      \"id\": \"policy_default\",\n      \"name\": \"Default Policy\",\n      \"agentPattern\": \"*\",\n      \"allow\": [\"a2p:preferences.language\", \"a2p:preferences.timezone\"],\n      \"deny\": [\"a2p:health.*\", \"a2p:financial.*\"],\n      \"permissions\": [\"read_public\"]\n    }\n  ],\n\n  \"pendingProposals\": [],\n\n  \"subProfiles\": [\n    {\n      \"profileId\": \"did:a2p:user:local:alice:work\",\n      \"name\": \"Work\",\n      \"purpose\": \"Professional interactions\"\n    }\n  ]\n}\n</code></pre>"},{"location":"documentation/profiles/#agent-profile","title":"Agent Profile","text":"<p>Describes an AI agent, bot, or service.</p>"},{"location":"documentation/profiles/#structure","title":"Structure","text":"<pre><code>{\n  \"id\": \"did:a2p:agent:local:my-assistant\",\n  \"version\": \"1.0\",\n  \"profileType\": \"agent\",\n  \"created\": \"2025-01-01T00:00:00Z\",\n\n  \"agentInfo\": {\n    \"name\": \"My Assistant\",\n    \"description\": \"A helpful AI assistant\",\n    \"version\": \"2.1.0\",\n    \"capabilities\": [\"conversation\", \"analysis\", \"coding\"],\n    \"category\": \"general_assistant\"\n  },\n\n  \"operator\": {\n    \"did\": \"did:a2p:org:local:mycompany\",\n    \"name\": \"MyCompany Inc.\",\n    \"contactEmail\": \"support@mycompany.com\",\n    \"privacyPolicyUrl\": \"https://mycompany.com/privacy\"\n  },\n\n  \"technical\": {\n    \"a2pEndpoint\": \"https://api.mycompany.com/a2p\",\n    \"supportedVersions\": [\"1.0\"],\n    \"publicKey\": \"-----BEGIN PUBLIC KEY-----...\"\n  },\n\n  \"trust\": {\n    \"certifications\": [\"a2p_certified_v1\"],\n    \"verifiedOperator\": true,\n    \"securityAudit\": {\n      \"lastAudit\": \"2025-06-15\",\n      \"auditor\": \"SecurityCorp\"\n    }\n  },\n\n  \"dataPractices\": {\n    \"dataRetention\": \"session_only\",\n    \"thirdPartySharing\": false,\n    \"storageLocation\": \"EU\"\n  },\n\n  \"aiActCompliance\": {\n    \"riskLevel\": \"limited\",\n    \"transparencyObligations\": [\n      \"user_notification\",\n      \"ai_generated_content_marking\"\n    ],\n    \"humanOversight\": {\n      \"required\": true,\n      \"mechanism\": \"human_on_the_loop\"\n    }\n  }\n}\n</code></pre>"},{"location":"documentation/profiles/#ai-act-compliance-fields","title":"AI Act Compliance Fields","text":"<p>For EU AI Act compliance, agent profiles include:</p> Field Description <code>riskLevel</code> <code>minimal</code>, <code>limited</code>, <code>high</code> <code>transparencyObligations</code> Required disclosures <code>humanOversight</code> Oversight mechanism <code>conformityAssessment</code> Assessment status"},{"location":"documentation/profiles/#entity-profile","title":"Entity Profile","text":"<p>For organizations, teams, departments, or projects.</p>"},{"location":"documentation/profiles/#structure_1","title":"Structure","text":"<pre><code>{\n  \"id\": \"did:a2p:org:local:acme-corp\",\n  \"version\": \"1.0\",\n  \"profileType\": \"entity\",\n\n  \"entityInfo\": {\n    \"name\": \"Acme Corporation\",\n    \"entityType\": \"organization\",\n    \"description\": \"A technology company\",\n    \"website\": \"https://acme.example.com\"\n  },\n\n  \"hierarchy\": {\n    \"parent\": null,\n    \"children\": [\n      \"did:a2p:org:local:acme-corp:engineering\",\n      \"did:a2p:org:local:acme-corp:sales\"\n    ]\n  },\n\n  \"enforcedPolicies\": {\n    \"allChildren\": {\n      \"minRetention\": \"30d\",\n      \"requiredAuditLog\": true,\n      \"deniedCategories\": [\"a2p:health.*\"]\n    }\n  },\n\n  \"defaultPolicies\": {\n    \"recommendations\": [\n      {\n        \"name\": \"Standard Work Policy\",\n        \"allow\": [\"a2p:professional.*\"],\n        \"deny\": [\"a2p:personal.*\"]\n      }\n    ]\n  },\n\n  \"registeredAgents\": [\n    {\n      \"agentDid\": \"did:a2p:agent:local:acme-copilot\",\n      \"role\": \"internal_assistant\",\n      \"registeredAt\": \"2025-01-15T00:00:00Z\"\n    }\n  ]\n}\n</code></pre>"},{"location":"documentation/profiles/#entity-hierarchy","title":"Entity Hierarchy","text":"<p>Entities can form hierarchies:</p> <pre><code>Acme Corporation\n\u251c\u2500\u2500 Engineering Department\n\u2502   \u251c\u2500\u2500 Platform Team\n\u2502   \u2514\u2500\u2500 AI Team\n\u251c\u2500\u2500 Sales Department\n\u2502   \u2514\u2500\u2500 Enterprise Team\n\u2514\u2500\u2500 HR Department\n</code></pre> <p>Policies can be enforced from parent to children.</p>"},{"location":"documentation/profiles/#profile-operations","title":"Profile Operations","text":""},{"location":"documentation/profiles/#creating-a-profile","title":"Creating a Profile","text":"TypeScriptPython <pre><code>import { A2PUserClient } from '@a2p/sdk';\n\nconst client = new A2PUserClient();\n\nconst profile = await client.createProfile({\n  displayName: 'Alice',\n  preferences: {\n    language: 'en-US',\n    timezone: 'Europe/Madrid'\n  }\n});\n\nconsole.log('Created:', profile.id);\n</code></pre> <pre><code>from a2p import A2PUserClient\n\nclient = A2PUserClient()\n\nprofile = await client.create_profile(\n    display_name=\"Alice\",\n    preferences={\n        \"language\": \"en-US\",\n        \"timezone\": \"Europe/Madrid\"\n    }\n)\n\nprint(f\"Created: {profile.id}\")\n</code></pre>"},{"location":"documentation/profiles/#updating-a-profile","title":"Updating a Profile","text":"TypeScriptPython <pre><code>await client.updateProfile({\n  common: {\n    preferences: {\n      communication: { style: 'detailed' }\n    }\n  }\n});\n</code></pre> <pre><code>await client.update_profile(\n    common={\n        \"preferences\": {\n            \"communication\": {\"style\": \"detailed\"}\n        }\n    }\n)\n</code></pre>"},{"location":"documentation/profiles/#exporting-a-profile","title":"Exporting a Profile","text":"<p>Profiles can be exported in JSON format for portability:</p> TypeScript <pre><code>const exported = await client.exportProfile();\n// Save to file or transfer to new provider\n</code></pre>"},{"location":"documentation/profiles/#sub-profiles","title":"Sub-Profiles","text":"<p>Users can create sub-profiles for different contexts:</p> <pre><code>const workProfile = await client.createSubProfile({\n  name: 'Work',\n  purpose: 'Professional interactions',\n  inheritsFrom: mainProfile.id,\n  overrides: {\n    preferences: {\n      communication: { formality: 'professional' }\n    }\n  }\n});\n</code></pre>"},{"location":"documentation/profiles/#inheritance-rules","title":"Inheritance Rules","text":"Data Type Inheritance <code>identity</code> Inherited, can override <code>displayName</code> <code>preferences</code> Inherited, can override specific fields <code>memories</code> Not inherited by default <code>policies</code> Inherited, can add more restrictive"},{"location":"documentation/profiles/#next-steps","title":"Next Steps","text":"<ul> <li>Memories &amp; Proposals \u2014 Learn about memory management</li> <li>Consent &amp; Policies \u2014 Understand access control</li> </ul>"},{"location":"documentation/security/","title":"Security","text":"<p>a2p implements defense-in-depth security with multiple layers of protection.</p>"},{"location":"documentation/security/#security-overview","title":"Security Overview","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    Layer 1: Network                         \u2502\n\u2502  TLS 1.3 \u2022 WAF \u2022 DDoS mitigation                           \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                    Layer 2: Authentication                  \u2502\n\u2502  DID-based identity \u2022 Signature verification               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                    Layer 3: Replay Protection               \u2502\n\u2502  Timestamp validation \u2022 Nonce checking                     \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                    Layer 4: Authorization                   \u2502\n\u2502  Consent policies \u2022 Scope validation \u2022 Purpose checking    \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                    Layer 5: Rate Limiting                   \u2502\n\u2502  Per-agent limits \u2022 Per-user limits \u2022 Global limits        \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                    Layer 6: Data Protection                 \u2502\n\u2502  Encryption at rest \u2022 Encryption in transit                \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"documentation/security/#authentication","title":"Authentication","text":""},{"location":"documentation/security/#did-based-identity","title":"DID-Based Identity","text":"<p>All actors (users, agents, entities) are identified by DIDs:</p> <pre><code>did:a2p:user:local:alice\ndid:a2p:agent:local:my-assistant\ndid:a2p:org:local:mycompany\n</code></pre> <p>DIDs are:</p> <ul> <li>Self-sovereign \u2014 You control your own identity</li> <li>Cryptographic \u2014 Backed by key pairs</li> <li>Verifiable \u2014 Anyone can verify signatures</li> <li>Portable \u2014 Not tied to any provider</li> </ul>"},{"location":"documentation/security/#request-signing","title":"Request Signing","text":"<p>All API requests must be signed:</p> <pre><code>POST /a2p/v1/profile/did:a2p:user:local:alice/memories/propose\nAuthorization: A2P-Signature \n  did=\"did:a2p:agent:local:my-agent\",\n  sig=\"eyJhbGciOiJFZERTQSJ9...\",\n  ts=\"2025-12-25T10:00:00Z\",\n  nonce=\"abc123xyz789def456\",\n  exp=\"300\"\nContent-Type: application/json\nA2P-Version: 1.0\n\n{...}\n</code></pre>"},{"location":"documentation/security/#signature-computation","title":"Signature Computation","text":"<pre><code>signature = sign(privateKey, sha256(\n  method + \"\\n\" +\n  path + \"\\n\" +\n  timestamp + \"\\n\" +\n  nonce + \"\\n\" +\n  sha256(body)\n))\n</code></pre>"},{"location":"documentation/security/#replay-protection","title":"Replay Protection","text":""},{"location":"documentation/security/#timestamp-validation","title":"Timestamp Validation","text":"Check Requirement Format ISO 8601 Window \u00b15 minutes from server time Precision Seconds"},{"location":"documentation/security/#nonce-validation","title":"Nonce Validation","text":"Check Requirement Format 16-32 alphanumeric characters Uniqueness Not seen in last 5 minutes Storage Server maintains nonce cache"},{"location":"documentation/security/#example-implementation","title":"Example Implementation","text":"TypeScript <pre><code>import { createHash, sign } from 'crypto';\n\nfunction signRequest(privateKey: string, method: string, path: string, body: object) {\n  const timestamp = new Date().toISOString();\n  const nonce = crypto.randomUUID().replace(/-/g, '');\n  const bodyHash = createHash('sha256')\n    .update(JSON.stringify(body))\n    .digest('hex');\n\n  const message = `${method}\\n${path}\\n${timestamp}\\n${nonce}\\n${bodyHash}`;\n  const signature = sign('sha256', Buffer.from(message), privateKey);\n\n  return {\n    timestamp,\n    nonce,\n    signature: signature.toString('base64')\n  };\n}\n</code></pre>"},{"location":"documentation/security/#rate-limiting","title":"Rate Limiting","text":""},{"location":"documentation/security/#default-limits","title":"Default Limits","text":"Scope Limit Window Global (per IP) 1000 per hour Per agent 100 per hour Per user profile 60 per minute"},{"location":"documentation/security/#per-operation-limits","title":"Per-Operation Limits","text":"Operation Limit Window Profile reads 100 per hour Memory proposals 20 per hour Memory writes 50 per hour Policy updates 10 per hour Consent grants 30 per hour"},{"location":"documentation/security/#rate-limit-headers","title":"Rate Limit Headers","text":"<pre><code>X-RateLimit-Limit: 100\nX-RateLimit-Remaining: 95\nX-RateLimit-Reset: 1735126800\nRetry-After: 60\n</code></pre>"},{"location":"documentation/security/#key-management","title":"Key Management","text":""},{"location":"documentation/security/#supported-algorithms","title":"Supported Algorithms","text":"Algorithm Use Status Ed25519 Signatures \u2705 Recommended secp256k1 Signatures \u2705 Supported P-256 Signatures \u2705 Supported X25519 Key exchange \u2705 Recommended"},{"location":"documentation/security/#key-rotation","title":"Key Rotation","text":"<p>Keys should be rotated:</p> <ul> <li>Scheduled: Every 12 months</li> <li>On compromise: Immediately</li> <li>On personnel change: Within 72 hours</li> </ul> <pre><code>{\n  \"keyRotation\": {\n    \"gracePeriod\": \"7d\",\n    \"notification\": {\n      \"method\": \"webhook\",\n      \"advanceNotice\": \"24h\"\n    }\n  }\n}\n</code></pre>"},{"location":"documentation/security/#key-recovery","title":"Key Recovery","text":"<p>Multiple recovery methods supported:</p> Method Description Social recovery Shamir secret sharing with trusted contacts Backup key Encrypted backup stored securely Custodian Trusted third-party recovery service"},{"location":"documentation/security/#data-protection","title":"Data Protection","text":""},{"location":"documentation/security/#encryption-at-rest","title":"Encryption at Rest","text":"Data Encryption Profile data AES-256-GCM Keys Hardware security module (HSM) Backups AES-256-GCM + envelope encryption"},{"location":"documentation/security/#encryption-in-transit","title":"Encryption in Transit","text":"Protocol Requirement TLS 1.3 required, 1.2 minimum Cipher suites AEAD only (AES-GCM, ChaCha20-Poly1305) Certificate Valid, trusted CA"},{"location":"documentation/security/#privacy-protection","title":"Privacy Protection","text":""},{"location":"documentation/security/#did-enumeration-protection","title":"DID Enumeration Protection","text":"<p>Prevent attackers from discovering valid DIDs:</p> <ol> <li>Constant-time responses \u2014 Same timing for exists/not-exists</li> <li>Consistent errors \u2014 Same error message for all \"not found\" cases</li> <li>Rate limiting \u2014 Block scanning attempts</li> </ol>"},{"location":"documentation/security/#data-minimization","title":"Data Minimization","text":"<ul> <li>Only request scopes you need</li> <li>Use shortest practical retention</li> <li>Delete data when no longer needed</li> </ul>"},{"location":"documentation/security/#error-codes","title":"Error Codes","text":"Code Name Description A2P001 Unauthorized Missing or invalid authentication A2P002 Forbidden Valid auth but insufficient permissions A2P003 Not Found Resource doesn't exist A2P004 Consent Required Need user consent for this scope A2P005 Rate Limited Too many requests A2P006 Invalid Request Malformed request A2P007 Timestamp Invalid Timestamp outside acceptable window A2P008 Nonce Reused Nonce already seen"},{"location":"documentation/security/#security-best-practices","title":"Security Best Practices","text":""},{"location":"documentation/security/#for-agent-developers","title":"For Agent Developers","text":"<ul> <li>\u2705 Keep private keys secure (HSM or secure enclave)</li> <li>\u2705 Rotate keys regularly</li> <li>\u2705 Use minimum required scopes</li> <li>\u2705 Implement proper error handling</li> <li>\u2705 Log access for audit trails</li> <li>\u274c Don't log sensitive data</li> <li>\u274c Don't store user data beyond stated retention</li> </ul>"},{"location":"documentation/security/#for-gateway-operators","title":"For Gateway Operators","text":"<ul> <li>\u2705 Use TLS 1.3</li> <li>\u2705 Implement rate limiting</li> <li>\u2705 Maintain nonce cache</li> <li>\u2705 Regular security updates</li> <li>\u2705 Monitor for anomalies</li> <li>\u2705 Regular penetration testing</li> </ul>"},{"location":"documentation/security/#for-users","title":"For Users","text":"<ul> <li>\u2705 Use strong policies</li> <li>\u2705 Review consent receipts regularly</li> <li>\u2705 Revoke unused agent access</li> <li>\u2705 Keep recovery methods secure</li> <li>\u2705 Use sub-profiles for sensitive contexts</li> </ul>"},{"location":"documentation/security/#post-quantum-roadmap","title":"Post-Quantum Roadmap","text":"<p>a2p has a defined path to post-quantum security:</p> Phase Timeline Actions Preparation 2025-2026 Hybrid key support Migration 2027-2028 Transition to PQ algorithms PQ-Native 2029+ Classical algorithms deprecated"},{"location":"documentation/security/#supported-pq-algorithms","title":"Supported PQ Algorithms","text":"Algorithm Type Status Dilithium Signatures Planned Falcon Signatures Alternative SPHINCS+ Signatures High-security option Kyber Key encapsulation Planned"},{"location":"documentation/security/#reporting-security-issues","title":"Reporting Security Issues","text":"<p>Do not report security vulnerabilities publicly.</p> <p>Email: security@a2p.protocol</p> <p>Include: - Description of the vulnerability - Steps to reproduce - Potential impact - Your contact information</p> <p>Response timeline: - Critical: 4 hours - High: 24 hours - Medium: 72 hours - Low: 7 days</p>"},{"location":"documentation/security/#next-steps","title":"Next Steps","text":"<ul> <li>Specification: API \u2014 API security details</li> <li>Legal: GDPR \u2014 Privacy compliance</li> </ul>"},{"location":"documentation/what-is-a2p/","title":"What is a2p?","text":"<p>a2p (Agent 2 Profile) is an open protocol that enables user-sovereign AI profiles. It gives users ownership and control of their AI interaction data across all AI agents.</p>"},{"location":"documentation/what-is-a2p/#the-core-idea","title":"The Core Idea","text":"<p>Think of a2p as a digital passport for AI interactions:</p> Passport a2p Profile Owned by you Owned by you Contains your identity Contains your preferences Portable across countries Portable across AI agents You control what to share You control what to share"},{"location":"documentation/what-is-a2p/#why-a2p-exists","title":"Why a2p Exists","text":""},{"location":"documentation/what-is-a2p/#the-current-problem","title":"The Current Problem","text":"<p>When you use AI assistants today:</p> <ol> <li>Your data is siloed \u2014 Each AI has its own copy of your preferences</li> <li>You don't own it \u2014 The AI company owns your interaction history</li> <li>It's not portable \u2014 Switch to a new AI? Start from scratch</li> <li>Privacy is unclear \u2014 Hard to know what's stored or delete it</li> </ol>"},{"location":"documentation/what-is-a2p/#the-a2p-solution","title":"The a2p Solution","text":"<p>With a2p:</p> <ol> <li>You own your profile \u2014 Cryptographic ownership via DIDs</li> <li>It's portable \u2014 Works with any a2p-compatible agent</li> <li>You control access \u2014 Granular consent policies</li> <li>Compliance built-in \u2014 GDPR and AI Act requirements native</li> </ol>"},{"location":"documentation/what-is-a2p/#key-concepts","title":"Key Concepts","text":""},{"location":"documentation/what-is-a2p/#profiles","title":"Profiles","text":"<p>A profile contains:</p> <ul> <li>Identity \u2014 Display name, pronouns (optional)</li> <li>Preferences \u2014 Language, timezone, communication style</li> <li>Interests \u2014 Topics, hobbies, professional context</li> <li>Memories \u2014 Things agents have learned about you</li> </ul> <pre><code>{\n  \"id\": \"did:a2p:user:local:alice\",\n  \"profileType\": \"human\",\n  \"identity\": {\n    \"displayName\": \"Alice\",\n    \"pronouns\": \"she/her\"\n  },\n  \"common\": {\n    \"preferences\": {\n      \"language\": \"en-US\",\n      \"communication\": { \"style\": \"concise\" }\n    }\n  },\n  \"memories\": {\n    \"a2p:professional\": {\n      \"occupation\": \"Software Engineer\"\n    }\n  }\n}\n</code></pre>"},{"location":"documentation/what-is-a2p/#consent-policies","title":"Consent Policies","text":"<p>You define rules for who can access what:</p> <pre><code>{\n  \"agentPattern\": \"did:a2p:agent:local:my-assistant\",\n  \"allow\": [\"a2p:preferences.*\", \"a2p:interests.*\"],\n  \"deny\": [\"a2p:health.*\"],\n  \"permissions\": [\"read_scoped\", \"propose\"]\n}\n</code></pre>"},{"location":"documentation/what-is-a2p/#memory-proposals","title":"Memory Proposals","text":"<p>Agents can't just write to your profile. They propose memories, and you approve:</p> <ol> <li>Agent learns something: \"User prefers TypeScript\"</li> <li>Agent proposes this as a memory</li> <li>You review the proposal</li> <li>You approve, edit, or reject</li> </ol>"},{"location":"documentation/what-is-a2p/#how-it-works","title":"How It Works","text":"<pre><code>sequenceDiagram\n    participant User\n    participant Agent\n    participant Profile\n\n    Agent-&gt;&gt;Profile: Request access (with purpose)\n    Profile-&gt;&gt;Profile: Check consent policies\n    Profile--&gt;&gt;Agent: Grant/deny access\n\n    Agent-&gt;&gt;Profile: Read allowed data\n    Profile--&gt;&gt;Agent: Return filtered profile\n\n    Agent-&gt;&gt;Profile: Propose memory\n    Profile-&gt;&gt;User: Review proposal\n    User-&gt;&gt;Profile: Approve/reject</code></pre>"},{"location":"documentation/what-is-a2p/#who-is-it-for","title":"Who Is It For?","text":""},{"location":"documentation/what-is-a2p/#for-users","title":"For Users","text":"<ul> <li>Control your AI interaction data</li> <li>Portable preferences across agents</li> <li>Easy GDPR rights exercise</li> </ul>"},{"location":"documentation/what-is-a2p/#for-ai-developers","title":"For AI Developers","text":"<ul> <li>Get user context without cold start</li> <li>Built-in compliance</li> <li>Framework adapters ready</li> </ul>"},{"location":"documentation/what-is-a2p/#for-enterprises","title":"For Enterprises","text":"<ul> <li>Standardized AI data governance</li> <li>Reduced compliance overhead</li> <li>Vendor portability</li> </ul>"},{"location":"documentation/what-is-a2p/#open-eu-made","title":"Open &amp; EU-Made","text":"<ul> <li>License: EUPL-1.2 (EU open source license)</li> <li>Location: Developed in Madrid, Spain</li> <li>Values: Privacy, sovereignty, interoperability</li> </ul>"},{"location":"documentation/what-is-a2p/#next-steps","title":"Next Steps","text":"<ul> <li>Core Concepts \u2014 Deeper dive into the protocol</li> <li>Quickstart \u2014 Build your first integration</li> <li>Specification \u2014 Full technical details</li> </ul>"},{"location":"governance/","title":"a2p Protocol Governance","text":"<p>Version: 1.0.0-draft Status: Draft Last Updated: December 2024</p>"},{"location":"governance/#table-of-contents","title":"Table of Contents","text":"<ol> <li>Overview</li> <li>Governance Structure</li> <li>Decision Making</li> <li>RFC Process</li> <li>Security Disclosure</li> <li>Namespace Registry</li> <li>Contribution Guidelines</li> <li>Code of Conduct</li> </ol>"},{"location":"governance/#1-overview","title":"1. Overview","text":""},{"location":"governance/#11-mission","title":"1.1 Mission","text":"<p>The a2p (Agent 2 Profile) protocol aims to establish a user-sovereign identity and memory layer for AI agents and services, giving individuals control over their digital identity across AI interactions.</p>"},{"location":"governance/#12-goals","title":"1.2 Goals","text":"<ul> <li>Open Standard: Develop an open, interoperable protocol specification</li> <li>Privacy First: Ensure user privacy and data sovereignty</li> <li>Community Driven: Enable broad participation in protocol development</li> <li>Practical: Build production-ready implementations</li> </ul>"},{"location":"governance/#13-scope","title":"1.3 Scope","text":"<p>This governance document covers: - Protocol specification development - Reference implementations - SDK and adapter maintenance - Namespace registration - Security vulnerability handling</p>"},{"location":"governance/#2-governance-structure","title":"2. Governance Structure","text":""},{"location":"governance/#21-working-groups","title":"2.1 Working Groups","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                   Steering Committee                     \u2502\n\u2502            (Strategic direction, final arbiter)          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                         \u2502\n         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n         \u2502               \u2502               \u2502\n         \u25bc               \u25bc               \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502    Core     \u2502  \u2502   Security  \u2502  \u2502   Legal &amp;   \u2502\n\u2502   Protocol  \u2502  \u2502   Working   \u2502  \u2502  Compliance \u2502\n\u2502    WG       \u2502  \u2502    Group    \u2502  \u2502     WG      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502               \u2502               \u2502\n         \u25bc               \u25bc               \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502Implementation\u2502 \u2502   Registry  \u2502  \u2502  Community  \u2502\n\u2502    WG       \u2502  \u2502     WG      \u2502  \u2502     WG      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"governance/#22-steering-committee","title":"2.2 Steering Committee","text":"<p>Responsibilities: - Strategic direction and vision - Final decision authority on disputed matters - Working group creation and dissolution - External partnerships and representation</p> <p>Composition: - 5-7 members elected by active contributors - 2-year terms, staggered elections - Diverse representation encouraged</p>"},{"location":"governance/#23-working-groups","title":"2.3 Working Groups","text":"Working Group Focus Meetings Core Protocol Specification development, schemas Weekly Security Security audits, vulnerability response Bi-weekly Legal &amp; Compliance GDPR, AI Act, regulatory alignment Monthly Implementation SDKs, adapters, reference implementations Weekly Registry Namespace, DID method, schema registry Monthly Community Outreach, documentation, onboarding Bi-weekly"},{"location":"governance/#24-roles","title":"2.4 Roles","text":"Role Description Requirements Contributor Anyone who contributes Sign CLA Reviewer Can review PRs 10+ merged PRs Maintainer Can merge PRs Nominated by WG WG Chair Leads working group Elected by WG members Steering Member Steering committee Elected by contributors"},{"location":"governance/#3-decision-making","title":"3. Decision Making","text":""},{"location":"governance/#31-decision-types","title":"3.1 Decision Types","text":"Type Examples Decision Process Editorial Typos, formatting Maintainer approval Minor Bug fixes, clarifications 2 maintainer approvals Significant New features, API changes RFC + WG consensus Breaking Breaking changes RFC + SC approval Governance Process changes SC vote (supermajority)"},{"location":"governance/#32-consensus-model","title":"3.2 Consensus Model","text":"<ol> <li>Lazy Consensus: Editorial and minor changes proceed after 72 hours without objection</li> <li>Working Group Consensus: Significant changes require WG discussion and agreement</li> <li>Steering Committee Vote: Breaking changes and disputes escalate to SC</li> </ol>"},{"location":"governance/#33-voting","title":"3.3 Voting","text":"<p>When consensus cannot be reached:</p> Vote Type Threshold Quorum WG decisions Simple majority 50% of active members SC decisions \u2154 majority 4 of 7 members Governance changes \u00be majority 5 of 7 members"},{"location":"governance/#34-conflict-resolution","title":"3.4 Conflict Resolution","text":"<ol> <li>Discussion: Attempt resolution in WG meetings</li> <li>Mediation: WG Chair facilitates compromise</li> <li>Escalation: Bring to Steering Committee</li> <li>Final Decision: SC makes binding decision</li> </ol>"},{"location":"governance/#4-rfc-process","title":"4. RFC Process","text":""},{"location":"governance/#41-rfc-stages","title":"4.1 RFC Stages","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Draft  \u2502\u2500\u2500\u2500\u25b6\u2502 Proposed \u2502\u2500\u2500\u2500\u25b6\u2502 Accepted \u2502\u2500\u2500\u2500\u25b6\u2502 Published \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                    \u2502                               \u2502\n                    \u25bc                               \u25bc\n               \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n               \u2502 Rejected \u2502                   \u2502 Deprecated\u2502\n               \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"governance/#42-rfc-template","title":"4.2 RFC Template","text":"<pre><code># RFC-XXXX: [Title]\n\n## Summary\n[One paragraph summary]\n\n## Motivation\n[Why is this needed?]\n\n## Detailed Design\n[Technical details]\n\n## Alternatives Considered\n[Other approaches and why rejected]\n\n## Compatibility\n[Breaking changes, migration path]\n\n## Security Considerations\n[Security implications]\n\n## Implementation\n[Implementation plan]\n\n## References\n[Related documents, prior art]\n</code></pre>"},{"location":"governance/#43-rfc-lifecycle","title":"4.3 RFC Lifecycle","text":"Stage Duration Requirements Draft Unlimited Author develops proposal Proposed 2-4 weeks WG review period Final Comment 2 weeks Community feedback Accepted/Rejected - WG decision Published - Merged into spec"},{"location":"governance/#44-rfc-repository","title":"4.4 RFC Repository","text":"<p>RFCs are tracked at: <code>https://github.com/a2p-protocol/rfcs</code></p>"},{"location":"governance/#5-security-disclosure","title":"5. Security Disclosure","text":""},{"location":"governance/#51-reporting-vulnerabilities","title":"5.1 Reporting Vulnerabilities","text":"<p>DO NOT report security vulnerabilities publicly.</p> <p>Email: security@a2p.protocol PGP Key: [Available at https://a2p.protocol/.well-known/security.txt]</p>"},{"location":"governance/#52-response-timeline","title":"5.2 Response Timeline","text":"Severity Initial Response Fix Timeline Critical 4 hours 24-48 hours High 24 hours 7 days Medium 72 hours 30 days Low 7 days 90 days"},{"location":"governance/#53-disclosure-process","title":"5.3 Disclosure Process","text":"<pre><code>Day 0: Vulnerability reported\nDay 1: Acknowledgment sent\nDay 2-7: Assessment and triage\nDay 7-X: Fix development (per severity)\nDay X: Fix released\nDay X+7: Public disclosure (coordinated)\n</code></pre>"},{"location":"governance/#54-acknowledgment","title":"5.4 Acknowledgment","text":"<p>Reporters who follow responsible disclosure will be: - Acknowledged in security advisories - Listed in Hall of Fame (if desired) - Eligible for bug bounty (when program available)</p>"},{"location":"governance/#55-security-advisories","title":"5.5 Security Advisories","text":"<p>Published at: <code>https://github.com/a2p-protocol/security-advisories</code></p>"},{"location":"governance/#6-namespace-registry","title":"6. Namespace Registry","text":""},{"location":"governance/#61-standard-namespaces","title":"6.1 Standard Namespaces","text":"<p>Reserved namespaces managed by a2p:</p> Namespace Purpose Status <code>a2p:</code> Core protocol categories Stable <code>ext:</code> Third-party extensions Open <code>test:</code> Testing purposes Reserved <code>deprecated:</code> Deprecated categories Reserved"},{"location":"governance/#62-extension-registration","title":"6.2 Extension Registration","text":"<p>Third parties may register <code>ext:</code> namespaces:</p> <pre><code>{\n  \"namespace\": \"ext:mycompany\",\n  \"owner\": {\n    \"name\": \"My Company Inc.\",\n    \"did\": \"did:a2p:org:local:mycompany\",\n    \"contact\": \"a2p@mycompany.com\"\n  },\n  \"description\": \"Custom categories for MyCompany services\",\n  \"schema\": \"https://mycompany.com/a2p/schema.json\",\n  \"version\": \"1.0.0\",\n  \"registeredAt\": \"2024-12-24T00:00:00Z\"\n}\n</code></pre>"},{"location":"governance/#63-registration-process","title":"6.3 Registration Process","text":"<ol> <li>Submit: Create PR to namespace registry</li> <li>Review: Registry WG reviews application</li> <li>Approve: Namespace assigned (7-day window)</li> <li>Publish: Namespace added to registry</li> </ol>"},{"location":"governance/#64-namespace-requirements","title":"6.4 Namespace Requirements","text":"<ul> <li>Unique identifier (3-32 characters, lowercase, alphanumeric + hyphen)</li> <li>Valid contact information</li> <li>Published schema</li> <li>Maintenance commitment</li> </ul>"},{"location":"governance/#65-namespace-disputes","title":"6.5 Namespace Disputes","text":"<ul> <li>First-come, first-served for new registrations</li> <li>Trademark holders may claim related namespaces</li> <li>Registry WG arbitrates disputes</li> </ul>"},{"location":"governance/#7-contribution-guidelines","title":"7. Contribution Guidelines","text":""},{"location":"governance/#71-how-to-contribute","title":"7.1 How to Contribute","text":"<ol> <li>Discuss: Open issue or RFC for significant changes</li> <li>Fork: Create personal fork of repository</li> <li>Branch: Create feature branch</li> <li>Develop: Make changes following style guide</li> <li>Test: Ensure tests pass</li> <li>PR: Submit pull request</li> <li>Review: Address reviewer feedback</li> <li>Merge: Maintainer merges</li> </ol>"},{"location":"governance/#72-contributor-license-agreement","title":"7.2 Contributor License Agreement","text":"<p>All contributors must sign the CLA before their first PR is merged.</p> <p>CLA Summary: - You retain copyright of your contributions - You grant a2p perpetual, worldwide license to use contributions - You confirm you have rights to contribute the code - Contributions are provided \"as is\"</p>"},{"location":"governance/#73-development-setup","title":"7.3 Development Setup","text":"<pre><code># Clone repository\ngit clone https://github.com/a2p-protocol/a2p.git\ncd a2p\n\n# Install dependencies\npnpm install\n\n# Run tests\npnpm test\n\n# Build all packages\npnpm build\n</code></pre>"},{"location":"governance/#74-commit-messages","title":"7.4 Commit Messages","text":"<p>Follow Conventional Commits:</p> <pre><code>type(scope): description\n\n[optional body]\n\n[optional footer]\n</code></pre> <p>Types: <code>feat</code>, <code>fix</code>, <code>docs</code>, <code>style</code>, <code>refactor</code>, <code>test</code>, <code>chore</code></p>"},{"location":"governance/#75-pull-request-guidelines","title":"7.5 Pull Request Guidelines","text":"<ul> <li>Clear title and description</li> <li>Reference related issues</li> <li>Include tests for new functionality</li> <li>Update documentation as needed</li> <li>Ensure CI passes</li> </ul>"},{"location":"governance/#8-code-of-conduct","title":"8. Code of Conduct","text":""},{"location":"governance/#81-our-pledge","title":"8.1 Our Pledge","text":"<p>We pledge to make participation in the a2p community a harassment-free experience for everyone.</p>"},{"location":"governance/#82-standards","title":"8.2 Standards","text":"<p>Positive behaviors: - Using welcoming and inclusive language - Being respectful of differing viewpoints - Gracefully accepting constructive criticism - Focusing on what is best for the community - Showing empathy towards other community members</p> <p>Unacceptable behaviors: - Trolling, insulting/derogatory comments - Public or private harassment - Publishing others' private information - Other conduct which could reasonably be considered inappropriate</p>"},{"location":"governance/#83-enforcement","title":"8.3 Enforcement","text":"<ol> <li>Warning: Private, written warning</li> <li>Temporary Ban: Temporary exclusion from community spaces</li> <li>Permanent Ban: Permanent exclusion from community spaces</li> </ol>"},{"location":"governance/#84-reporting","title":"8.4 Reporting","text":"<p>Report violations to: conduct@a2p.protocol</p> <p>Reports will be reviewed by the Community WG.</p>"},{"location":"governance/#appendix-a-meeting-schedule","title":"Appendix A: Meeting Schedule","text":"Meeting Day Time (UTC) Cadence Core Protocol WG Tuesday 16:00 Weekly Security WG Thursday 15:00 Bi-weekly Implementation WG Wednesday 17:00 Weekly Steering Committee First Friday 16:00 Monthly"},{"location":"governance/#appendix-b-communication-channels","title":"Appendix B: Communication Channels","text":"Channel Purpose Access GitHub Issues Bug reports, feature requests Public GitHub Discussions General discussion Public Discord Real-time chat Public Mailing List Announcements Public Security Email Vulnerability reports Private <p>Contact: governance@a2p.protocol License: This document is CC BY 4.0</p>"},{"location":"legal/ai-act/","title":"EU AI Act Compliance","text":"<p>How a2p supports EU AI Act requirements.</p>"},{"location":"legal/ai-act/#overview","title":"Overview","text":"<p>The EU AI Act establishes rules for AI systems. a2p helps agents comply through:</p> <ul> <li>Risk classification in agent profiles</li> <li>Transparency obligations built-in</li> <li>Human oversight mechanisms</li> <li>Technical documentation support</li> </ul>"},{"location":"legal/ai-act/#risk-classification","title":"Risk Classification","text":"<p>Agent profiles include AI Act risk level:</p> <pre><code>{\n  \"aiActCompliance\": {\n    \"riskLevel\": \"limited\",\n    \"transparencyObligations\": [\n      \"user_notification\",\n      \"ai_generated_content_marking\"\n    ]\n  }\n}\n</code></pre>"},{"location":"legal/ai-act/#risk-levels","title":"Risk Levels","text":"Level Examples Requirements Minimal Spam filters None Limited Chatbots Transparency High CV screening Full compliance Unacceptable Social scoring Prohibited"},{"location":"legal/ai-act/#transparency-article-52","title":"Transparency (Article 52)","text":""},{"location":"legal/ai-act/#user-notification","title":"User Notification","text":"<p>Agents must disclose AI nature:</p> <pre><code>{\n  \"transparency\": {\n    \"isAI\": true,\n    \"disclosure\": \"I am an AI assistant powered by...\"\n  }\n}\n</code></pre>"},{"location":"legal/ai-act/#content-marking","title":"Content Marking","text":"<p>AI-generated content must be marked:</p> <pre><code>{\n  \"transparencyObligations\": [\n    \"ai_generated_content_marking\"\n  ],\n  \"contentMarking\": {\n    \"method\": \"watermark\",\n    \"visible\": true\n  }\n}\n</code></pre>"},{"location":"legal/ai-act/#human-oversight","title":"Human Oversight","text":"<p>For high-risk systems:</p> <pre><code>{\n  \"humanOversight\": {\n    \"required\": true,\n    \"mechanism\": \"human_on_the_loop\",\n    \"escalationThreshold\": 0.7,\n    \"reviewProcess\": \"Manual review of flagged decisions\"\n  }\n}\n</code></pre>"},{"location":"legal/ai-act/#oversight-mechanisms","title":"Oversight Mechanisms","text":"Type Description <code>human_in_the_loop</code> Human approves each decision <code>human_on_the_loop</code> Human monitors, can intervene <code>human_in_command</code> Human can override anytime"},{"location":"legal/ai-act/#conformity-assessment","title":"Conformity Assessment","text":"<p>For high-risk systems:</p> <pre><code>{\n  \"conformityAssessment\": {\n    \"completed\": true,\n    \"assessor\": \"Notified Body XYZ\",\n    \"date\": \"2025-06-15\",\n    \"certificateId\": \"CE-2025-12345\",\n    \"validUntil\": \"2030-06-15\"\n  }\n}\n</code></pre>"},{"location":"legal/ai-act/#technical-documentation","title":"Technical Documentation","text":"<p>a2p profiles can link to required documentation:</p> <pre><code>{\n  \"documentation\": {\n    \"technicalDocumentation\": \"https://example.com/docs/tech\",\n    \"riskAssessment\": \"https://example.com/docs/risk\",\n    \"testingResults\": \"https://example.com/docs/tests\"\n  }\n}\n</code></pre>"},{"location":"legal/ai-act/#implementation-checklist","title":"Implementation Checklist","text":"<ul> <li> Risk level declared in agent profile</li> <li> Transparency obligations listed</li> <li> AI disclosure implemented</li> <li> Content marking (if applicable)</li> <li> Human oversight (if high-risk)</li> <li> Conformity assessment (if high-risk)</li> <li> Documentation links provided</li> </ul>"},{"location":"legal/ai-act/#next-steps","title":"Next Steps","text":"<ul> <li>GDPR Compliance \u2014 Data protection</li> <li>DPIA Guidance \u2014 Impact assessments</li> </ul>"},{"location":"legal/dpia-guidance/","title":"a2p Data Protection Impact Assessment (DPIA) Guidance","text":"<p>Version: 1.0.0-draft Status: Draft Last Updated: December 2024</p>"},{"location":"legal/dpia-guidance/#table-of-contents","title":"Table of Contents","text":"<ol> <li>Overview</li> <li>When DPIA is Required</li> <li>DPIA Template</li> <li>Risk Assessment</li> <li>Mitigation Measures</li> <li>Documentation</li> <li>Review and Updates</li> </ol>"},{"location":"legal/dpia-guidance/#1-overview","title":"1. Overview","text":"<p>This document provides guidance for conducting Data Protection Impact Assessments (DPIAs) for a2p protocol implementations, as required by GDPR Article 35.</p>"},{"location":"legal/dpia-guidance/#11-purpose","title":"1.1 Purpose","text":"<p>A DPIA helps organizations: - Identify and minimize data protection risks - Demonstrate compliance with GDPR - Build user trust through transparency - Avoid costly remediation after deployment</p>"},{"location":"legal/dpia-guidance/#12-legal-basis","title":"1.2 Legal Basis","text":"<p>GDPR Article 35 requires a DPIA when processing is \"likely to result in a high risk to the rights and freedoms of natural persons.\"</p>"},{"location":"legal/dpia-guidance/#2-when-dpia-is-required","title":"2. When DPIA is Required","text":""},{"location":"legal/dpia-guidance/#21-mandatory-dpia-scenarios","title":"2.1 Mandatory DPIA Scenarios","text":"Scenario Applies to a2p? Rationale Systematic profiling with legal effects \u26a0\ufe0f Possible If agent decisions affect user access to services Large-scale special categories \u26a0\ufe0f Possible If health/biometric data in profiles Systematic public monitoring \u274c No a2p doesn't monitor public spaces New technologies \u2705 Yes AI agents are considered new technology Prevents rights exercise \u26a0\ufe0f Possible If profile required for service access Automated decision-making \u26a0\ufe0f Possible If agents make automated decisions Vulnerable subjects \u26a0\ufe0f Possible Children's profiles, health contexts Innovative use of data \u2705 Yes Cross-agent profile sharing is innovative"},{"location":"legal/dpia-guidance/#22-a2p-specific-triggers","title":"2.2 a2p-Specific Triggers","text":"<p>DPIA Required when implementing: - Profile storage containing special category data (health, biometrics) - Entity profiles with employee data - Children's profiles (age verification needed) - Cross-border data transfers - Automated memory consolidation affecting user rights - Agent certification systems with profiling</p> <p>DPIA Recommended for: - Any new a2p deployment - Adding new memory categories - Integrating new agents - Changing storage backends</p>"},{"location":"legal/dpia-guidance/#23-decision-flowchart","title":"2.3 Decision Flowchart","text":"<pre><code>Start\n  \u2502\n  \u251c\u2500 Does processing involve new technology (AI agents)? \u2500\u2500Yes\u2500\u2500\u2510\n  \u2502                                                              \u2502\n  \u251c\u2500 Does processing involve profiling? \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500Yes\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n  \u2502                                                              \u2502\n  \u251c\u2500 Does processing involve special category data? \u2500\u2500\u2500Yes\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n  \u2502                                                              \u2502\n  \u251c\u2500 Is processing large scale? \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500Yes\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n  \u2502                                                              \u2502\n  \u251c\u2500 Does processing involve vulnerable individuals? \u2500\u2500Yes\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n  \u2502                                                              \u2502\n  No to all                                            \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n  \u2502                                                    \u2502\n  \u25bc                                                    \u25bc\nDPIA not mandatory                              DPIA REQUIRED\n(but recommended)\n</code></pre>"},{"location":"legal/dpia-guidance/#3-dpia-template","title":"3. DPIA Template","text":""},{"location":"legal/dpia-guidance/#31-project-description","title":"3.1 Project Description","text":"<pre><code>## 1. Project Information\n\n**Project Name:** [e.g., \"ACME Corp a2p Implementation\"]\n**Project Lead:** [Name, Contact]\n**DPO Contact:** [Name, Email]\n**Assessment Date:** [Date]\n**Review Date:** [Next review date]\n\n## 2. Processing Description\n\n### 2.1 Nature of Processing\n[Describe what the a2p implementation will do]\n\nExample:\n- Store employee profiles with preferences, interests, and work context\n- Allow approved AI agents to access profiles for personalization\n- Enable agents to propose memories for user review\n- Synchronize profiles across multiple devices\n\n### 2.2 Scope of Processing\n- **Data subjects:** [e.g., 500 employees]\n- **Data categories:** [List a2p categories used]\n- **Geographic scope:** [Countries/regions]\n- **Duration:** [How long data retained]\n\n### 2.3 Context of Processing\n- **Relationship with data subjects:** [e.g., employer-employee]\n- **Control of data subjects:** [High - users control profiles]\n- **Expectations of data subjects:** [Users expect personalization]\n\n### 2.4 Purpose of Processing\n[List specific, explicit, legitimate purposes]\n\nExample:\n1. Personalize AI assistant responses\n2. Maintain consistent user context across agents\n3. Enable user control over AI interaction data\n</code></pre>"},{"location":"legal/dpia-guidance/#32-necessity-and-proportionality","title":"3.2 Necessity and Proportionality","text":"<pre><code>## 3. Necessity Assessment\n\n### 3.1 Legal Basis\n- [ ] Consent (GDPR Art. 6(1)(a))\n- [ ] Contract (GDPR Art. 6(1)(b))\n- [ ] Legal obligation (GDPR Art. 6(1)(c))\n- [ ] Vital interests (GDPR Art. 6(1)(d))\n- [ ] Public task (GDPR Art. 6(1)(e))\n- [ ] Legitimate interests (GDPR Art. 6(1)(f))\n\n**Justification:** [Explain why this basis applies]\n\n### 3.2 Necessity\nIs this processing necessary for the purpose?\n[Explain why less intrusive alternatives won't work]\n\n### 3.3 Proportionality\nIs the processing proportionate to the aim?\n[Explain the balance between benefit and intrusion]\n\n### 3.4 Data Minimization\nHow is data minimization achieved?\n- Scoped access (only necessary categories)\n- Purpose limitation (purpose field required)\n- Retention limits (decay mechanism)\n- User control (proposal workflow)\n</code></pre>"},{"location":"legal/dpia-guidance/#33-risk-identification","title":"3.3 Risk Identification","text":"<pre><code>## 4. Risk Identification\n\n### 4.1 Risk to Individuals\n\n| Risk | Likelihood | Severity | Overall |\n|------|------------|----------|---------|\n| Unauthorized access to profile | [L/M/H] | [L/M/H] | [L/M/H] |\n| Profile data breach | [L/M/H] | [L/M/H] | [L/M/H] |\n| Inaccurate profiling by agents | [L/M/H] | [L/M/H] | [L/M/H] |\n| Loss of control over personal data | [L/M/H] | [L/M/H] | [L/M/H] |\n| Discrimination based on profile | [L/M/H] | [L/M/H] | [L/M/H] |\n| Re-identification from profile data | [L/M/H] | [L/M/H] | [L/M/H] |\n| Covert profiling without awareness | [L/M/H] | [L/M/H] | [L/M/H] |\n| Excessive data retention | [L/M/H] | [L/M/H] | [L/M/H] |\n\n### 4.2 Sources of Risk\n\n- **Threat actors:** Malicious agents, external attackers, insider threats\n- **Vulnerabilities:** Implementation flaws, configuration errors\n- **Impacts:** Privacy harm, discrimination, financial loss\n</code></pre>"},{"location":"legal/dpia-guidance/#4-risk-assessment","title":"4. Risk Assessment","text":""},{"location":"legal/dpia-guidance/#41-likelihood-criteria","title":"4.1 Likelihood Criteria","text":"Level Criteria Probability Low Unlikely to occur; strong controls in place &lt;25% Medium May occur; some controls in place 25-75% High Likely to occur; limited controls &gt;75%"},{"location":"legal/dpia-guidance/#42-severity-criteria","title":"4.2 Severity Criteria","text":"Level Criteria Impact Examples Low Minor inconvenience Time spent, minor frustration Medium Significant impact Reputation damage, financial loss &lt;\u20ac1000 High Severe impact Discrimination, significant financial loss, health impact"},{"location":"legal/dpia-guidance/#43-risk-matrix","title":"4.3 Risk Matrix","text":"<pre><code>              Severity\n              Low    Medium    High\n         \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n    High \u2502 Medium \u2502 High   \u2502 High   \u2502\n         \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\nLikelihood Medium \u2502 Low    \u2502 Medium \u2502 High   \u2502\n         \u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n    Low  \u2502 Low    \u2502 Low    \u2502 Medium \u2502\n         \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"legal/dpia-guidance/#44-a2p-specific-risk-analysis","title":"4.4 a2p-Specific Risk Analysis","text":"Risk a2p Mitigation Residual Risk Unauthorized access DID authentication, consent policies Low Data breach Encryption at rest and in transit Medium Inaccurate profiling Proposal workflow, user review Low Loss of control User owns profile, can delete Low Discrimination Transparency, audit trails Medium Re-identification Scoped access, sensitivity levels Low Covert profiling Consent receipts, transparency Low Excessive retention Decay mechanism, retention policies Low"},{"location":"legal/dpia-guidance/#5-mitigation-measures","title":"5. Mitigation Measures","text":""},{"location":"legal/dpia-guidance/#51-technical-measures","title":"5.1 Technical Measures","text":"Risk Measure Implementation Unauthorized access DID-based authentication Required by a2p spec Data breach AES-256 encryption Enable in storage config Data breach TLS 1.3 in transit Configure endpoints Inaccurate profiling Proposal workflow Use SDK proposal API Loss of control User-owned DIDs Issue DIDs to users Re-identification Scoped access Configure consent policies Excessive retention Memory decay Enable decay in profile settings"},{"location":"legal/dpia-guidance/#52-organizational-measures","title":"5.2 Organizational Measures","text":"Risk Measure Implementation General Staff training Annual a2p/privacy training Data breach Incident response Follow breach-notification.md Compliance Regular audits Quarterly security audits Accountability DPO appointment Designate DPO if required Transparency Privacy notices Update notices for a2p"},{"location":"legal/dpia-guidance/#53-contractual-measures","title":"5.3 Contractual Measures","text":"Risk Measure Implementation Agent misuse Agent agreements Require a2p compliance Third-party risk Processor contracts GDPR Art. 28 contracts Cross-border Transfer safeguards SCCs or adequacy"},{"location":"legal/dpia-guidance/#54-a2p-specific-mitigations","title":"5.4 a2p-Specific Mitigations","text":"<pre><code>{\n  \"dpiaRecommendedSettings\": {\n    \"profile\": {\n      \"memorySettings\": {\n        \"decayEnabled\": true,\n        \"decayRate\": 0.1,\n        \"decayInterval\": \"30d\"\n      },\n      \"privacySettings\": {\n        \"defaultSensitivity\": \"standard\",\n        \"allowAnonymousAccess\": false\n      }\n    },\n    \"accessPolicies\": [\n      {\n        \"name\": \"Default Deny\",\n        \"agentPattern\": \"*\",\n        \"permissions\": [\"none\"],\n        \"conditions\": {\n          \"requireVerifiedOperator\": true,\n          \"requireAudit\": true\n        }\n      }\n    ],\n    \"consentRequirements\": {\n      \"purposeRequired\": true,\n      \"retentionLimitRequired\": true,\n      \"receiptGeneration\": true\n    }\n  }\n}\n</code></pre>"},{"location":"legal/dpia-guidance/#6-documentation","title":"6. Documentation","text":""},{"location":"legal/dpia-guidance/#61-required-documentation","title":"6.1 Required Documentation","text":"Document Content Update Frequency DPIA Report This assessment Annual or on change Data Flow Diagram Profile data flows On change Risk Register Identified risks Quarterly Privacy Notice User information On change Consent Records Consent receipts Continuous Audit Logs Access logs Continuous"},{"location":"legal/dpia-guidance/#62-dpia-report-structure","title":"6.2 DPIA Report Structure","text":"<pre><code>1. Executive Summary\n2. Project Description\n3. Data Processing Details\n4. Necessity and Proportionality\n5. Risk Assessment\n6. Mitigation Measures\n7. Consultation Results (if any)\n8. DPO Opinion\n9. Approval and Sign-off\n10. Appendices\n</code></pre>"},{"location":"legal/dpia-guidance/#63-consultation-requirements","title":"6.3 Consultation Requirements","text":"<p>Consult supervisory authority when: - High risks cannot be mitigated - Novel processing with uncertain risks - Required by national law</p> <p>Consult data subjects when: - Practical to do so - Useful for understanding concerns - Building trust is important</p>"},{"location":"legal/dpia-guidance/#7-review-and-updates","title":"7. Review and Updates","text":""},{"location":"legal/dpia-guidance/#71-review-triggers","title":"7.1 Review Triggers","text":"Trigger Action Annual review date Full DPIA review New a2p version Assess changes New memory categories Assess impact New agent integration Assess agent risks Incident occurs Review and update Complaint received Investigate and update Regulatory change Assess compliance"},{"location":"legal/dpia-guidance/#72-update-process","title":"7.2 Update Process","text":"<ol> <li>Initiate: Identify trigger, assign reviewer</li> <li>Assess: Review current DPIA against changes</li> <li>Update: Modify risk assessment and mitigations</li> <li>Approve: DPO review and approval</li> <li>Implement: Apply new mitigations</li> <li>Document: Update DPIA record</li> </ol>"},{"location":"legal/dpia-guidance/#73-record-keeping","title":"7.3 Record Keeping","text":"<pre><code>{\n  \"dpiaRecords\": {\n    \"currentVersion\": \"1.2\",\n    \"createdAt\": \"2024-01-01\",\n    \"lastReviewedAt\": \"2024-06-01\",\n    \"nextReviewAt\": \"2025-01-01\",\n    \"versions\": [\n      {\n        \"version\": \"1.0\",\n        \"date\": \"2024-01-01\",\n        \"author\": \"DPO\",\n        \"changes\": \"Initial assessment\"\n      },\n      {\n        \"version\": \"1.1\",\n        \"date\": \"2024-03-15\",\n        \"author\": \"Security Team\",\n        \"changes\": \"Added health data category\"\n      },\n      {\n        \"version\": \"1.2\",\n        \"date\": \"2024-06-01\",\n        \"author\": \"DPO\",\n        \"changes\": \"Annual review\"\n      }\n    ],\n    \"approvals\": [\n      {\n        \"role\": \"DPO\",\n        \"name\": \"Jane Smith\",\n        \"date\": \"2024-06-01\",\n        \"signature\": \"hash:...\"\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"legal/dpia-guidance/#appendix-a-dpia-checklist","title":"Appendix A: DPIA Checklist","text":""},{"location":"legal/dpia-guidance/#pre-assessment","title":"Pre-Assessment","text":"<ul> <li> Identified project scope</li> <li> Assigned DPIA lead</li> <li> Gathered stakeholder input</li> <li> Reviewed previous DPIAs (if any)</li> </ul>"},{"location":"legal/dpia-guidance/#assessment","title":"Assessment","text":"<ul> <li> Described processing operations</li> <li> Identified legal basis</li> <li> Assessed necessity and proportionality</li> <li> Identified all risks</li> <li> Assessed likelihood and severity</li> <li> Identified mitigation measures</li> </ul>"},{"location":"legal/dpia-guidance/#documentation","title":"Documentation","text":"<ul> <li> Completed DPIA report</li> <li> Created data flow diagram</li> <li> Updated risk register</li> <li> Obtained DPO opinion</li> </ul>"},{"location":"legal/dpia-guidance/#approval","title":"Approval","text":"<ul> <li> Presented to stakeholders</li> <li> Obtained management approval</li> <li> Filed DPIA record</li> <li> Scheduled next review</li> </ul>"},{"location":"legal/dpia-guidance/#implementation","title":"Implementation","text":"<ul> <li> Implemented technical measures</li> <li> Implemented organizational measures</li> <li> Updated privacy notices</li> <li> Trained staff</li> </ul>"},{"location":"legal/dpia-guidance/#appendix-b-sample-privacy-notice-addition","title":"Appendix B: Sample Privacy Notice Addition","text":"<pre><code>## AI Profile Data (a2p)\n\nWe use the a2p (Agent 2 Profile) protocol to manage how AI assistants \ninteract with your data.\n\n**What we collect:**\n- Your preferences (language, communication style)\n- Your interests (topics, hobbies)\n- Context from your interactions with AI assistants\n\n**How it's used:**\n- To personalize AI assistant responses\n- To remember your preferences across different AI tools\n- To give you control over what AI systems know about you\n\n**Your control:**\n- You own your profile and can view it anytime\n- You approve any new information before it's added\n- You can delete your profile at any time\n- You control which AI assistants can access your data\n\n**Your rights:**\n- Access, correct, or delete your profile data\n- Restrict or object to processing\n- Receive your data in portable format\n- Withdraw consent at any time\n\nContact our DPO at [dpo@example.com] with questions.\n</code></pre>"},{"location":"legal/dpia-guidance/#appendix-c-supervisory-authority-consultation-template","title":"Appendix C: Supervisory Authority Consultation Template","text":"<pre><code># Prior Consultation Request - GDPR Article 36\n\n## 1. Controller Information\n[Organization name, address, DPO contact]\n\n## 2. Processing Description\n[Summary of a2p implementation]\n\n## 3. DPIA Summary\n[Key findings from DPIA]\n\n## 4. High Risks Identified\n[List risks that cannot be fully mitigated]\n\n## 5. Measures Taken\n[List all mitigations implemented]\n\n## 6. Residual Risks\n[Explain remaining risks and why acceptable]\n\n## 7. Consultation Request\n[Specific questions for the authority]\n\n## 8. Supporting Documents\n- Full DPIA report\n- Data flow diagrams\n- Technical specifications\n- Draft privacy notice\n</code></pre> <p>Next: See Breach Notification for incident response procedures.</p>"},{"location":"legal/dpia/","title":"DPIA Guidance","text":"<p>Data Protection Impact Assessment guidance for a2p implementations.</p>"},{"location":"legal/dpia/#when-is-a-dpia-required","title":"When Is a DPIA Required?","text":"<p>A DPIA is required when processing:</p> <ul> <li>Large-scale personal data</li> <li>Special categories (health, beliefs)</li> <li>Automated decision-making</li> <li>Systematic monitoring</li> </ul> <p>Most a2p implementations involving memory storage should conduct a DPIA.</p>"},{"location":"legal/dpia/#dpia-template-for-a2p","title":"DPIA Template for a2p","text":""},{"location":"legal/dpia/#1-processing-description","title":"1. Processing Description","text":"Item Description Purpose User profile management for AI personalization Data processed Preferences, memories, interaction context Data subjects End users Recipients AI agents (with consent) Retention User-controlled"},{"location":"legal/dpia/#2-necessity-assessment","title":"2. Necessity Assessment","text":"Question a2p Answer Is processing necessary? Yes - enables personalization Could less data achieve goal? Users control scope Is legal basis clear? Yes - consent/contract"},{"location":"legal/dpia/#3-risk-assessment","title":"3. Risk Assessment","text":"Risk Likelihood Impact Mitigation Unauthorized access Low High DID auth, signatures Data breach Low High Encryption, access logs Profile inference Medium Medium Scope restrictions Purpose creep Low Medium Purpose validation"},{"location":"legal/dpia/#4-mitigation-measures","title":"4. Mitigation Measures","text":"Measure Implementation Access control Policy-based, scope filtering Encryption TLS 1.3, AES-256 at rest Minimization User-controlled scopes Transparency Consent receipts, audit logs User control Edit, delete, export capabilities"},{"location":"legal/dpia/#risk-scoring","title":"Risk Scoring","text":""},{"location":"legal/dpia/#inherent-risk","title":"Inherent Risk","text":"<pre><code>Inherent Risk = Likelihood \u00d7 Impact\n</code></pre> Score Level Action 1-4 Low Monitor 5-9 Medium Mitigate 10-16 High Significant measures 17-25 Very High Reconsider processing"},{"location":"legal/dpia/#residual-risk-after-mitigation","title":"Residual Risk (After Mitigation)","text":"Risk Inherent After Mitigation Unauthorized access 12 (High) 4 (Low) Data breach 12 (High) 4 (Low) Profile inference 9 (Medium) 3 (Low)"},{"location":"legal/dpia/#consultation","title":"Consultation","text":""},{"location":"legal/dpia/#when-to-consult-dpa","title":"When to Consult DPA","text":"<ul> <li>Residual risk remains high</li> <li>Novel technology</li> <li>Large scale processing</li> <li>Special categories without consent</li> </ul>"},{"location":"legal/dpia/#a2p-recommendation","title":"a2p Recommendation","text":"<p>Most implementations using standard a2p patterns will have low residual risk and not require DPA consultation.</p>"},{"location":"legal/dpia/#documentation-template","title":"Documentation Template","text":"<pre><code># DPIA: [Your Implementation]\n\n## 1. Overview\n- Processing activity: [Description]\n- Data controller: [Name]\n- DPO contact: [Email]\n\n## 2. Processing Details\n- Categories: [List]\n- Subjects: [Number]\n- Retention: [Period]\n\n## 3. Legal Basis\n- Primary: [Consent/Contract/...]\n- Documentation: [Link]\n\n## 4. Risk Assessment\n[Table from above]\n\n## 5. Mitigations\n- Technical: [List]\n- Organizational: [List]\n\n## 6. Conclusion\n- Residual risk: [Level]\n- DPA consultation: [Required/Not required]\n\n## 7. Review\n- Next review: [Date]\n- Trigger events: [List]\n</code></pre>"},{"location":"legal/dpia/#next-steps","title":"Next Steps","text":"<ul> <li>GDPR Compliance \u2014 Full GDPR guidance</li> <li>Security \u2014 Technical measures</li> </ul>"},{"location":"legal/gdpr/","title":"GDPR Compliance","text":"<p>How a2p enables GDPR compliance for AI agents.</p>"},{"location":"legal/gdpr/#overview","title":"Overview","text":"<p>a2p is designed with GDPR principles at its core:</p> GDPR Principle a2p Implementation Lawfulness Purpose and legal basis required Purpose limitation Purpose declared in every request Data minimization Scope-based access control Accuracy User-controlled profiles Storage limitation Retention policies Integrity Cryptographic signatures Accountability Audit logs, consent receipts"},{"location":"legal/gdpr/#purpose-limitation-article-5","title":"Purpose Limitation (Article 5)","text":"<p>Every access request must declare purpose:</p> <pre><code>{\n  \"purpose\": {\n    \"type\": \"personalization\",\n    \"description\": \"To tailor responses to preferences\",\n    \"legalBasis\": \"consent\",\n    \"retention\": \"session_only\"\n  }\n}\n</code></pre> <p>Users can restrict access by purpose:</p> <pre><code>{\n  \"purposeRequirements\": {\n    \"allowedPurposes\": [\"personalization\", \"support\"],\n    \"deniedPurposes\": [\"research\", \"marketing\"]\n  }\n}\n</code></pre>"},{"location":"legal/gdpr/#legal-basis-article-6","title":"Legal Basis (Article 6)","text":"<p>Agents must declare legal basis:</p> Basis When to Use <code>consent</code> User explicitly agreed <code>contract</code> Necessary for service <code>legal_obligation</code> Required by law <code>legitimate_interests</code> Business need (balanced) <pre><code>{\n  \"legalBasis\": \"consent\",\n  \"consentDetails\": {\n    \"method\": \"explicit_click\",\n    \"timestamp\": \"2025-12-25T10:00:00Z\",\n    \"withdrawable\": true\n  }\n}\n</code></pre>"},{"location":"legal/gdpr/#data-subject-rights","title":"Data Subject Rights","text":""},{"location":"legal/gdpr/#right-of-access-article-15","title":"Right of Access (Article 15)","text":"<pre><code>// User exports all their data\nconst data = await userClient.exportProfile();\n</code></pre>"},{"location":"legal/gdpr/#right-to-rectification-article-16","title":"Right to Rectification (Article 16)","text":"<pre><code>// User corrects data\nawait userClient.updateMemory('mem_001', {\n  content: 'Corrected information'\n});\n</code></pre>"},{"location":"legal/gdpr/#right-to-erasure-article-17","title":"Right to Erasure (Article 17)","text":"<pre><code>// User deletes data\nawait userClient.deleteMemory('mem_001');\n\n// Delete all data from agent\nawait userClient.deleteMemoriesFrom('did:a2p:agent:local:xxx');\n</code></pre>"},{"location":"legal/gdpr/#right-to-portability-article-20","title":"Right to Portability (Article 20)","text":"<pre><code>// Export in machine-readable format\nconst portable = await userClient.exportProfile({\n  format: 'json',\n  include: ['memories', 'preferences']\n});\n</code></pre>"},{"location":"legal/gdpr/#consent-management","title":"Consent Management","text":""},{"location":"legal/gdpr/#consent-receipts","title":"Consent Receipts","text":"<p>Every access generates a receipt:</p> <pre><code>{\n  \"receiptId\": \"rcpt_xxx\",\n  \"userDid\": \"did:a2p:user:local:alice\",\n  \"agentDid\": \"did:a2p:agent:local:assistant\",\n  \"grantedScopes\": [\"a2p:preferences\"],\n  \"purpose\": \"personalization\",\n  \"legalBasis\": \"consent\",\n  \"grantedAt\": \"2025-12-25T10:00:00Z\",\n  \"proof\": { ... }\n}\n</code></pre>"},{"location":"legal/gdpr/#consent-withdrawal","title":"Consent Withdrawal","text":"<pre><code>// Revoke consent for agent\nawait userClient.revokeAccess('did:a2p:agent:local:xxx');\n\n// Immediate effect\n// Agent loses access\n// Receipt marked revoked\n</code></pre>"},{"location":"legal/gdpr/#data-breach-notification-article-33","title":"Data Breach Notification (Article 33)","text":""},{"location":"legal/gdpr/#detection","title":"Detection","text":"<pre><code>{\n  \"breachDetection\": {\n    \"monitoredEvents\": [\n      \"unauthorized_access\",\n      \"bulk_export\",\n      \"unusual_pattern\"\n    ]\n  }\n}\n</code></pre>"},{"location":"legal/gdpr/#notification","title":"Notification","text":"<ul> <li>User notification: Within 72 hours</li> <li>DPA notification: If high risk</li> <li>Content: Nature, scope, measures, contact</li> </ul>"},{"location":"legal/gdpr/#implementation-checklist","title":"Implementation Checklist","text":"<ul> <li> Purpose required in all access requests</li> <li> Legal basis recorded</li> <li> Consent receipts generated</li> <li> Export endpoint available</li> <li> Delete endpoint available</li> <li> Breach notification system</li> <li> Audit logging enabled</li> </ul>"},{"location":"legal/gdpr/#next-steps","title":"Next Steps","text":"<ul> <li>EU AI Act \u2014 AI-specific compliance</li> <li>DPIA Guidance \u2014 Impact assessments</li> </ul>"},{"location":"sdk/python/","title":"Python SDK Reference","text":"<p>Complete API reference for <code>a2p-sdk</code>.</p>"},{"location":"sdk/python/#installation","title":"Installation","text":"<pre><code>pip install a2p-sdk\n</code></pre>"},{"location":"sdk/python/#a2pclient","title":"A2PClient","text":"<p>For agents accessing user profiles.</p>"},{"location":"sdk/python/#constructor","title":"Constructor","text":"<pre><code>client = A2PClient(\n    agent_did: str,\n    private_key: Optional[str] = None,\n    gateway_url: Optional[str] = None\n)\n</code></pre>"},{"location":"sdk/python/#methods","title":"Methods","text":""},{"location":"sdk/python/#get_profile","title":"get_profile","text":"<pre><code>profile = await client.get_profile(\n    user_did: str,\n    scopes: List[str]\n) -&gt; Profile\n</code></pre>"},{"location":"sdk/python/#request_access","title":"request_access","text":"<pre><code>result = await client.request_access(\n    user_did: str,\n    scopes: List[str],\n    purpose: Purpose\n) -&gt; AccessResult\n</code></pre>"},{"location":"sdk/python/#propose_memory","title":"propose_memory","text":"<pre><code>proposal = await client.propose_memory(\n    user_did: str,\n    content: str,\n    category: str,\n    confidence: float,\n    context: Optional[str] = None\n) -&gt; Proposal\n</code></pre>"},{"location":"sdk/python/#a2puserclient","title":"A2PUserClient","text":"<p>For users managing their profiles.</p>"},{"location":"sdk/python/#constructor_1","title":"Constructor","text":"<pre><code>client = A2PUserClient(\n    storage: Optional[StorageAdapter] = None\n)\n</code></pre>"},{"location":"sdk/python/#methods_1","title":"Methods","text":""},{"location":"sdk/python/#create_profile","title":"create_profile","text":"<pre><code>profile = await client.create_profile(\n    display_name: str,\n    preferences: Optional[Dict] = None\n) -&gt; Profile\n</code></pre>"},{"location":"sdk/python/#get_pending_proposals","title":"get_pending_proposals","text":"<pre><code>proposals = await client.get_pending_proposals() -&gt; List[Proposal]\n</code></pre>"},{"location":"sdk/python/#review_proposal","title":"review_proposal","text":"<pre><code>await client.review_proposal(\n    proposal_id: str,\n    action: Literal[\"approve\", \"reject\"],\n    edited_content: Optional[str] = None\n)\n</code></pre>"},{"location":"sdk/python/#set_policy","title":"set_policy","text":"<pre><code>await client.set_policy(\n    name: str,\n    agent_pattern: str,\n    allow: List[str],\n    deny: Optional[List[str]] = None,\n    permissions: List[str]\n) -&gt; Policy\n</code></pre>"},{"location":"sdk/python/#types","title":"Types","text":""},{"location":"sdk/python/#profile","title":"Profile","text":"<pre><code>@dataclass\nclass Profile:\n    id: str\n    version: str\n    profile_type: Literal[\"human\", \"agent\", \"entity\"]\n    identity: Identity\n    common: Optional[CommonData] = None\n    memories: Optional[Dict[str, Any]] = None\n    access_policies: Optional[List[Policy]] = None\n</code></pre>"},{"location":"sdk/python/#purpose","title":"Purpose","text":"<pre><code>@dataclass\nclass Purpose:\n    type: str\n    description: str\n    legal_basis: str\n    retention: Optional[str] = None\n    automated: Optional[AutomatedDecision] = None\n</code></pre>"},{"location":"sdk/python/#next-steps","title":"Next Steps","text":"<ul> <li>TypeScript SDK \u2014 TypeScript reference</li> <li>Quickstart \u2014 Get started</li> </ul>"},{"location":"sdk/typescript/","title":"TypeScript SDK Reference","text":"<p>Complete API reference for <code>@a2p/sdk</code>.</p>"},{"location":"sdk/typescript/#installation","title":"Installation","text":"<pre><code>npm install @a2p/sdk\n</code></pre>"},{"location":"sdk/typescript/#a2pclient","title":"A2PClient","text":"<p>For agents accessing user profiles.</p>"},{"location":"sdk/typescript/#constructor","title":"Constructor","text":"<pre><code>const client = new A2PClient({\n  agentDid: string,\n  privateKey?: string,\n  gatewayUrl?: string\n});\n</code></pre>"},{"location":"sdk/typescript/#methods","title":"Methods","text":""},{"location":"sdk/typescript/#getprofile","title":"getProfile","text":"<pre><code>const profile = await client.getProfile({\n  userDid: string,\n  scopes: string[]\n}): Promise&lt;Profile&gt;\n</code></pre>"},{"location":"sdk/typescript/#requestaccess","title":"requestAccess","text":"<pre><code>const result = await client.requestAccess({\n  userDid: string,\n  scopes: string[],\n  purpose: Purpose\n}): Promise&lt;AccessResult&gt;\n</code></pre>"},{"location":"sdk/typescript/#proposememory","title":"proposeMemory","text":"<pre><code>const proposal = await client.proposeMemory({\n  userDid: string,\n  content: string,\n  category: string,\n  confidence: number,\n  context?: string\n}): Promise&lt;Proposal&gt;\n</code></pre>"},{"location":"sdk/typescript/#a2puserclient","title":"A2PUserClient","text":"<p>For users managing their profiles.</p>"},{"location":"sdk/typescript/#constructor_1","title":"Constructor","text":"<pre><code>const client = new A2PUserClient({\n  storage?: StorageAdapter\n});\n</code></pre>"},{"location":"sdk/typescript/#methods_1","title":"Methods","text":""},{"location":"sdk/typescript/#createprofile","title":"createProfile","text":"<pre><code>const profile = await client.createProfile({\n  displayName: string,\n  preferences?: Preferences\n}): Promise&lt;Profile&gt;\n</code></pre>"},{"location":"sdk/typescript/#getpendingproposals","title":"getPendingProposals","text":"<pre><code>const proposals = await client.getPendingProposals(): Promise&lt;Proposal[]&gt;\n</code></pre>"},{"location":"sdk/typescript/#reviewproposal","title":"reviewProposal","text":"<pre><code>await client.reviewProposal(\n  proposalId: string,\n  decision: { action: 'approve' | 'reject', editedContent?: string }\n): Promise&lt;void&gt;\n</code></pre>"},{"location":"sdk/typescript/#setpolicy","title":"setPolicy","text":"<pre><code>await client.setPolicy({\n  name: string,\n  agentPattern: string,\n  allow: string[],\n  deny?: string[],\n  permissions: Permission[]\n}): Promise&lt;Policy&gt;\n</code></pre>"},{"location":"sdk/typescript/#types","title":"Types","text":""},{"location":"sdk/typescript/#profile","title":"Profile","text":"<pre><code>interface Profile {\n  id: DID;\n  version: string;\n  profileType: 'human' | 'agent' | 'entity';\n  identity: Identity;\n  common?: CommonData;\n  memories?: Record&lt;string, any&gt;;\n  accessPolicies?: Policy[];\n}\n</code></pre>"},{"location":"sdk/typescript/#purpose","title":"Purpose","text":"<pre><code>interface Purpose {\n  type: PurposeType;\n  description: string;\n  legalBasis: LegalBasis;\n  retention?: string;\n  automated?: {\n    decisionMaking: boolean;\n    profiling: boolean;\n  };\n}\n</code></pre>"},{"location":"sdk/typescript/#accessresult","title":"AccessResult","text":"<pre><code>interface AccessResult {\n  granted: boolean;\n  grantedScopes: string[];\n  deniedScopes: string[];\n  consentReceipt?: ConsentReceipt;\n  reason?: string;\n}\n</code></pre>"},{"location":"sdk/typescript/#next-steps","title":"Next Steps","text":"<ul> <li>Python SDK \u2014 Python reference</li> <li>Quickstart \u2014 Get started</li> </ul>"},{"location":"spec/","title":"a2p Protocol Specification","text":"<p>Version: 0.1.0 Status: Initial Release Last Updated: January 2026</p>"},{"location":"spec/#table-of-contents","title":"Table of Contents","text":"<ol> <li>Introduction</li> <li>Terminology</li> <li>Protocol Overview</li> <li>Identity Layer</li> <li>Profile Structure</li> <li>DID Method Specification</li> <li>Memory System</li> <li>Accessibility</li> <li>Children &amp; Guardianship</li> <li>Consent &amp; Access Control</li> <li>Agent Integration</li> <li>Transport &amp; API</li> <li>Security Considerations</li> <li>Offline Support</li> <li>Extensibility</li> </ol>"},{"location":"spec/#1-introduction","title":"1. Introduction","text":""},{"location":"spec/#11-purpose","title":"1.1 Purpose","text":"<p>The Agent 2 Profile (a2p) protocol defines a standard for user-owned profiles that can be shared with AI agents. It enables:</p> <ul> <li>User sovereignty: Users own and control their profile data</li> <li>Portability: Profiles work across different AI agents and platforms</li> <li>Transparency: Users see exactly what agents know about them</li> <li>Consent: Granular control over what data is shared with whom</li> <li>Interoperability: Standard schemas enable cross-agent compatibility</li> </ul>"},{"location":"spec/#12-design-principles","title":"1.2 Design Principles","text":"<ol> <li>User-First: The user is always in control</li> <li>Privacy by Design: Minimal data exposure by default</li> <li>Decentralized: No single point of control or failure</li> <li>Interoperable: Works with existing standards (DIDs, A2A, MCP)</li> <li>Extensible: Support for custom schemas and storage backends</li> <li>Practical: Easy to implement for agent developers</li> </ol>"},{"location":"spec/#13-scope","title":"1.3 Scope","text":"<p>This specification covers: - Profile data structure and schemas - Memory management and proposals - Consent and access control - Agent authentication and authorization - API endpoints and transport - Security requirements</p> <p>Out of scope: - Specific storage implementations - UI/UX guidelines - Business logic for memory consolidation algorithms</p>"},{"location":"spec/#14-applicability","title":"1.4 Applicability","text":"<p>While the protocol uses \"agent\" terminology, a2p is designed for any service that needs user context:</p> Service Type Examples Use Cases AI Agents LLM assistants, chatbots, autonomous agents Personalized responses, context retention ML Systems Recommendation engines, personalization models Cross-platform preferences, behavioral learning Traditional Services Web apps, mobile apps, APIs User preferences, settings portability IoT Devices Smart home, wearables, connected vehicles Routine learning, environment personalization Healthcare EHR systems, patient portals Patient preference portability Enterprise HR systems, collaboration tools Employee profile sharing <p>The term \"agent\" in a2p encompasses any autonomous or semi-autonomous system that:</p> <ol> <li>Needs user context to function better</li> <li>Can learn from interactions and propose insights</li> <li>Should respect user consent and data sovereignty</li> </ol> <p>Throughout this specification, \"agent\" and \"service\" may be used interchangeably. The protocol's core mechanisms \u2014 DIDs, consent policies, memory proposals \u2014 apply equally to all service types.</p>"},{"location":"spec/#example-ml-recommendation-system","title":"Example: ML Recommendation System","text":"<p>A music streaming service can use a2p to:</p> <pre><code>{\n  \"operation\": \"propose_memory\",\n  \"agentDid\": \"did:a2p:service:music-streamify\",\n  \"memory\": {\n    \"content\": \"Prefers instrumental jazz for focus work\",\n    \"category\": \"a2p:interests.music\",\n    \"confidence\": 0.85,\n    \"source\": {\n      \"type\": \"behavioral_analysis\",\n      \"context\": \"Based on 3 months of listening patterns\"\n    }\n  }\n}\n</code></pre> <p>Once approved by the user, this preference benefits all a2p-compatible services \u2014 not just the one that learned it.</p>"},{"location":"spec/#2-terminology","title":"2. Terminology","text":"Term Definition User A human who owns one or more profiles Agent An AI system or service that interacts with users and may access profiles Entity An organization, team, department, project, or other collective Profile A structured collection of data, preferences, and memories Memory A discrete piece of information about a user Proposal A suggested memory addition from an agent, pending user approval Consent Policy Rules defining what an agent can access Enforced Policy A policy mandated by a parent entity that children cannot override DID Decentralized Identifier, a self-sovereign identity Scope A permission category (e.g., <code>a2p:preferences</code>)"},{"location":"spec/#3-protocol-overview","title":"3. Protocol Overview","text":""},{"location":"spec/#31-actors","title":"3.1 Actors","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                            a2p ECOSYSTEM                                \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                         \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510           \u2502\n\u2502   \u2502  USER   \u2502     \u2502 ENTITY  \u2502                    \u2502  AGENT  \u2502           \u2502\n\u2502   \u2502 (Human) \u2502     \u2502(Org/Team)\u2502                   \u2502(AI/Svc) \u2502           \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518                    \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518           \u2502\n\u2502        \u2502               \u2502                               \u2502                \u2502\n\u2502        \u2502 owns          \u2502 defines                       \u2502 has            \u2502\n\u2502        \u25bc               \u25bc                               \u25bc                \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510           \u2502\n\u2502   \u2502 PROFILE \u2502     \u2502 ENTITY   \u2502                   \u2502 PROFILE \u2502           \u2502\n\u2502   \u2502 (Human) \u2502\u25c4\u2500\u2500\u2500\u2500\u2502 PROFILE  \u2502\u2500\u2500\u2500\u2500 enforces \u2500\u2500\u2500\u2500\u25ba\u2502 (Agent) \u2502           \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518           \u2502\n\u2502        \u2502               \u2502                                                \u2502\n\u2502        \u2502 inherits from \u2502                                                \u2502\n\u2502        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                                                \u2502\n\u2502                                                                         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"spec/#32-profile-types","title":"3.2 Profile Types","text":"Profile Type DID Pattern Owner Purpose Human <code>did:a2p:user:*</code> Individual Personal preferences, memories Entity <code>did:a2p:entity:*</code> Organization/Team Policies, hierarchy, membership Agent <code>did:a2p:agent:*</code> Service operator Capabilities, trust metrics"},{"location":"spec/#33-entity-hierarchy","title":"3.3 Entity Hierarchy","text":"<p>Entities can form hierarchies with enforced policies:</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                        ENTITY HIERARCHY                              \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                      \u2502\n\u2502   ACME Corp (organization)                                           \u2502\n\u2502   \u251c\u2500\u2500 ENFORCES: gdpr=true, dataResidency=EU (locked)                \u2502\n\u2502   \u2502                                                                  \u2502\n\u2502   \u251c\u2500\u2500 Engineering (department)                                       \u2502\n\u2502   \u2502   \u251c\u2500\u2500 INHERITS: gdpr, dataResidency                             \u2502\n\u2502   \u2502   \u251c\u2500\u2500 ADDS: codeReview=required (locked for teams)              \u2502\n\u2502   \u2502   \u2502                                                              \u2502\n\u2502   \u2502   \u251c\u2500\u2500 ML Team (team)                                            \u2502\n\u2502   \u2502   \u2502   \u251c\u2500\u2500 INHERITS: all above                                   \u2502\n\u2502   \u2502   \u2502   \u2514\u2500\u2500 Alice (user) \u2500\u2500\u25ba gets all policies                    \u2502\n\u2502   \u2502   \u2502                                                              \u2502\n\u2502   \u2502   \u2514\u2500\u2500 Platform Team (team)                                       \u2502\n\u2502   \u2502       \u2514\u2500\u2500 Bob (user)                                             \u2502\n\u2502   \u2502                                                                  \u2502\n\u2502   \u2514\u2500\u2500 Sales (department)                                             \u2502\n\u2502       \u2514\u2500\u2500 Charlie (user)                                             \u2502\n\u2502                                                                      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"spec/#34-enforced-policy-types","title":"3.4 Enforced Policy Types","text":"Type Meaning Use Case <code>locked</code> Cannot be changed Compliance requirements <code>min</code> Floor value Minimum encryption bits <code>max</code> Ceiling value Maximum retention period <code>subset</code> Must be subset Restrict AI model list <code>additive</code> Can only add Extend blocklists"},{"location":"spec/#32-core-flows","title":"3.2 Core Flows","text":""},{"location":"spec/#flow-1-profile-access","title":"Flow 1: Profile Access","text":"<pre><code>User                    a2p Gateway                 Agent\n  \u2502                          \u2502                        \u2502\n  \u2502                          \u2502\u25c4\u2500\u2500\u2500 1. Request \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502\n  \u2502                          \u2502     (user_did, scopes) \u2502\n  \u2502                          \u2502                        \u2502\n  \u2502\u25c4\u2500\u2500\u2500 2. Consent Check \u2500\u2500\u2500\u2500\u2502                        \u2502\n  \u2502     (show agent info)    \u2502                        \u2502\n  \u2502                          \u2502                        \u2502\n  \u2502\u2500\u2500\u2500\u2500 3. Approve \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502                        \u2502\n  \u2502                          \u2502                        \u2502\n  \u2502                          \u2502\u2500\u2500\u2500\u2500 4. Profile \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502\n  \u2502                          \u2502     (filtered by scope)\u2502\n  \u2502                          \u2502                        \u2502\n</code></pre>"},{"location":"spec/#flow-2-memory-proposal","title":"Flow 2: Memory Proposal","text":"<pre><code>User                    a2p Gateway                 Agent\n  \u2502                          \u2502                        \u2502\n  \u2502                          \u2502\u25c4\u2500\u2500\u2500 1. Propose \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2502\n  \u2502                          \u2502     (memory content)   \u2502\n  \u2502                          \u2502                        \u2502\n  \u2502\u25c4\u2500\u2500\u2500 2. Notification \u2500\u2500\u2500\u2500\u2500\u2502                        \u2502\n  \u2502     (new proposal)       \u2502                        \u2502\n  \u2502                          \u2502                        \u2502\n  \u2502\u2500\u2500\u2500\u2500 3. Review \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25ba\u2502                        \u2502\n  \u2502     (approve/reject/edit)\u2502                        \u2502\n  \u2502                          \u2502                        \u2502\n  \u2502                          \u2502\u2500\u2500\u2500\u2500 4. Confirmation \u2500\u2500\u25ba\u2502\n  \u2502                          \u2502     (accepted/rejected)\u2502\n  \u2502                          \u2502                        \u2502\n</code></pre>"},{"location":"spec/#33-profile-types","title":"3.3 Profile Types","text":"Type Description Owner <code>human</code> End-user profile with preferences and memories User <code>agent</code> AI agent identity and capabilities Agent operator <code>organization</code> Company/team profile with policies Organization <code>collective</code> Shared profile for groups/families Group members"},{"location":"spec/#4-identity-layer","title":"4. Identity Layer","text":""},{"location":"spec/#41-decentralized-identifiers-dids","title":"4.1 Decentralized Identifiers (DIDs)","text":"<p>All entities in a2p are identified using DIDs. The protocol supports multiple DID methods:</p> <pre><code>did:a2p:user:gaugid:abc123              # a2p native user (namespaced)\ndid:a2p:agent:gaugid:my-assistant      # a2p native agent (namespaced)\ndid:a2p:user:local:alice               # a2p local user profile\ndid:key:z6Mk...                        # did:key method\ndid:web:example.com                    # did:web method\n</code></pre> <p>Note: For a2p native DIDs, see Section 6: DID Method Specification for the complete specification.</p>"},{"location":"spec/#42-did-document-structure","title":"4.2 DID Document Structure","text":"<pre><code>{\n  \"@context\": [\"https://www.w3.org/ns/did/v1\", \"https://a2p.protocol/ns/v1\"],\n  \"id\": \"did:a2p:user:gaugid:abc123\",\n  \"controller\": \"did:a2p:user:gaugid:abc123\",\n  \"verificationMethod\": [\n    {\n      \"id\": \"did:a2p:user:gaugid:abc123#key-1\",\n      \"type\": \"Ed25519VerificationKey2020\",\n      \"controller\": \"did:a2p:user:gaugid:abc123\",\n      \"publicKeyMultibase\": \"z6Mk...\"\n    }\n  ],\n  \"authentication\": [\"did:a2p:user:gaugid:abc123#key-1\"],\n  \"service\": [\n    {\n      \"id\": \"did:a2p:user:gaugid:abc123#a2p-profile\",\n      \"type\": \"A2PProfileService\",\n      \"serviceEndpoint\": \"https://profiles.example.com/abc123\"\n    }\n  ]\n}\n</code></pre>"},{"location":"spec/#43-agent-authentication","title":"4.3 Agent Authentication","text":"<p>Agents MUST authenticate when accessing profiles:</p> <ol> <li>Request Signing: All requests are signed with the agent's private key</li> <li>DID Resolution: The user's client resolves the agent's DID</li> <li>Verification: The signature is verified against the agent's public key</li> <li>Trust Check: Agent profile is checked for trust metrics</li> </ol>"},{"location":"spec/#44-did-format-validation","title":"4.4 DID Format Validation","text":"<p>All DIDs MUST be validated before processing requests.</p>"},{"location":"spec/#441-general-did-pattern","title":"4.4.1 General DID Pattern","text":"<p>All a2p native DIDs MUST include a namespace component:</p> <pre><code>^did:a2p:(user|agent|org|entity|service):[a-zA-Z0-9._-]+:[a-zA-Z0-9._-]+$\n</code></pre> <p>Format: <code>did:a2p:&lt;type&gt;:&lt;namespace&gt;:&lt;identifier&gt;</code></p> <p>Components: - <code>&lt;type&gt;</code>: Entity type (<code>user</code>, <code>agent</code>, <code>org</code>, <code>entity</code>, <code>service</code>) - <code>&lt;namespace&gt;</code>: Provider namespace (mandatory) - <code>&lt;identifier&gt;</code>: Unique identifier within namespace</p> <p>Note: For complete DID method specification, see Section 6: DID Method Specification.</p>"},{"location":"spec/#442-type-specific-patterns","title":"4.4.2 Type-Specific Patterns","text":"Type Pattern Example User <code>^did:a2p:user:[a-zA-Z0-9._-]+:[a-zA-Z0-9._-]+$</code> <code>did:a2p:user:gaugid:alice</code> Agent <code>^did:a2p:agent:[a-zA-Z0-9._-]+:[a-zA-Z0-9._-]+$</code> <code>did:a2p:agent:gaugid:my-assistant</code> Organization <code>^did:a2p:org:[a-zA-Z0-9._-]+:[a-zA-Z0-9._-]+$</code> <code>did:a2p:org:gaugid:acme-corp</code> Entity <code>^did:a2p:entity:[a-zA-Z0-9._-]+:[a-zA-Z0-9._-]+$</code> <code>did:a2p:entity:gaugid:team-alpha</code> Service <code>^did:a2p:service:[a-zA-Z0-9._-]+:[a-zA-Z0-9._-]+$</code> <code>did:a2p:service:gaugid:music-app</code>"},{"location":"spec/#443-validation-requirements","title":"4.4.3 Validation Requirements","text":"<p>Implementations MUST:</p> <ol> <li>Validate DID format on all protocol endpoints</li> <li>Return <code>A2P010</code> error for invalid DID format</li> <li>Reject requests with malformed DIDs before further processing</li> </ol>"},{"location":"spec/#444-valid-did-examples","title":"4.4.4 Valid DID Examples","text":"<p>\u2705 Valid: - <code>did:a2p:agent:gaugid:my-assistant</code> (provider namespace) - <code>did:a2p:agent:gaugid:trusted-ai</code> (provider namespace) - <code>did:a2p:agent:gaugid:agent_123</code> (provider namespace) - <code>did:a2p:agent:company:team.agent</code> (custom namespace) - <code>did:a2p:user:gaugid:alice</code> (provider namespace) - <code>did:a2p:user:local:alice</code> (local namespace for self-hosted) - <code>did:a2p:org:gaugid:acme-corp</code> (provider namespace)</p> <p>\u274c Invalid: - <code>did:a2p:agent:my-assistant</code> (missing namespace) - <code>did:a2p:agent:gaugid:</code> (empty identifier) - <code>agent:gaugid:my-assistant</code> (missing <code>did:a2p</code> prefix) - <code>did:a2p:agent:gaugid:agent with spaces</code> (invalid characters in identifier) - <code>did:a2p:unknown:gaugid:test</code> (invalid type) - <code>did:a2p:agent:gaugid</code> (missing identifier)</p>"},{"location":"spec/#5-profile-structure","title":"5. Profile Structure","text":""},{"location":"spec/#51-root-profile-schema","title":"5.1 Root Profile Schema","text":"<pre><code>{\n  \"$schema\": \"https://a2p.protocol/schemas/v1/profile.json\",\n  \"id\": \"did:a2p:user:abc123\",\n  \"version\": \"1.0\",\n  \"profileType\": \"human\",\n  \"created\": \"2024-01-15T10:30:00Z\",\n  \"updated\": \"2024-12-24T14:00:00Z\",\n\n  \"identity\": { },\n  \"common\": { },\n  \"memories\": { },\n  \"subProfiles\": [ ],\n  \"pendingProposals\": [ ],\n  \"accessPolicies\": [ ],\n  \"audit\": { }\n}\n</code></pre>"},{"location":"spec/#52-identity-section","title":"5.2 Identity Section","text":"<pre><code>{\n  \"identity\": {\n    \"did\": \"did:a2p:user:abc123\",\n    \"displayName\": \"Alice\",\n    \"publicKeys\": [\n      {\n        \"id\": \"#key-1\",\n        \"type\": \"Ed25519\",\n        \"publicKeyMultibase\": \"z6Mk...\"\n      }\n    ],\n    \"recoveryMethods\": [\"email:alice@example.com\"]\n  }\n}\n</code></pre>"},{"location":"spec/#53-common-section-shared-across-sub-profiles","title":"5.3 Common Section (Shared Across Sub-Profiles)","text":"<pre><code>{\n  \"common\": {\n    \"preferences\": {\n      \"language\": \"en-US\",\n      \"timezone\": \"Europe/Madrid\",\n      \"communication\": {\n        \"style\": \"concise\",\n        \"formality\": \"casual\",\n        \"humor\": true\n      },\n      \"content\": {\n        \"format\": \"markdown\",\n        \"codeStyle\": \"commented\",\n        \"exampleLanguage\": \"python\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"spec/#54-standard-memory-categories","title":"5.4 Standard Memory Categories","text":"<p>The protocol defines standard namespaced categories:</p> Namespace Category Description Sensitivity <code>a2p:identity</code> Core identity Name, pronouns, location Standard <code>a2p:preferences</code> Communication preferences Style, format, language Public <code>a2p:professional</code> Work information Job, skills, company Standard <code>a2p:interests</code> Personal interests Hobbies, music, books Standard <code>a2p:context</code> Current context Projects, goals, recent topics Standard <code>a2p:health</code> Health information Allergies, conditions Sensitive <code>a2p:financial</code> Financial information Budget preferences Restricted <code>a2p:relationships</code> Relationships Family, friends Sensitive <code>a2p:episodic</code> Free-form memories Agent-learned facts Varies"},{"location":"spec/#55-sub-profiles","title":"5.5 Sub-Profiles","text":"<p>Users can maintain multiple sub-profiles for different contexts:</p> <pre><code>{\n  \"subProfiles\": [\n    {\n      \"id\": \"did:a2p:user:abc123:work\",\n      \"name\": \"Work\",\n      \"inheritsFrom\": [\"common\"],\n      \"overrides\": {\n        \"identity.displayName\": \"Alice Chen\"\n      },\n      \"specialized\": {\n        \"a2p:professional\": {\n          \"title\": \"Software Architect\",\n          \"company\": \"Acme Corp\"\n        }\n      },\n      \"shareWith\": [\"agent:*:work-category\"]\n    },\n    {\n      \"id\": \"did:a2p:user:abc123:personal\",\n      \"name\": \"Personal\",\n      \"inheritsFrom\": [\"common\"],\n      \"specialized\": {\n        \"a2p:interests\": {\n          \"music\": [\"jazz\", \"electronic\"]\n        }\n      },\n      \"shareWith\": [\"agent:spotify:*\"]\n    }\n  ]\n}\n</code></pre>"},{"location":"spec/#6-did-method-specification","title":"6. DID Method Specification","text":""},{"location":"spec/#61-method-name","title":"6.1 Method Name","text":"<p>The DID method name is: <code>a2p</code></p>"},{"location":"spec/#62-did-syntax","title":"6.2 DID Syntax","text":"<p>All DIDs in the a2p method follow this format:</p> <pre><code>did:a2p:&lt;type&gt;:&lt;namespace&gt;:&lt;identifier&gt;\n</code></pre> <p>Components: - <code>did</code>: Literal string \"did\" - <code>a2p</code>: Method identifier - <code>&lt;type&gt;</code>: Entity type, one of: <code>agent</code>, <code>user</code>, <code>entity</code>, <code>service</code>, <code>org</code> - <code>&lt;namespace&gt;</code>: Provider namespace (mandatory) - <code>&lt;identifier&gt;</code>: Unique identifier within namespace</p> <p>Examples: <pre><code>did:a2p:agent:gaugid:my-assistant\ndid:a2p:user:gaugid:AbC123XyZ789\ndid:a2p:entity:gaugid:acme-corp\ndid:a2p:service:gaugid:travel-service\ndid:a2p:user:local:alice\n</code></pre></p>"},{"location":"spec/#63-did-generation","title":"6.3 DID Generation","text":"<p>Unified Rules for All Types:</p> <ol> <li>Provider chooses a unique namespace (e.g., <code>gaugid</code>, <code>company-name</code>, <code>domain.com</code>, <code>local</code>)</li> <li>Provider generates a unique identifier within the namespace</li> <li>Provider ensures identifier uniqueness (detect collisions, retry if needed)</li> <li>Format: <code>did:a2p:&lt;type&gt;:&lt;namespace&gt;:&lt;identifier&gt;</code></li> </ol> <p>Identifier Generation (Provider Choice):</p> <p>Providers MAY choose any method to generate identifiers: - Name-based: Sanitized names (e.g., <code>my-assistant</code>, <code>acme-corp</code>) - Random: Random alphanumeric (e.g., <code>AbC123XyZ789</code>) - UUID-based: Standard UUIDs - Key-based: Hash of public key (base58 encoded) - Combination: Any combination of above</p> <p>Requirements: - Identifier MUST be unique within namespace - Provider MUST detect and handle collisions - Identifier MUST match pattern: <code>[a-zA-Z0-9._-]+</code> - Namespace MUST match pattern: <code>[a-zA-Z0-9._-]+</code></p>"},{"location":"spec/#64-uniqueness-guarantees","title":"6.4 Uniqueness Guarantees","text":"<p>Two-Level Guarantee:</p> <ol> <li>Namespace Level: Each provider uses a unique namespace</li> <li>Prevents collisions between providers</li> <li>Enables routing for resolution</li> <li> <p>Examples: <code>gaugid</code>, <code>company-name</code>, <code>domain.com</code>, <code>local</code></p> </li> <li> <p>Identifier Level: Provider ensures identifier uniqueness within namespace</p> </li> <li>Provider MUST verify uniqueness before registration</li> <li>Provider MUST handle collisions (retry or reject)</li> <li>Provider chooses identifier generation method</li> </ol> <p>Requirements: - Providers MUST use a unique namespace - Providers MUST verify identifier uniqueness before registration - Providers MUST handle collisions gracefully</p>"},{"location":"spec/#65-did-resolution","title":"6.5 DID Resolution","text":"<p>Standard Resolution Endpoint:</p> <p>All implementations MAY provide (optional for single-provider, recommended for federation):</p> <pre><code>GET /a2p/v1/did/:did\n</code></pre> <p>Resolution Process:</p> <ol> <li>Parse DID to extract namespace</li> <li>If namespace matches local provider: Resolve from local database</li> <li>If namespace is external: Query external provider's resolution endpoint</li> <li>Return W3C-compliant DID document</li> </ol> <p>DID Document Structure:</p> <pre><code>{\n  \"@context\": [\n    \"https://www.w3.org/ns/did/v1\",\n    \"https://w3id.org/security/suites/ed25519-2020/v1\"\n  ],\n  \"id\": \"did:a2p:agent:gaugid:my-assistant\",\n  \"verificationMethod\": [\n    {\n      \"id\": \"did:a2p:agent:gaugid:my-assistant#key-1\",\n      \"type\": \"Ed25519VerificationKey2020\",\n      \"controller\": \"did:a2p:agent:gaugid:my-assistant\",\n      \"publicKeyMultibase\": \"z&lt;base64-encoded-public-key&gt;\"\n    }\n  ],\n  \"authentication\": [\"did:a2p:agent:gaugid:my-assistant#key-1\"],\n  \"assertionMethod\": [\"did:a2p:agent:gaugid:my-assistant#key-1\"]\n}\n</code></pre> <p>Note: Public keys are stored in the DID document, not in the DID identifier itself. This follows W3C DID standard practice.</p>"},{"location":"spec/#66-did-updates","title":"6.6 DID Updates","text":"<p>Key Rotation: - DIDs MAY be updated to rotate keys - Update MUST require cryptographic proof of ownership (signature) - DID identifier remains the same - Only <code>verificationMethod</code> in DID document changes</p> <p>Namespace Changes: - Namespace CANNOT be changed (it's part of the DID) - To change namespace: Create new DID and migrate data</p> <p>Identifier Changes: - Identifier CANNOT be changed (it's part of the DID) - To change identifier: Create new DID and migrate data</p>"},{"location":"spec/#67-ownership-verification","title":"6.7 Ownership &amp; Verification","text":"<p>Ownership is proven via DID document, not DID format:</p> <ol> <li>DID Document contains public key(s) in <code>verificationMethod</code></li> <li>Authentication uses signature verification against public key</li> <li>Updates require cryptographic proof (Ed25519 signature)</li> <li>DID format provides routing (namespace) and uniqueness (identifier)</li> </ol> <p>This follows W3C DID standard: - DID = Persistent identifier - DID Document = Contains keys, services, metadata - Verification = Uses keys from DID document, not DID format</p>"},{"location":"spec/#68-security-considerations","title":"6.8 Security Considerations","text":"<p>Collision Prevention: 1. Namespace requirement prevents inter-provider collisions 2. Provider ensures identifier uniqueness within namespace 3. Providers MUST implement collision detection</p> <p>Ownership Verification: 1. Agents: Updates require Ed25519 signature proof 2. Users: Controlled by provider authentication 3. Entities/Services: Provider-managed</p> <p>Resolution Security: 1. HTTPS MUST be used for resolution (except local namespace) 2. Certificate validation MUST be performed 3. Cache with TTL for performance (optional)</p>"},{"location":"spec/#69-namespace-verification","title":"6.9 Namespace Verification","text":"<p>Provider Namespaces: - Namespace typically matches domain (e.g., <code>gaugid</code> \u2192 <code>gaugid.com</code>) - HTTPS certificate verifies domain ownership - DID resolution via HTTPS endpoint - Certificate authority (CA) validates domain control</p> <p>Local Namespaces: - <code>local</code> namespace for self-hosted profiles - No domain verification required - Direct SDK access or self-hosted gateway - User controls their own server/storage - See Section 13: Offline Support for details</p> <p>Custom Namespaces: - User-defined namespaces (e.g., <code>my-server</code>, <code>home-gateway</code>) - User controls resolution endpoint - Self-signed or Let's Encrypt certificates - Trust model depends on user's setup</p>"},{"location":"spec/#610-local-profile-support","title":"6.10 Local Profile Support","text":"<p>For users who store profiles locally (no cloud provider):</p> <p>DID Format: <pre><code>did:a2p:user:local:alice\ndid:a2p:agent:local:my-agent\n</code></pre></p> <p>Resolution: - Direct Access: SDK accesses profile directly (no network resolution) - Self-Hosted: User provides resolution endpoint (optional) - No HTTPS Required: Local network or direct access</p> <p>Trust Model: 1. User Control: User controls their local storage/server 2. No Namespace Verification: Not needed for local-only access 3. Signature Verification: Still required (cryptographic) 4. Agent Trust: User explicitly grants access</p> <p>Use Cases: - Development and testing - Privacy-conscious users - Single-user scenarios - Offline-first applications</p>"},{"location":"spec/#7-memory-system","title":"7. Memory System","text":""},{"location":"spec/#71-memory-object-structure","title":"7.1 Memory Object Structure","text":"<pre><code>{\n  \"id\": \"mem_abc123\",\n  \"content\": \"Prefers dark mode for coding\",\n  \"category\": \"a2p:preferences.ui\",\n  \"source\": {\n    \"type\": \"agent_proposal\",\n    \"agentDid\": \"did:a2p:agent:claude\",\n    \"sessionId\": \"sess_xyz\",\n    \"timestamp\": \"2024-12-24T10:30:00Z\"\n  },\n  \"confidence\": 0.92,\n  \"status\": \"approved\",\n  \"sensitivity\": \"public\",\n  \"scope\": [\"general\"],\n  \"metadata\": {\n    \"approvedAt\": \"2024-12-24T10:35:00Z\",\n    \"lastUsed\": \"2024-12-24T14:00:00Z\",\n    \"useCount\": 5\n  }\n}\n</code></pre>"},{"location":"spec/#72-memory-sources","title":"7.2 Memory Sources","text":"Source Type Description <code>user_manual</code> User manually added <code>user_import</code> Imported from external source <code>agent_proposal</code> Proposed by agent, approved by user <code>agent_direct</code> Directly written by agent (if permitted) <code>system_derived</code> Derived from other memories"},{"location":"spec/#73-memory-status","title":"7.3 Memory Status","text":"Status Description <code>pending</code> Proposed by agent, awaiting user review <code>approved</code> Approved and active <code>rejected</code> Rejected by user <code>archived</code> Moved to archive (not actively shared) <code>expired</code> Confidence decayed below threshold"},{"location":"spec/#74-confidence-decay","title":"7.4 Confidence Decay","text":"<p>Memories have a confidence score (0.0 to 1.0) that decays over time if not reconfirmed:</p> <pre><code>Initial confidence: 0.95\nAfter 30 days without use: 0.85\nAfter 90 days without use: 0.70\nAfter 180 days without use: 0.50 (flagged for review)\nAfter 365 days without use: 0.30 (auto-archived)\n</code></pre> <p>Configuration: <pre><code>{\n  \"memorySettings\": {\n    \"decayEnabled\": true,\n    \"decayRate\": 0.1,\n    \"decayInterval\": \"30d\",\n    \"reviewThreshold\": 0.5,\n    \"archiveThreshold\": 0.3\n  }\n}\n</code></pre></p>"},{"location":"spec/#75-memory-consolidation","title":"7.5 Memory Consolidation","text":"<p>The protocol supports these consolidation operations:</p> Operation Description <code>merge</code> Combine duplicate memories <code>resolve</code> User picks correct version from conflicts <code>promote</code> Move episodic memory to structured category or semantic type <code>reclassify</code> Change memory type (episodic \u2194 semantic \u2194 procedural) <code>archive</code> Move to archive <code>delete</code> Permanently remove"},{"location":"spec/#76-memory-types","title":"7.6 Memory Types","text":"<p>The a2p protocol supports three memory types that organize memories by how they are stored, retrieved, and used:</p>"},{"location":"spec/#761-episodic-memory","title":"7.6.1 Episodic Memory","text":"<p>Purpose: Store specific events and interactions with temporal context.</p> <p>Characteristics: - Time-stamped events - Contextual information - Event-specific details - Historical record of interactions</p> <p>Examples: - \"User asked about Python async on 2026-01-15\" - \"User completed onboarding on 2026-01-10\" - \"User mentioned interest in Rust during conversation\"</p> <p>Use Cases: - Conversation history - Specific interactions - Time-bound events - Session-based information</p>"},{"location":"spec/#762-semantic-memory","title":"7.6.2 Semantic Memory","text":"<p>Purpose: Store abstracted knowledge and facts about the user.</p> <p>Characteristics: - Abstracted from multiple episodes - Timeless information - General knowledge - Factual statements</p> <p>Examples: - \"User is a Python expert\" (abstracted from many episodes) - \"User prefers technical explanations\" (generalized preference) - \"User works in distributed systems\" (factual knowledge)</p> <p>Use Cases: - User expertise and skills - General preferences - Factual information - Long-term knowledge</p> <p>Derivation: Typically derived from multiple episodic memories through abstraction.</p>"},{"location":"spec/#763-procedural-memory","title":"7.6.3 Procedural Memory","text":"<p>Purpose: Store behavioral patterns and how-to information.</p> <p>Characteristics: - Pattern-based - Behavioral information - Preference-driven - \"How the user does things\"</p> <p>Examples: - \"User prefers code examples with type hints\" - \"User always asks for pros/cons before decisions\" - \"User follows a morning routine: coffee, emails, coding\"</p> <p>Use Cases: - Behavioral patterns - Communication preferences - Workflow patterns - Decision-making styles</p> <p>Derivation: Typically derived from repeated behaviors across multiple episodes.</p>"},{"location":"spec/#764-memory-types-and-categories","title":"7.6.4 Memory Types and Categories","text":"<p>Important: Memory types (<code>episodic</code>, <code>semantic</code>, <code>procedural</code>) are orthogonal to memory categories (<code>a2p:preferences</code>, <code>a2p:professional</code>, etc.).</p> <ul> <li>Memory Type: Determines how the memory is stored, retrieved, and used</li> <li>Memory Category: Determines the domain/context of the memory</li> </ul> <p>A memory can be: - Semantic memory in the preferences category - Procedural memory in the professional category - Episodic memory in the interests category</p> <p>Example: <pre><code>{\n  \"memories\": {\n    \"a2p:semantic\": [\n      {\n        \"id\": \"mem_001\",\n        \"content\": \"User prefers dark mode for coding\",\n        \"category\": \"a2p:preferences.ui\",\n        \"confidence\": 0.9,\n        \"status\": \"approved\"\n      }\n    ],\n    \"a2p:procedural\": [\n      {\n        \"id\": \"mem_002\",\n        \"content\": \"User always asks for pros/cons before decisions\",\n        \"category\": \"a2p:preferences.communication\",\n        \"confidence\": 0.85,\n        \"status\": \"approved\"\n      }\n    ],\n    \"a2p:episodic\": [\n      {\n        \"id\": \"mem_003\",\n        \"content\": \"User asked about Python async on 2026-01-15\",\n        \"category\": \"a2p:interests.technology\",\n        \"confidence\": 0.8,\n        \"status\": \"approved\"\n      }\n    ]\n  }\n}\n</code></pre></p>"},{"location":"spec/#765-memory-type-classification","title":"7.6.5 Memory Type Classification","text":"<p>Agents need to classify memories into types when proposing them. The following decision tree provides guidance:</p> <ol> <li>Is it a specific event or interaction with a timestamp/context?</li> <li>YES \u2192 <code>episodic</code></li> <li> <p>NO \u2192 Continue</p> </li> <li> <p>Is it abstracted/generalized knowledge derived from multiple episodes?</p> </li> <li>YES \u2192 <code>semantic</code></li> <li> <p>NO \u2192 Continue</p> </li> <li> <p>Is it a behavioral pattern, preference, or \"how-to\" information?</p> </li> <li>YES \u2192 <code>procedural</code></li> <li>NO \u2192 Default to <code>episodic</code></li> </ol> <p>Classification Examples:</p> Content Type Reasoning \"User asked about Python async on 2026-01-15\" <code>episodic</code> Specific event with timestamp \"User completed onboarding on 2026-01-10\" <code>episodic</code> Specific event \"User is a Python expert\" <code>semantic</code> Abstracted from many episodes \"User prefers technical explanations\" <code>semantic</code> Generalized preference \"User works in distributed systems\" <code>semantic</code> Factual knowledge \"User prefers code examples with type hints\" <code>procedural</code> Behavioral pattern \"User always asks for pros/cons before decisions\" <code>procedural</code> Behavioral pattern \"User follows morning routine: coffee, emails, coding\" <code>procedural</code> How-to/pattern <p>Edge Cases: - Unclear cases: Default to <code>episodic</code> (can be reclassified later) - Multiple types possible: Choose the most specific type - Agent uncertainty: Use lower confidence score, let user review</p>"},{"location":"spec/#766-memory-type-reclassification","title":"7.6.6 Memory Type Reclassification","text":"<p>Memories can be reclassified from one type to another:</p> <p>Reclassification Methods: 1. User Action: User manually reclassifies in dashboard 2. Agent Proposal: Agent proposes reclassification (requires approval) 3. Automatic Promotion: System can promote episodic \u2192 semantic based on:    - High confidence (&gt;0.9)    - High use count (&gt;10)    - Multiple similar episodes</p> <p>Reclassification Rules: - User-approved memories: Reclassification requires user approval - Agent-proposed memories: Agent can propose reclassification - Automatic promotion: System can promote based on criteria above</p>"},{"location":"spec/#8-accessibility","title":"8. Accessibility","text":""},{"location":"spec/#71-overview","title":"7.1 Overview","text":"<p>a2p includes standardized accessibility preferences that enable services to automatically adapt their interfaces for users with disabilities. These preferences are part of the core <code>a2p:preferences.accessibility</code> namespace.</p>"},{"location":"spec/#72-accessibility-categories","title":"7.2 Accessibility Categories","text":"Category Description Examples Vision Visual impairments Screen reader, magnification, color blindness Hearing Auditory impairments Captions, visual alerts, sign language Motor Physical impairments Keyboard-only, voice control, switch access Cognitive Cognitive needs Simplified UI, reading assistance, memory aids Sensory Sensory processing Reduce flashing, reduce motion, quiet mode Physical Real-world accessibility Wheelchair, allergies, dietary, service animal"},{"location":"spec/#73-vision-preferences","title":"7.3 Vision Preferences","text":"<pre><code>{\n  \"preferences\": {\n    \"accessibility\": {\n      \"vision\": {\n        \"screenReader\": true,\n        \"magnification\": 1.5,\n        \"highContrast\": \"high\",\n        \"colorVision\": {\n          \"type\": \"deuteranopia\",\n          \"severity\": \"moderate\"\n        },\n        \"prefersDarkMode\": true,\n        \"fontSize\": \"large\",\n        \"reducedMotion\": true\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"spec/#color-vision-types","title":"Color Vision Types","text":"Type Description UI Adaptation <code>protanopia</code> Red-blind Avoid red/green distinctions <code>deuteranopia</code> Green-blind Avoid red/green distinctions <code>tritanopia</code> Blue-blind Avoid blue/yellow distinctions <code>achromatopsia</code> Complete color blindness Use patterns/shapes, not just color <code>protanomaly</code> Red-weak Use high contrast red <code>deuteranomaly</code> Green-weak Use high contrast green"},{"location":"spec/#74-hearing-preferences","title":"7.4 Hearing Preferences","text":"<pre><code>{\n  \"preferences\": {\n    \"accessibility\": {\n      \"hearing\": {\n        \"deaf\": false,\n        \"hardOfHearing\": true,\n        \"prefersVisualAlerts\": true,\n        \"captions\": {\n          \"enabled\": true,\n          \"style\": \"large\",\n          \"background\": \"solid\",\n          \"language\": \"en\"\n        },\n        \"signLanguage\": \"ASL\",\n        \"audioDescriptions\": true\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"spec/#75-motor-preferences","title":"7.5 Motor Preferences","text":"<pre><code>{\n  \"preferences\": {\n    \"accessibility\": {\n      \"motor\": {\n        \"keyboardOnly\": true,\n        \"voiceControl\": false,\n        \"reducedMotion\": true,\n        \"largeClickTargets\": true,\n        \"extendedTimeouts\": true,\n        \"dwellClick\": true,\n        \"dwellTime\": 1500\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"spec/#76-cognitive-preferences","title":"7.6 Cognitive Preferences","text":"<pre><code>{\n  \"preferences\": {\n    \"accessibility\": {\n      \"cognitive\": {\n        \"simplifiedUI\": true,\n        \"reducedAnimations\": true,\n        \"readingAssistance\": {\n          \"dyslexiaFont\": true,\n          \"lineSpacing\": \"wide\",\n          \"focusMode\": true\n        },\n        \"memoryAids\": true,\n        \"plainLanguage\": true,\n        \"contentWarnings\": true\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"spec/#77-generative-ui-integration","title":"7.7 Generative UI Integration","text":"<p>When an agent or service with generative UI capabilities receives accessibility preferences:</p> <pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    GENERATIVE UI FLOW                               \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                     \u2502\n\u2502  1. Service requests a2p:preferences.accessibility                 \u2502\n\u2502                                                                     \u2502\n\u2502  2. User profile returns:                                          \u2502\n\u2502     { vision: { colorVision: { type: \"deuteranopia\" } } }         \u2502\n\u2502                                                                     \u2502\n\u2502  3. Generative UI adapts:                                          \u2502\n\u2502     - Uses accessible color palette (no red/green)                 \u2502\n\u2502     - Adds patterns to distinguish elements                        \u2502\n\u2502     - Ensures sufficient contrast                                  \u2502\n\u2502     - Includes text labels, not just colors                        \u2502\n\u2502                                                                     \u2502\n\u2502  4. Result: Personalized accessible interface                      \u2502\n\u2502                                                                     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"spec/#78-privacy-considerations","title":"7.8 Privacy Considerations","text":"<p>Accessibility preferences can reveal sensitive health information. Recommended policies:</p> <pre><code>{\n  \"accessPolicies\": [\n    {\n      \"name\": \"Accessibility Sharing\",\n      \"agentPattern\": \"*\",\n      \"allow\": [\"a2p:preferences.accessibility\"],\n      \"conditions\": {\n        \"onlyForUIAdaptation\": true,\n        \"noStorageAllowed\": true,\n        \"noThirdPartySharing\": true\n      }\n    }\n  ]\n}\n</code></pre>"},{"location":"spec/#79-physical-accessibility","title":"7.9 Physical Accessibility","text":"<p>For real-world services (reservations, travel, healthcare), the protocol includes physical accessibility needs:</p> <pre><code>{\n  \"preferences\": {\n    \"accessibility\": {\n      \"physical\": {\n        \"mobility\": {\n          \"wheelchair\": true,\n          \"wheelchairType\": \"electric\",\n          \"requiresAccessibleEntrance\": true,\n          \"requiresElevator\": true\n        },\n        \"serviceAnimal\": {\n          \"has\": true,\n          \"type\": \"guide_dog\",\n          \"name\": \"Max\"\n        },\n        \"allergies\": {\n          \"food\": [\"peanuts\", \"shellfish\"],\n          \"severity\": {\n            \"peanuts\": \"anaphylactic\",\n            \"shellfish\": \"moderate\"\n          },\n          \"epiPenCarrier\": true\n        },\n        \"dietary\": {\n          \"restrictions\": [\"vegetarian\", \"halal\"],\n          \"intolerances\": [\"lactose\"],\n          \"medicalDiets\": [\"diabetic\"]\n        },\n        \"specialAssistance\": {\n          \"earlyBoarding\": true,\n          \"preferredSeating\": \"aisle\",\n          \"companion\": true\n        }\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"spec/#physical-accessibility-components","title":"Physical Accessibility Components","text":"Component Use Case Examples <code>mobility</code> Venue, hotel, transport Wheelchair, walker, accessible entrance <code>serviceAnimal</code> Hotels, restaurants, venues Guide dog, hearing dog <code>medicalDevices</code> Security, MRI, travel Pacemaker, insulin pump, oxygen <code>allergies</code> Restaurants, hotels, events Food, medication, environmental <code>dietary</code> Restaurants, catering, airlines Vegetarian, halal, kosher, diabetic <code>specialAssistance</code> Travel, events, venues Early boarding, interpreter, seating <code>emergencyInfo</code> Healthcare, emergencies Contact, conditions, blood type"},{"location":"spec/#use-case-examples","title":"Use Case Examples","text":"Service Data Used Restaurant Allergies (with severity), dietary restrictions Hotel Wheelchair room, service animal, CPAP, allergies Airline Wheelchair, oxygen, early boarding, dietary, seating Hospital All medical info, allergies, devices, emergency contact Event venue Accessible seating, interpreter, companion"},{"location":"spec/#710-standards-alignment","title":"7.10 Standards Alignment","text":"<p>a2p accessibility preferences align with:</p> <ul> <li>WCAG 2.2 \u2014 Web Content Accessibility Guidelines</li> <li>WAI-ARIA \u2014 Accessible Rich Internet Applications</li> <li>ISO 9241-171 \u2014 Ergonomics of human-system interaction</li> <li>EN 301 549 \u2014 European accessibility requirements</li> <li>ADA \u2014 Americans with Disabilities Act (physical accessibility)</li> <li>EU Accessibility Act \u2014 European accessibility requirements</li> </ul>"},{"location":"spec/#9-children-guardianship","title":"9. Children &amp; Guardianship","text":""},{"location":"spec/#81-overview","title":"8.1 Overview","text":"<p>a2p provides comprehensive support for minor profiles, including:</p> <ul> <li>Age context \u2014 Age group, jurisdiction, consent status</li> <li>Guardianship \u2014 Parent/guardian management</li> <li>Content safety \u2014 Age-appropriate filtering</li> <li>Enforced policies \u2014 Parent-set rules children cannot override</li> </ul>"},{"location":"spec/#82-legal-requirements","title":"8.2 Legal Requirements","text":"Jurisdiction Law Digital Age of Consent EU (default) GDPR Article 8 16 Spain LOPDGDD 14 UK AADC 13 US COPPA 13 Germany GDPR 16 France GDPR 15"},{"location":"spec/#83-age-context","title":"8.3 Age Context","text":"<p>Part of the <code>identity</code> section:</p> <pre><code>{\n  \"identity\": {\n    \"displayName\": \"Jamie\",\n    \"ageContext\": {\n      \"ageGroup\": \"child\",\n      \"ageRange\": \"8-12\",\n      \"isMinor\": true,\n      \"jurisdiction\": \"ES\",\n      \"digitalAgeOfConsent\": 14,\n      \"consentStatus\": \"parental_consent\"\n    }\n  }\n}\n</code></pre>"},{"location":"spec/#age-groups","title":"Age Groups","text":"Group Typical Age Implications <code>infant</code> 0-4 Full guardian control <code>child</code> 5-12 Guardian control, limited autonomy <code>teen</code> 13-17 Increasing autonomy, guardian oversight <code>adult</code> 18+ Full autonomy <code>senior</code> Variable Optional accessibility defaults"},{"location":"spec/#84-guardianship-structure","title":"8.4 Guardianship Structure","text":"<pre><code>{\n  \"guardianship\": {\n    \"status\": \"minor\",\n    \"guardians\": [\n      {\n        \"did\": \"did:a2p:user:parent-alice\",\n        \"relationship\": \"parent\",\n        \"permissions\": [\n          \"manage_profile\",\n          \"approve_proposals\",\n          \"set_policies\",\n          \"manage_content_safety\"\n        ],\n        \"consentGiven\": \"2025-01-01T00:00:00Z\",\n        \"consentMethod\": \"id_verification\",\n        \"isPrimary\": true\n      },\n      {\n        \"did\": \"did:a2p:user:parent-bob\",\n        \"relationship\": \"parent\",\n        \"permissions\": [\"view_activity\", \"approve_proposals\"],\n        \"consentGiven\": \"2025-01-01T00:00:00Z\"\n      }\n    ],\n    \"primaryGuardian\": \"did:a2p:user:parent-alice\"\n  }\n}\n</code></pre>"},{"location":"spec/#guardian-permissions","title":"Guardian Permissions","text":"Permission Description <code>manage_profile</code> Full profile editing <code>approve_proposals</code> Review memory proposals <code>set_policies</code> Define access policies <code>view_activity</code> See activity reports <code>manage_consent</code> Grant/revoke agent consent <code>delete_profile</code> Delete the profile <code>manage_content_safety</code> Set content filters <code>manage_screen_time</code> Set usage limits"},{"location":"spec/#85-content-safety","title":"8.5 Content Safety","text":"<pre><code>{\n  \"guardianship\": {\n    \"contentSafety\": {\n      \"enabled\": true,\n      \"maturityRating\": \"G\",\n      \"filterExplicitContent\": true,\n      \"filterViolence\": true,\n      \"filterProfanity\": true,\n      \"safeSearch\": \"strict\",\n      \"chatRestrictions\": {\n        \"allowStrangers\": false,\n        \"moderatedChats\": true,\n        \"allowPrivateMessages\": false,\n        \"approvedContacts\": [\"did:a2p:user:friend-1\"]\n      },\n      \"purchaseRestrictions\": {\n        \"allowPurchases\": false,\n        \"requireApproval\": true\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"spec/#86-screen-time","title":"8.6 Screen Time","text":"<pre><code>{\n  \"guardianship\": {\n    \"screenTime\": {\n      \"enabled\": true,\n      \"dailyLimit\": \"2h\",\n      \"weekdayLimit\": \"1h30m\",\n      \"weekendLimit\": \"3h\",\n      \"bedtime\": {\n        \"enabled\": true,\n        \"start\": \"20:00\",\n        \"end\": \"07:00\",\n        \"timezone\": \"Europe/Madrid\"\n      },\n      \"breaks\": {\n        \"enabled\": true,\n        \"intervalMinutes\": 30\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"spec/#87-enforced-policies","title":"8.7 Enforced Policies","text":"<p>Parents can set policies that children cannot override:</p> <pre><code>{\n  \"guardianship\": {\n    \"enforcedByGuardian\": [\n      {\n        \"policyId\": \"content_filter_locked\",\n        \"setBy\": \"did:a2p:user:parent-alice\",\n        \"field\": \"contentSafety.filterExplicitContent\",\n        \"value\": true,\n        \"cannotOverride\": true,\n        \"reason\": \"Age-appropriate content only\"\n      },\n      {\n        \"policyId\": \"chat_restriction_locked\",\n        \"setBy\": \"did:a2p:user:parent-alice\",\n        \"field\": \"contentSafety.chatRestrictions.allowStrangers\",\n        \"value\": false,\n        \"cannotOverride\": true\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"spec/#88-family-structure","title":"8.8 Family Structure","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                       FAMILY STRUCTURE                              \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                                     \u2502\n\u2502   Parent Alice                      Parent Bob                      \u2502\n\u2502   (did:a2p:user:alice)             (did:a2p:user:bob)              \u2502\n\u2502   \u251c\u2500\u2500 Primary guardian             \u2514\u2500\u2500 Secondary guardian           \u2502\n\u2502   \u251c\u2500\u2500 Full permissions                 \u2514\u2500\u2500 View + approve           \u2502\n\u2502   \u2502                                                                 \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                           \u2502\n\u2502                  \u2502 manages                                          \u2502\n\u2502                  \u25bc                                                  \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502   \u2502  Child Jamie (did:a2p:user:jamie)                             \u2502 \u2502\n\u2502   \u2502  \u251c\u2500\u2500 ageContext: { ageGroup: \"child\", isMinor: true }        \u2502 \u2502\n\u2502   \u2502  \u251c\u2500\u2500 contentSafety: { maturityRating: \"G\", ... }             \u2502 \u2502\n\u2502   \u2502  \u2514\u2500\u2500 screenTime: { dailyLimit: \"2h\", bedtime: \"20:00\" }      \u2502 \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2502                                                                     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"spec/#89-agent-access-to-minor-profiles","title":"8.9 Agent Access to Minor Profiles","text":"<p>Agents accessing minor profiles MUST:</p> <ol> <li>Check age context before processing</li> <li>Respect content safety settings</li> <li>Not profile or target advertising</li> <li>Minimize data collection (COPPA, GDPR-K)</li> <li>Obtain parental consent for new permissions</li> </ol> <pre><code>{\n  \"accessRequest\": {\n    \"agentDid\": \"did:a2p:agent:game-assistant\",\n    \"targetDid\": \"did:a2p:user:jamie\",\n    \"scopes\": [\"a2p:preferences\", \"a2p:interests\"],\n    \"minorProfile\": true,\n    \"consentRequirements\": {\n      \"requiresGuardianConsent\": true,\n      \"guardianConsentRecord\": {\n        \"guardianDid\": \"did:a2p:user:parent-alice\",\n        \"consentGiven\": \"2025-01-01T00:00:00Z\"\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"spec/#810-privacy-defaults-for-minors","title":"8.10 Privacy Defaults for Minors","text":"<p>Minor profiles have stricter default policies:</p> Setting Default for Adults Default for Minors Profile visibility Public Private Memory proposals Allowed Requires guardian approval Agent access User consent Guardian consent Data retention As declared Minimized Profiling Allowed Prohibited Marketing Allowed Prohibited"},{"location":"spec/#10-consent-access-control","title":"10. Consent &amp; Access Control","text":""},{"location":"spec/#91-consent-levels","title":"9.1 Consent Levels","text":"Level Permissions <code>none</code> No access <code>read_public</code> Public categories only <code>read_scoped</code> Specific scopes only <code>read_full</code> All non-restricted categories <code>propose</code> Can propose new memories <code>write</code> Can directly add memories (rare)"},{"location":"spec/#92-access-policy-structure","title":"9.2 Access Policy Structure","text":"<pre><code>{\n  \"accessPolicies\": [\n    {\n      \"id\": \"policy_001\",\n      \"name\": \"Work Agents\",\n      \"agentPattern\": \"did:a2p:agent:*\",\n      \"agentTags\": [\"work\", \"productivity\"],\n      \"allow\": [\n        \"a2p:preferences.*\",\n        \"a2p:professional.*\"\n      ],\n      \"deny\": [\n        \"a2p:health.*\",\n        \"a2p:financial.*\"\n      ],\n      \"permissions\": [\"read_scoped\", \"propose\"],\n      \"conditions\": {\n        \"requireVerifiedOperator\": true,\n        \"minTrustScore\": 0.7\n      },\n      \"expiry\": null\n    }\n  ]\n}\n</code></pre>"},{"location":"spec/#93-scope-syntax","title":"9.3 Scope Syntax","text":"<p>Scopes use a hierarchical dot notation:</p>"},{"location":"spec/#category-scopes","title":"Category Scopes","text":"<pre><code>a2p:preferences              # All preferences (all memory types)\na2p:preferences.communication # Just communication preferences\na2p:preferences.communication.style # Just style preference\na2p:*                        # All standard categories\next:spotify:*                # All custom Spotify data\n</code></pre>"},{"location":"spec/#memory-type-scopes","title":"Memory Type Scopes","text":"<pre><code>a2p:episodic                 # All episodic memories (across all categories)\na2p:semantic                 # All semantic memories (across all categories)\na2p:procedural               # All procedural memories (across all categories)\n</code></pre>"},{"location":"spec/#combined-scopes","title":"Combined Scopes","text":"<pre><code>a2p:semantic.preferences     # Semantic memories in preferences category\na2p:procedural.professional  # Procedural memories in professional category\na2p:episodic.*               # All episodic memories, all categories (same as a2p:episodic)\n</code></pre>"},{"location":"spec/#scope-resolution-rules","title":"Scope Resolution Rules","text":"<ol> <li>Memory type scope (<code>a2p:episodic</code>) returns all memories of that type, regardless of category</li> <li>Category scope (<code>a2p:preferences</code>) returns all memory types in that category</li> <li>Combined scope (<code>a2p:semantic.preferences</code>) returns memories matching both type and category</li> <li>Default behavior: If no memory type specified in scope, returns all types (backward compatible)</li> </ol>"},{"location":"spec/#94-consent-receipt","title":"9.4 Consent Receipt","text":"<p>When consent is granted, a receipt is generated:</p> <pre><code>{\n  \"receiptId\": \"rcpt_abc123\",\n  \"userDid\": \"did:a2p:user:alice\",\n  \"agentDid\": \"did:a2p:agent:claude\",\n  \"grantedScopes\": [\"a2p:preferences\", \"a2p:interests\"],\n  \"permissions\": [\"read_scoped\", \"propose\"],\n  \"grantedAt\": \"2024-12-24T10:00:00Z\",\n  \"expiresAt\": null,\n  \"proofHash\": \"0x7f3a...\",\n  \"proofLocation\": \"ipfs://Qm...\"\n}\n</code></pre>"},{"location":"spec/#11-agent-integration","title":"11. Agent Integration","text":""},{"location":"spec/#101-agent-profile","title":"10.1 Agent Profile","text":"<p>Agents SHOULD publish an a2p profile describing their behavior:</p> <pre><code>{\n  \"$schema\": \"https://a2p.protocol/schemas/v1/agent-profile.json\",\n  \"id\": \"did:a2p:agent:my-assistant\",\n  \"profileType\": \"agent\",\n\n  \"identity\": {\n    \"name\": \"My Assistant\",\n    \"description\": \"A helpful AI assistant\",\n    \"version\": \"2.1.0\",\n    \"a2aCard\": \"https://myassistant.ai/.well-known/agent.json\"\n  },\n\n  \"operator\": {\n    \"name\": \"Acme AI Inc.\",\n    \"did\": \"did:a2p:org:acme-ai\",\n    \"jurisdiction\": \"EU\",\n    \"contact\": \"privacy@acme-ai.com\",\n    \"privacyPolicy\": \"https://acme-ai.com/privacy\"\n  },\n\n  \"a2pSupport\": {\n    \"protocolVersion\": \"1.0\",\n    \"capabilities\": {\n      \"canReadProfiles\": true,\n      \"canProposeMemories\": true,\n      \"canWriteMemories\": false\n    },\n    \"requestedScopes\": [\n      \"a2p:preferences\",\n      \"a2p:interests\",\n      \"a2p:context\"\n    ],\n    \"dataRetention\": {\n      \"sessionData\": \"24h\",\n      \"persistentData\": \"none\"\n    }\n  },\n\n  \"trustMetrics\": {\n    \"verifiedOperator\": true,\n    \"securityAudit\": {\n      \"auditor\": \"SecurityCorp\",\n      \"date\": \"2024-06-15\",\n      \"report\": \"https://...\"\n    },\n    \"communityScore\": 4.7\n  }\n}\n</code></pre>"},{"location":"spec/#102-discovery","title":"10.2 Discovery","text":"<p>Agent profiles SHOULD be discoverable at: <pre><code>https://{agent-domain}/.well-known/a2p-profile.json\n</code></pre></p>"},{"location":"spec/#103-linking-to-a2a","title":"10.3 Linking to A2A","text":"<p>The a2p agent profile can reference the A2A Agent Card:</p> <pre><code>{\n  \"identity\": {\n    \"a2aCard\": \"https://agent.example/.well-known/agent.json\"\n  }\n}\n</code></pre>"},{"location":"spec/#12-transport-api","title":"12. Transport &amp; API","text":""},{"location":"spec/#121-endpoints","title":"12.1 Endpoints","text":"<p>Base URL: <code>https://{profile-host}/a2p/v1</code></p> Method Endpoint Description <code>GET</code> <code>/profile/{did}</code> Get profile (filtered by auth) <code>POST</code> <code>/profile/{did}/access</code> Request access to profile <code>GET</code> <code>/profile/{did}/memories</code> List memories <code>POST</code> <code>/profile/{did}/memories/propose</code> Propose new memory <code>GET</code> <code>/profile/{did}/proposals</code> List pending proposals <code>POST</code> <code>/profile/{did}/proposals/{id}/review</code> Approve/reject proposal <code>GET</code> <code>/agents/{did}</code> Get agent profile <code>GET</code> <code>/did/{did}</code> Resolve DID to DID document (optional) <p>Note: The <code>/did/{did}</code> endpoint is optional for v0.1.0. Implementations MAY provide this endpoint for DID resolution. See Section 6.5: DID Resolution for details.</p>"},{"location":"spec/#122-authentication","title":"12.2 Authentication","text":"<p>All requests MUST include authentication:</p> <pre><code>POST /a2p/v1/profile/did:a2p:user:gaugid:alice/memories/propose HTTP/1.1\nHost: profiles.example.com\nContent-Type: application/json\nAuthorization: A2P-Signature did=\"did:a2p:agent:gaugid:claude\",sig=\"...\",ts=\"...\"\n\n{\n  \"content\": \"...\",\n  \"category\": \"...\"\n}\n</code></pre>"},{"location":"spec/#113-response-format","title":"11.3 Response Format","text":"<pre><code>{\n  \"success\": true,\n  \"data\": { },\n  \"meta\": {\n    \"requestId\": \"req_abc123\",\n    \"timestamp\": \"2024-12-24T10:00:00Z\"\n  }\n}\n</code></pre>"},{"location":"spec/#114-error-codes","title":"11.4 Error Codes","text":""},{"location":"spec/#1141-protocol-error-codes-required","title":"11.4.1 Protocol Error Codes (Required)","text":"<p>All implementations MUST support these error codes:</p> Code Name Description <code>A2P001</code> <code>unauthorized</code> Invalid or missing authentication <code>A2P002</code> <code>forbidden</code> Insufficient permissions <code>A2P003</code> <code>not_found</code> Profile or resource not found <code>A2P004</code> <code>consent_required</code> User consent needed <code>A2P005</code> <code>rate_limited</code> Too many requests <code>A2P006</code> <code>invalid_scope</code> Requested scope not valid <code>A2P007</code> <code>invalid_timestamp</code> Timestamp outside valid window (\u00b1300s) <code>A2P008</code> <code>nonce_reused</code> Nonce already used (replay attack) <code>A2P009</code> <code>invalid_nonce</code> Nonce format invalid (16-32 alphanumeric) <code>A2P010</code> <code>invalid_did_format</code> DID does not match required format <code>A2P023</code> <code>invalid_memory_type</code> Invalid memory type specified (must be episodic, semantic, or procedural) <code>A2P024</code> <code>memory_type_mismatch</code> Memory stored in wrong array (e.g., semantic memory in episodic array) <code>A2P025</code> <code>memory_type_not_supported</code> Memory type not supported by implementation"},{"location":"spec/#1142-implementation-specific-error-codes-optional","title":"11.4.2 Implementation-Specific Error Codes (Optional)","text":"<p>Implementations MAY use these error codes for additional security features:</p> Code Name Description When to Use <code>A2P011</code> <code>agent_not_registered</code> Agent must register before use If registration is required <code>A2P012</code> <code>agent_not_verified</code> Agent pending verification If verification is required <code>A2P013</code> <code>token_did_mismatch</code> Token DID doesn't match registered DID If registration is required <p>Note: Implementations that don't require agent registration SHOULD NOT return <code>A2P011-A2P013</code>.</p>"},{"location":"spec/#115-implementation-specific-endpoints","title":"11.5 Implementation-Specific Endpoints","text":"<p>Implementations MAY provide additional endpoints beyond those specified in this protocol. These endpoints are not part of the protocol specification and are implementation-specific.</p>"},{"location":"spec/#when-to-use-implementation-specific-endpoints","title":"When to Use Implementation-Specific Endpoints","text":"<p>Implementation-specific endpoints are appropriate for:</p> <ol> <li>User-Facing Operations:</li> <li>User dashboards (e.g., <code>/api/dashboard</code>)</li> <li>Profile management UI (e.g., <code>/api/profiles</code>)</li> <li> <p>Administrative operations (e.g., <code>/api/admin/*</code>)</p> </li> <li> <p>Convenience Features:</p> </li> <li>Token-based profile access (e.g., <code>/a2p/v1/profile</code> without DID in path)</li> <li>Batch operations (e.g., <code>/api/profiles/batch</code>)</li> <li> <p>Analytics endpoints (e.g., <code>/api/analytics</code>)</p> </li> <li> <p>Custom Features:</p> </li> <li>Service-specific functionality</li> <li>Integration with other systems</li> <li>Extended capabilities</li> </ol>"},{"location":"spec/#protocol-vs-implementation-endpoints","title":"Protocol vs Implementation Endpoints","text":"<p>Protocol Endpoints (<code>/a2p/v1/*</code>): - MUST be implemented by all conformant implementations - MUST follow protocol specifications exactly - MUST use A2P-Signature authentication (or connection tokens as specified) - MUST have DID in path (for profile operations, unless using connection tokens) - Are interoperable across all implementations</p> <p>Implementation-Specific Endpoints (<code>/api/*</code>, custom paths): - MAY be implemented by implementations - Can use different authentication (tokens, sessions, etc.) - Can use different URL patterns - Are NOT interoperable (agents cannot rely on them) - SHOULD be clearly documented as implementation-specific</p>"},{"location":"spec/#examples","title":"Examples","text":"<p>Valid Implementation-Specific Endpoints:</p> <pre><code># User-facing dashboard\nGET /api/profiles                    # List user's profiles (token-based)\nGET /api/profiles/:did               # Get specific profile\nPOST /api/profiles                   # Create profile\n\n# Convenience protocol endpoints (optional)\nGET /a2p/v1/profile                 # Profile access without DID in path (token-based)\nPOST /a2p/v1/profile/memories/propose  # Propose memory without DID in path\n\n# Administrative\nGET /api/admin/users                 # Admin operations\nPOST /api/admin/agents/verify       # Agent verification\n</code></pre> <p>Note: While implementations MAY provide token-based protocol endpoints (without DID in path), agents SHOULD use the standard protocol endpoints (with DID in path) for maximum interoperability.</p>"},{"location":"spec/#documentation-requirements","title":"Documentation Requirements","text":"<p>Implementations that provide custom endpoints SHOULD: - Clearly document which endpoints are protocol-standard vs implementation-specific - Use different path prefixes (e.g., <code>/api/*</code> for implementation-specific) - Document authentication methods for custom endpoints - Note interoperability limitations</p>"},{"location":"spec/#interoperability-considerations","title":"Interoperability Considerations","text":"<ul> <li>Agents SHOULD only use protocol-standard endpoints (<code>/a2p/v1/profile/:did</code>)</li> <li>Users MAY use implementation-specific endpoints (e.g., <code>/api/profiles</code>)</li> <li>Conformance tests only verify protocol-standard endpoints</li> <li>Custom endpoints do not affect protocol conformance</li> </ul>"},{"location":"spec/#13-security-considerations","title":"13. Security Considerations","text":""},{"location":"spec/#121-encryption","title":"12.1 Encryption","text":"<ul> <li>At Rest: Profiles MUST be encrypted at rest</li> <li>In Transit: All communications MUST use TLS 1.3+</li> <li>End-to-End: Optional E2E encryption for sensitive categories</li> </ul>"},{"location":"spec/#122-key-management","title":"12.2 Key Management","text":"<p>See Key Management Specification for complete details.</p> <ul> <li>Users SHOULD use hardware-backed keys when available</li> <li>Key rotation MUST be supported with grace periods</li> <li>Recovery methods MUST be available (social, backup, custodian)</li> <li>Key revocation MUST propagate immediately for compromised keys</li> </ul>"},{"location":"spec/#123-privacy","title":"12.3 Privacy","text":"<ul> <li>Agents MUST NOT persist profile data beyond declared retention period</li> <li>Agents MUST NOT share profile data with third parties unless explicitly permitted</li> <li>Users MUST be able to audit all access</li> </ul>"},{"location":"spec/#124-trust-model","title":"12.4 Trust Model","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                    TRUST HIERARCHY                          \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                             \u2502\n\u2502   USER (highest trust)                                      \u2502\n\u2502     \u2502                                                       \u2502\n\u2502     \u251c\u2500\u2500 User's own devices/apps                            \u2502\n\u2502     \u2502                                                       \u2502\n\u2502     \u251c\u2500\u2500 Verified agents (audit passed)                     \u2502\n\u2502     \u2502     \u2502                                                \u2502\n\u2502     \u2502     \u2514\u2500\u2500 With explicit consent                        \u2502\n\u2502     \u2502                                                       \u2502\n\u2502     \u251c\u2500\u2500 Unverified agents (limited access)                 \u2502\n\u2502     \u2502                                                       \u2502\n\u2502     \u2514\u2500\u2500 Unknown agents (no access)                         \u2502\n\u2502                                                             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"spec/#125-replay-attack-protection","title":"12.5 Replay Attack Protection","text":"<p>All authenticated requests MUST include replay protection to prevent attackers from re-submitting captured requests.</p>"},{"location":"spec/#1251-authentication-header-format","title":"12.5.1 Authentication Header Format","text":"<pre><code>Authorization: A2P-Signature \n  did=\"did:a2p:agent:my-agent\",\n  sig=\"&lt;base64-signature&gt;\",\n  ts=\"2024-12-24T10:00:00Z\",\n  nonce=\"abc123xyz789def456\",\n  exp=\"300\"\n</code></pre> Field Required Description <code>did</code> Yes Agent DID <code>sig</code> Yes Base64-encoded signature of request <code>ts</code> Yes ISO 8601 timestamp <code>nonce</code> Yes Unique 16-32 character alphanumeric string <code>exp</code> No Expiration in seconds (default: 300)"},{"location":"spec/#1252-validation-requirements","title":"12.5.2 Validation Requirements","text":"Check Requirement Error Code Timestamp Within \u00b1300 seconds of server time <code>A2P007</code> Nonce Not seen in last 5 minutes <code>A2P008</code> Nonce Format 16-32 alphanumeric characters <code>A2P009</code> Signature Valid for request body + ts + nonce <code>A2P001</code> Expiration Request not expired <code>A2P010</code>"},{"location":"spec/#1253-nonce-storage","title":"12.5.3 Nonce Storage","text":"<p>Servers MUST maintain a nonce cache:</p> <pre><code>{\n  \"nonceCache\": {\n    \"storage\": \"in_memory_or_distributed\",\n    \"ttl\": \"5m\",\n    \"cleanupInterval\": \"1m\",\n    \"maxSize\": \"1000000\"\n  }\n}\n</code></pre>"},{"location":"spec/#1254-signature-computation","title":"12.5.4 Signature Computation","text":"<pre><code>signature = sign(\n  privateKey,\n  sha256(\n    method + \"\\n\" +\n    path + \"\\n\" +\n    timestamp + \"\\n\" +\n    nonce + \"\\n\" +\n    sha256(body)\n  )\n)\n</code></pre>"},{"location":"spec/#126-rate-limiting","title":"12.6 Rate Limiting","text":"<p>To prevent abuse and ensure fair access, all a2p endpoints MUST implement rate limiting.</p>"},{"location":"spec/#1261-global-limits","title":"12.6.1 Global Limits","text":"Limit Type Default Configurable Requests per minute (per agent) 60 Yes Requests per hour (per agent) 1000 Yes Burst allowance 1.5x Yes"},{"location":"spec/#1262-per-operation-limits","title":"12.6.2 Per-Operation Limits","text":"Operation Limit Window Profile reads 100 per hour Memory proposals 20 per hour Memory writes 50 per hour Policy updates 10 per hour Consent requests 30 per hour"},{"location":"spec/#1263-enforcement-algorithm","title":"12.6.3 Enforcement Algorithm","text":"<p>Implementations SHOULD use the Token Bucket algorithm:</p> <pre><code>{\n  \"rateLimiting\": {\n    \"algorithm\": \"token_bucket\",\n    \"bucketSize\": 60,\n    \"refillRate\": \"1/second\",\n    \"burstMultiplier\": 1.5\n  }\n}\n</code></pre>"},{"location":"spec/#1264-rate-limit-headers","title":"12.6.4 Rate Limit Headers","text":"<p>Responses MUST include rate limit headers:</p> <pre><code>HTTP/1.1 200 OK\nX-RateLimit-Limit: 60\nX-RateLimit-Remaining: 45\nX-RateLimit-Reset: 1703419200\n</code></pre>"},{"location":"spec/#1265-rate-limit-exceeded-response","title":"12.6.5 Rate Limit Exceeded Response","text":"<pre><code>HTTP/1.1 429 Too Many Requests\nRetry-After: 30\nX-RateLimit-Limit: 60\nX-RateLimit-Remaining: 0\nX-RateLimit-Reset: 1703419200\n\n{\n  \"error\": {\n    \"code\": \"A2P005\",\n    \"message\": \"Rate limit exceeded\",\n    \"retryAfter\": 30\n  }\n}\n</code></pre>"},{"location":"spec/#1266-ddos-mitigation","title":"12.6.6 DDoS Mitigation","text":"<p>For high-load scenarios:</p> <ul> <li>Implement IP-based rate limiting at edge</li> <li>Use CAPTCHA for suspicious patterns</li> <li>Temporarily block repeated offenders</li> <li>Enable geographic restrictions if needed</li> <li>Monitor for distributed attack patterns</li> </ul>"},{"location":"spec/#127-security-levels","title":"12.7 Security Levels","text":"<p>The a2p protocol defines a two-level security model to ensure baseline security while allowing implementations to add additional protections.</p>"},{"location":"spec/#1271-level-1-protocol-requirements-mandatory","title":"12.7.1 Level 1: Protocol Requirements (MANDATORY)","text":"<p>All a2p-compliant implementations MUST:</p> <ol> <li>Validate DID Format</li> <li>Validate all DIDs against the patterns defined in Section 4.4</li> <li>Return <code>A2P010</code> for invalid DID format</li> <li> <p>Reject malformed requests before further processing</p> </li> <li> <p>Require Authentication</p> </li> <li>Require authentication tokens on all protocol endpoints</li> <li>Validate token format and signature</li> <li> <p>Return <code>A2P001</code> for missing or invalid authentication</p> </li> <li> <p>Implement Replay Protection</p> </li> <li>Validate timestamps within \u00b1300 seconds</li> <li>Track nonces to prevent replay attacks</li> <li> <p>Return <code>A2P007-A2P009</code> for replay protection failures</p> </li> <li> <p>Return Standard Error Codes</p> </li> <li>Use error codes <code>A2P001-A2P010</code> as defined in Section 11.4.1</li> </ol>"},{"location":"spec/#1272-level-2-implementation-specific-optional","title":"12.7.2 Level 2: Implementation-Specific (OPTIONAL)","text":"<p>Implementations MAY add additional security layers:</p> Feature Description Error Code Agent Registration Require agents to register before access <code>A2P011</code> Agent Verification Require manual verification of registered agents <code>A2P012</code> Token-DID Binding Verify token DID matches registered agent DID <code>A2P013</code> Enhanced Rate Limiting Stricter limits than protocol minimum <code>A2P005</code> Audit Logging Detailed access logs for compliance N/A IP Whitelisting Restrict access by IP address <code>A2P002</code> Role-Based Access Define agent roles with different permissions <code>A2P002</code>"},{"location":"spec/#1273-implementation-guidance","title":"12.7.3 Implementation Guidance","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502              SECURITY VALIDATION FLOW                       \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502                                                             \u2502\n\u2502   Request \u2500\u2500\u2500\u25ba Token Valid? \u2500\u2500NO\u2500\u2500\u25ba A2P001 (Unauthorized)   \u2502\n\u2502                    \u2502                                        \u2502\n\u2502                   YES                                       \u2502\n\u2502                    \u25bc                                        \u2502\n\u2502              DID Format Valid? \u2500NO\u2500\u25ba A2P010 (Invalid DID)   \u2502\n\u2502                    \u2502                                        \u2502\n\u2502                   YES                                       \u2502\n\u2502                    \u25bc                                        \u2502\n\u2502              Replay Check OK? \u2500NO\u2500\u2500\u25ba A2P007-009             \u2502\n\u2502                    \u2502                                        \u2502\n\u2502                   YES                                       \u2502\n\u2502                    \u25bc                                        \u2502\n\u2502         [Optional: Registration Check]                      \u2502\n\u2502              Agent Registered? \u2500NO\u2500\u25ba A2P011 (Not Registered)\u2502\n\u2502                    \u2502                                        \u2502\n\u2502                   YES                                       \u2502\n\u2502                    \u25bc                                        \u2502\n\u2502         [Optional: Verification Check]                      \u2502\n\u2502              Agent Verified? \u2500\u2500NO\u2500\u2500\u25ba A2P012 (Not Verified)  \u2502\n\u2502                    \u2502                                        \u2502\n\u2502                   YES                                       \u2502\n\u2502                    \u25bc                                        \u2502\n\u2502              Process Request                                \u2502\n\u2502                                                             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre> <p>Implementations SHOULD document which optional security features they implement.</p>"},{"location":"spec/#14-offline-support","title":"14. Offline Support","text":""},{"location":"spec/#131-overview","title":"13.1 Overview","text":"<p>a2p implementations SHOULD support offline operation to ensure users can access their profiles without connectivity.</p>"},{"location":"spec/#132-profile-caching","title":"13.2 Profile Caching","text":""},{"location":"spec/#1321-cache-requirements","title":"13.2.1 Cache Requirements","text":"Requirement Specification Storage Encrypted local storage Freshness Configurable TTL (default: 24h) Validation Signature verification on load Sync Background sync when online"},{"location":"spec/#1322-cache-schema","title":"13.2.2 Cache Schema","text":"<pre><code>{\n  \"cache\": {\n    \"profileDid\": \"did:a2p:user:alice\",\n    \"cachedAt\": \"2024-12-24T10:00:00Z\",\n    \"expiresAt\": \"2024-12-25T10:00:00Z\",\n    \"version\": \"1.0\",\n    \"hash\": \"sha256:...\",\n    \"signature\": \"...\",\n    \"data\": { }\n  }\n}\n</code></pre>"},{"location":"spec/#133-proposal-queuing","title":"13.3 Proposal Queuing","text":"<p>When offline, agents can queue proposals for later submission:</p> <pre><code>{\n  \"pendingQueue\": {\n    \"proposals\": [\n      {\n        \"queuedAt\": \"2024-12-24T10:00:00Z\",\n        \"targetUser\": \"did:a2p:user:alice\",\n        \"proposal\": { },\n        \"retryCount\": 0,\n        \"maxRetries\": 3\n      }\n    ],\n    \"lastSync\": \"2024-12-24T09:00:00Z\"\n  }\n}\n</code></pre>"},{"location":"spec/#134-sync-protocol","title":"13.4 Sync Protocol","text":""},{"location":"spec/#1341-sync-process","title":"13.4.1 Sync Process","text":"<pre><code>1. Client comes online\n2. Compare local version with server\n3. If server newer: pull changes\n4. If local changes: push pending proposals\n5. Resolve conflicts\n6. Update cache\n</code></pre>"},{"location":"spec/#1342-conflict-resolution","title":"13.4.2 Conflict Resolution","text":"Conflict Type Resolution Memory added both Keep both, mark for review Policy changed both Server wins, notify user Memory deleted locally Delete on server Memory modified both Server wins, keep local as proposal"},{"location":"spec/#135-offline-capabilities","title":"13.5 Offline Capabilities","text":"Feature Offline Support Notes View profile \u2705 Full From cache Edit memories \u26a0\ufe0f Queued Synced when online Add memories \u26a0\ufe0f Queued Synced when online Delete memories \u26a0\ufe0f Queued Synced when online Update policies \u274c No Requires online Review proposals \u26a0\ufe0f Partial Can approve locally, sync later Agent access \u274c No Requires profile fetch"},{"location":"spec/#15-extensibility","title":"15. Extensibility","text":""},{"location":"spec/#141-custom-categories","title":"14.1 Custom Categories","text":"<p>Developers can define custom categories using the <code>ext:</code> namespace:</p> <pre><code>{\n  \"ext:myapp\": {\n    \"$schema\": \"https://myapp.com/a2p/schema.json\",\n    \"customField1\": \"value\",\n    \"customField2\": 123\n  }\n}\n</code></pre>"},{"location":"spec/#142-schema-registry","title":"14.2 Schema Registry","text":"<p>Custom schemas SHOULD be registered:</p> <pre><code>{\n  \"schemaRegistry\": {\n    \"ext:spotify\": {\n      \"version\": \"1.0\",\n      \"spec\": \"https://spotify.com/a2p/schema/v1\",\n      \"maintainer\": \"did:a2p:org:spotify\"\n    }\n  }\n}\n</code></pre>"},{"location":"spec/#143-storage-backends","title":"14.3 Storage Backends","text":"<p>The protocol is storage-agnostic. Implementations MAY use: - Local filesystem - Solid Pods - IPFS / Ceramic - Cloud storage (encrypted) - Custom backends</p>"},{"location":"spec/#appendix-a-json-schemas","title":"Appendix A: JSON Schemas","text":"<p>See schemas.md for complete JSON Schema definitions.</p>"},{"location":"spec/#appendix-b-example-implementations","title":"Appendix B: Example Implementations","text":"<p>See examples/ for reference implementations.</p>"},{"location":"spec/#appendix-c-changelog","title":"Appendix C: Changelog","text":"Version Date Changes 1.0.0-draft 2024-12 Initial draft specification"},{"location":"spec/#references","title":"References","text":"<ul> <li>W3C Decentralized Identifiers (DIDs)</li> <li>W3C Verifiable Credentials</li> <li>Google A2A Protocol</li> <li>Anthropic MCP</li> <li>Solid Project</li> </ul> <p>Authors: a2p Protocol Team License: CC BY 4.0</p>"},{"location":"spec/accessibility/","title":"Accessibility Specification","text":"<p>a2p includes standardized accessibility preferences for adaptive UI.</p>"},{"location":"spec/accessibility/#overview","title":"Overview","text":"<p>Accessibility preferences enable services to automatically adapt interfaces for users with disabilities. Part of <code>a2p:preferences.accessibility</code>.</p>"},{"location":"spec/accessibility/#categories","title":"Categories","text":"Category Description Vision Screen reader, magnification, color blindness Hearing Captions, visual alerts, sign language Motor Keyboard-only, voice control, switch access Cognitive Simplified UI, reading assistance Sensory Reduce flashing, quiet mode Physical Wheelchair, allergies, dietary, service animal"},{"location":"spec/accessibility/#vision-preferences","title":"Vision Preferences","text":"<pre><code>{\n  \"vision\": {\n    \"screenReader\": true,\n    \"magnification\": 1.5,\n    \"highContrast\": \"high\",\n    \"colorVision\": {\n      \"type\": \"deuteranopia\",\n      \"severity\": \"moderate\"\n    },\n    \"prefersDarkMode\": true,\n    \"fontSize\": \"large\",\n    \"reducedMotion\": true\n  }\n}\n</code></pre>"},{"location":"spec/accessibility/#color-vision-types","title":"Color Vision Types","text":"Type Description UI Adaptation <code>protanopia</code> Red-blind Avoid red/green <code>deuteranopia</code> Green-blind Avoid red/green <code>tritanopia</code> Blue-blind Avoid blue/yellow <code>achromatopsia</code> Color blind Use patterns"},{"location":"spec/accessibility/#hearing-preferences","title":"Hearing Preferences","text":"<pre><code>{\n  \"hearing\": {\n    \"deaf\": true,\n    \"captions\": {\n      \"enabled\": true,\n      \"style\": \"large\"\n    },\n    \"signLanguage\": \"ASL\",\n    \"prefersVisualAlerts\": true\n  }\n}\n</code></pre>"},{"location":"spec/accessibility/#motor-preferences","title":"Motor Preferences","text":"<pre><code>{\n  \"motor\": {\n    \"keyboardOnly\": true,\n    \"reducedMotion\": true,\n    \"largeClickTargets\": true,\n    \"extendedTimeouts\": true\n  }\n}\n</code></pre>"},{"location":"spec/accessibility/#cognitive-preferences","title":"Cognitive Preferences","text":"<pre><code>{\n  \"cognitive\": {\n    \"simplifiedUI\": true,\n    \"readingAssistance\": {\n      \"dyslexiaFont\": true,\n      \"lineSpacing\": \"wide\"\n    },\n    \"plainLanguage\": true\n  }\n}\n</code></pre>"},{"location":"spec/accessibility/#generative-ui-integration","title":"Generative UI Integration","text":"<p>Services with generative UI can adapt automatically:</p> <ol> <li>Request <code>a2p:preferences.accessibility</code></li> <li>Receive user preferences</li> <li>Generate adapted interface</li> <li>Result: Personalized accessible UI</li> </ol>"},{"location":"spec/accessibility/#physical-accessibility","title":"Physical Accessibility","text":"<p>For real-world services (restaurants, hotels, travel, hospitals):</p> <pre><code>{\n  \"physical\": {\n    \"mobility\": {\n      \"wheelchair\": true,\n      \"wheelchairType\": \"electric\",\n      \"requiresAccessibleEntrance\": true\n    },\n    \"serviceAnimal\": {\n      \"has\": true,\n      \"type\": \"guide_dog\",\n      \"name\": \"Max\"\n    },\n    \"allergies\": {\n      \"food\": [\"peanuts\", \"shellfish\"],\n      \"severity\": { \"peanuts\": \"anaphylactic\" },\n      \"epiPenCarrier\": true\n    },\n    \"dietary\": {\n      \"restrictions\": [\"vegetarian\", \"halal\"],\n      \"intolerances\": [\"lactose\"]\n    },\n    \"specialAssistance\": {\n      \"earlyBoarding\": true,\n      \"preferredSeating\": \"aisle\"\n    }\n  }\n}\n</code></pre>"},{"location":"spec/accessibility/#use-cases","title":"Use Cases","text":"Service Uses Restaurant Allergies, dietary Hotel Wheelchair room, service animal Airline Early boarding, seating, dietary Hospital All medical info, allergies"},{"location":"spec/accessibility/#standards-alignment","title":"Standards Alignment","text":"<ul> <li>WCAG 2.2 \u2014 Web Content Accessibility Guidelines</li> <li>WAI-ARIA \u2014 Accessible Rich Internet Applications</li> <li>EN 301 549 \u2014 European accessibility standard</li> <li>ADA \u2014 Americans with Disabilities Act</li> </ul>"},{"location":"spec/accessibility/#next-steps","title":"Next Steps","text":"<ul> <li>Children &amp; Guardianship</li> <li>Profiles</li> </ul>"},{"location":"spec/consent/","title":"Consent &amp; Policies Specification","text":"<p>This document specifies access control and consent management.</p>"},{"location":"spec/consent/#consent-policies","title":"Consent Policies","text":"<p>Users define policies that control agent access.</p>"},{"location":"spec/consent/#policy-structure","title":"Policy Structure","text":"<pre><code>{\n  \"id\": \"policy_work\",\n  \"name\": \"Work Assistants\",\n  \"agentPattern\": \"did:a2p:agent:local:work-*\",\n  \"allow\": [\n    \"a2p:preferences.*\",\n    \"a2p:professional.*\"\n  ],\n  \"deny\": [\n    \"a2p:health.*\",\n    \"a2p:financial.*\"\n  ],\n  \"permissions\": [\"read_scoped\", \"propose\"],\n  \"conditions\": {\n    \"requirePurpose\": true,\n    \"maxRetention\": \"24h\"\n  },\n  \"validFrom\": \"2025-01-01T00:00:00Z\",\n  \"validUntil\": \"2026-01-01T00:00:00Z\"\n}\n</code></pre>"},{"location":"spec/consent/#permissions","title":"Permissions","text":"Permission Description <code>read_public</code> Read public information only <code>read_scoped</code> Read allowed categories <code>read_full</code> Read entire profile <code>propose</code> Propose new memories <code>write</code> Direct write access (rare)"},{"location":"spec/consent/#purpose-requirement","title":"Purpose Requirement","text":"<p>Access requests must include purpose:</p> <pre><code>{\n  \"purpose\": {\n    \"type\": \"personalization\",\n    \"description\": \"Tailor responses to preferences\",\n    \"legalBasis\": \"consent\",\n    \"retention\": \"session_only\",\n    \"automated\": {\n      \"decisionMaking\": false,\n      \"profiling\": false\n    }\n  }\n}\n</code></pre>"},{"location":"spec/consent/#consent-receipts","title":"Consent Receipts","text":"<p>When access is granted:</p> <pre><code>{\n  \"receiptId\": \"rcpt_abc123\",\n  \"userDid\": \"did:a2p:user:local:alice\",\n  \"agentDid\": \"did:a2p:agent:local:assistant\",\n  \"grantedScopes\": [\"a2p:preferences.*\"],\n  \"deniedScopes\": [\"a2p:health.*\"],\n  \"purpose\": { ... },\n  \"grantedAt\": \"2025-12-25T10:00:00Z\",\n  \"expiresAt\": \"2025-12-26T10:00:00Z\"\n}\n</code></pre>"},{"location":"spec/consent/#next-steps","title":"Next Steps","text":"<ul> <li>Security \u2014 Security details</li> <li>Profiles \u2014 Profile structure</li> </ul>"},{"location":"spec/guardianship/","title":"Children &amp; Guardianship","text":"<p>a2p provides comprehensive support for minor profiles.</p>"},{"location":"spec/guardianship/#overview","title":"Overview","text":"<ul> <li>Age context \u2014 Age group, jurisdiction</li> <li>Guardianship \u2014 Parent/guardian management  </li> <li>Content safety \u2014 Age-appropriate filtering</li> <li>Enforced policies \u2014 Parent-set rules</li> </ul>"},{"location":"spec/guardianship/#legal-requirements","title":"Legal Requirements","text":"Jurisdiction Law Age of Consent EU (default) GDPR Art. 8 16 Spain LOPDGDD 14 UK AADC 13 US COPPA 13"},{"location":"spec/guardianship/#age-context","title":"Age Context","text":"<pre><code>{\n  \"identity\": {\n    \"ageContext\": {\n      \"ageGroup\": \"child\",\n      \"ageRange\": \"8-12\",\n      \"isMinor\": true,\n      \"jurisdiction\": \"ES\",\n      \"consentStatus\": \"parental_consent\"\n    }\n  }\n}\n</code></pre>"},{"location":"spec/guardianship/#age-groups","title":"Age Groups","text":"Group Typical Age <code>infant</code> 0-4 <code>child</code> 5-12 <code>teen</code> 13-17 <code>adult</code> 18+"},{"location":"spec/guardianship/#guardianship","title":"Guardianship","text":"<pre><code>{\n  \"guardianship\": {\n    \"status\": \"minor\",\n    \"guardians\": [\n      {\n        \"did\": \"did:a2p:user:local:parent-alice\",\n        \"relationship\": \"parent\",\n        \"permissions\": [\"manage_profile\", \"set_policies\"],\n        \"isPrimary\": true\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"spec/guardianship/#permissions","title":"Permissions","text":"Permission Description <code>manage_profile</code> Full editing <code>approve_proposals</code> Review memories <code>set_policies</code> Define access rules <code>manage_content_safety</code> Set filters <code>manage_screen_time</code> Usage limits"},{"location":"spec/guardianship/#content-safety","title":"Content Safety","text":"<pre><code>{\n  \"contentSafety\": {\n    \"enabled\": true,\n    \"maturityRating\": \"G\",\n    \"filterExplicitContent\": true,\n    \"safeSearch\": \"strict\",\n    \"chatRestrictions\": {\n      \"allowStrangers\": false\n    }\n  }\n}\n</code></pre>"},{"location":"spec/guardianship/#screen-time","title":"Screen Time","text":"<pre><code>{\n  \"screenTime\": {\n    \"enabled\": true,\n    \"dailyLimit\": \"2h\",\n    \"bedtime\": {\n      \"start\": \"20:00\",\n      \"end\": \"07:00\"\n    }\n  }\n}\n</code></pre>"},{"location":"spec/guardianship/#enforced-policies","title":"Enforced Policies","text":"<p>Parents can lock settings:</p> <pre><code>{\n  \"enforcedByGuardian\": [\n    {\n      \"field\": \"contentSafety.filterExplicitContent\",\n      \"value\": true,\n      \"cannotOverride\": true\n    }\n  ]\n}\n</code></pre>"},{"location":"spec/guardianship/#privacy-defaults","title":"Privacy Defaults","text":"Setting Adults Minors Visibility Public Private Proposals Allowed Guardian approval Profiling Allowed Prohibited"},{"location":"spec/guardianship/#next-steps","title":"Next Steps","text":"<ul> <li>Accessibility</li> <li>Consent</li> </ul>"},{"location":"spec/memories/","title":"Memory Specification","text":"<p>Protocol Version: 0.1.0 Last Updated: January 2026</p> <p>This document specifies memory types, categories, proposals, and consolidation.</p>"},{"location":"spec/memories/#memory-types","title":"Memory Types","text":"<p>The a2p protocol supports three memory types that organize memories by how they are stored, retrieved, and used:</p>"},{"location":"spec/memories/#episodic-memory","title":"Episodic Memory","text":"<p>Purpose: Store specific events and interactions with temporal context.</p> <p>Characteristics: - Time-stamped events - Contextual information - Event-specific details - Historical record of interactions</p> <p>Examples: - \"User asked about Python async on 2026-01-15\" - \"User completed onboarding on 2026-01-10\" - \"User mentioned interest in Rust during conversation\"</p>"},{"location":"spec/memories/#semantic-memory","title":"Semantic Memory","text":"<p>Purpose: Store abstracted knowledge and facts about the user.</p> <p>Characteristics: - Abstracted from multiple episodes - Timeless information - General knowledge - Factual statements</p> <p>Examples: - \"User is a Python expert\" (abstracted from many episodes) - \"User prefers technical explanations\" (generalized preference) - \"User works in distributed systems\" (factual knowledge)</p>"},{"location":"spec/memories/#procedural-memory","title":"Procedural Memory","text":"<p>Purpose: Store behavioral patterns and how-to information.</p> <p>Characteristics: - Pattern-based - Behavioral information - Preference-driven - \"How the user does things\"</p> <p>Examples: - \"User prefers code examples with type hints\" - \"User always asks for pros/cons before decisions\" - \"User follows a morning routine: coffee, emails, coding\"</p>"},{"location":"spec/memories/#memory-types-and-categories","title":"Memory Types and Categories","text":"<p>Important: Memory types (<code>episodic</code>, <code>semantic</code>, <code>procedural</code>) are orthogonal to memory categories (<code>a2p:preferences</code>, <code>a2p:professional</code>, etc.).</p> <ul> <li>Memory Type: Determines how the memory is stored, retrieved, and used</li> <li>Memory Category: Determines the domain/context of the memory</li> </ul> <p>A memory can be: - Semantic memory in the preferences category - Procedural memory in the professional category - Episodic memory in the interests category</p> <p>Example: <pre><code>{\n  \"memories\": {\n    \"a2p:semantic\": [\n      {\n        \"id\": \"mem_001\",\n        \"content\": \"User prefers dark mode for coding\",\n        \"category\": \"a2p:preferences.ui\",\n        \"confidence\": 0.9,\n        \"status\": \"approved\"\n      }\n    ],\n    \"a2p:procedural\": [\n      {\n        \"id\": \"mem_002\",\n        \"content\": \"User always asks for pros/cons before decisions\",\n        \"category\": \"a2p:preferences.communication\",\n        \"confidence\": 0.85,\n        \"status\": \"approved\"\n      }\n    ],\n    \"a2p:episodic\": [\n      {\n        \"id\": \"mem_003\",\n        \"content\": \"User asked about Python async on 2026-01-15\",\n        \"category\": \"a2p:interests.technology\",\n        \"confidence\": 0.8,\n        \"status\": \"approved\"\n      }\n    ]\n  }\n}\n</code></pre></p>"},{"location":"spec/memories/#memory-categories","title":"Memory Categories","text":""},{"location":"spec/memories/#standard-namespace-a2p","title":"Standard Namespace (a2p:)","text":"Category Description Sensitivity <code>a2p:preferences</code> User preferences standard <code>a2p:interests</code> Topics, hobbies standard <code>a2p:professional</code> Work context standard <code>a2p:health</code> Health information restricted <code>a2p:financial</code> Financial context restricted <code>a2p:relationships</code> Social connections sensitive <code>a2p:episodic</code> Episodic memories - specific events, interactions standard <code>a2p:semantic</code> Semantic memories - general knowledge, facts, abstracted information standard <code>a2p:procedural</code> Procedural memories - behavioral patterns, how-to information, preferences standard <code>a2p:context</code> Current context standard"},{"location":"spec/memories/#extension-namespace-ext","title":"Extension Namespace (ext:)","text":"<p>Third parties register custom categories:</p> <pre><code>ext:spotify:music.preferences\next:github:coding.style\n</code></pre>"},{"location":"spec/memories/#memory-structure","title":"Memory Structure","text":"<pre><code>{\n  \"id\": \"mem_abc123\",\n  \"content\": \"Prefers TypeScript for new projects\",\n  \"category\": \"a2p:professional.preferences\",\n  \"source\": {\n    \"type\": \"proposal\",\n    \"agentDid\": \"did:a2p:agent:local:assistant\",\n    \"sessionId\": \"sess_xyz\",\n    \"timestamp\": \"2025-12-20T14:30:00Z\"\n  },\n  \"confidence\": 0.88,\n  \"status\": \"approved\",\n  \"sensitivity\": \"standard\",\n  \"scope\": [\"work\"],\n  \"metadata\": {\n    \"approvedAt\": \"2025-12-20T14:35:00Z\",\n    \"useCount\": 5,\n    \"lastUsed\": \"2025-12-25T10:00:00Z\"\n  }\n}\n</code></pre> <p>Note: The memory type (episodic, semantic, procedural) is determined by which array it's stored in (<code>a2p:episodic</code>, <code>a2p:semantic</code>, or <code>a2p:procedural</code>), not by a field in the memory object itself.</p>"},{"location":"spec/memories/#proposals","title":"Proposals","text":""},{"location":"spec/memories/#proposal-structure","title":"Proposal Structure","text":"<pre><code>{\n  \"id\": \"prop_xyz789\",\n  \"agentDid\": \"did:a2p:agent:local:assistant\",\n  \"content\": \"User prefers detailed explanations\",\n  \"category\": \"a2p:preferences.communication\",\n  \"memory_type\": \"procedural\",\n  \"confidence\": 0.85,\n  \"context\": \"Based on follow-up questions in conversation\",\n  \"status\": \"pending\",\n  \"proposedAt\": \"2025-12-25T10:00:00Z\",\n  \"expiresAt\": \"2025-01-01T10:00:00Z\"\n}\n</code></pre> <p>Note: The <code>memory_type</code> field specifies which type of memory is being proposed (<code>episodic</code>, <code>semantic</code>, or <code>procedural</code>). If not specified, defaults to <code>episodic</code> for backward compatibility.</p>"},{"location":"spec/memories/#proposal-status","title":"Proposal Status","text":"Status Description <code>pending</code> Awaiting review <code>approved</code> User approved <code>rejected</code> User rejected <code>expired</code> Not reviewed in time <code>edited</code> Approved with edits"},{"location":"spec/memories/#memory-type-classification","title":"Memory Type Classification","text":"<p>Agents need to classify memories into types when proposing them. Use this decision tree:</p> <ol> <li>Is it a specific event or interaction with a timestamp/context?</li> <li>YES \u2192 <code>episodic</code></li> <li> <p>NO \u2192 Continue</p> </li> <li> <p>Is it abstracted/generalized knowledge derived from multiple episodes?</p> </li> <li>YES \u2192 <code>semantic</code></li> <li> <p>NO \u2192 Continue</p> </li> <li> <p>Is it a behavioral pattern, preference, or \"how-to\" information?</p> </li> <li>YES \u2192 <code>procedural</code></li> <li>NO \u2192 Default to <code>episodic</code></li> </ol>"},{"location":"spec/memories/#classification-examples","title":"Classification Examples","text":"Content Type Reasoning \"User asked about Python async on 2026-01-15\" <code>episodic</code> Specific event with timestamp \"User completed onboarding on 2026-01-10\" <code>episodic</code> Specific event \"User is a Python expert\" <code>semantic</code> Abstracted from many episodes \"User prefers technical explanations\" <code>semantic</code> Generalized preference \"User works in distributed systems\" <code>semantic</code> Factual knowledge \"User prefers code examples with type hints\" <code>procedural</code> Behavioral pattern \"User always asks for pros/cons before decisions\" <code>procedural</code> Behavioral pattern \"User follows morning routine: coffee, emails, coding\" <code>procedural</code> How-to/pattern"},{"location":"spec/memories/#consolidation","title":"Consolidation","text":"<p>Memories can be consolidated to reduce redundancy.</p>"},{"location":"spec/memories/#merge-example","title":"Merge Example","text":"<pre><code>// Before\n{ \"content\": \"Likes jazz music\" }\n{ \"content\": \"Enjoys electronic music\" }\n\n// After consolidation\n{ \n  \"content\": \"Music preferences: jazz, electronic\",\n  \"consolidatedFrom\": [\"mem_1\", \"mem_2\"]\n}\n</code></pre>"},{"location":"spec/memories/#memory-reclassification","title":"Memory Reclassification","text":"<p>Memories can be reclassified from one type to another:</p> <p>Reclassification Methods: 1. User Action: User manually reclassifies in dashboard 2. Agent Proposal: Agent proposes reclassification (requires approval) 3. Automatic Promotion: System can promote episodic \u2192 semantic based on:    - High confidence (&gt;0.9)    - High use count (&gt;10)    - Multiple similar episodes</p>"},{"location":"spec/memories/#next-steps","title":"Next Steps","text":"<ul> <li>Consent \u2014 Access control</li> <li>Profiles \u2014 Profile structure</li> </ul>"},{"location":"spec/overview/","title":"Specification Overview","text":"<p>This is the technical specification for the a2p (Agent 2 Profile) protocol.</p>"},{"location":"spec/overview/#specification-documents","title":"Specification Documents","text":"Document Description Profiles Profile structure and types Memories Memory categories and proposals Consent &amp; Policies Access control and consent Security Authentication and security Schemas JSON Schema definitions"},{"location":"spec/overview/#protocol-version","title":"Protocol Version","text":"<p>Current Version: 0.1.0 (Initial Release) Status: Initial Release Last Updated: January 2026</p> <p>Current Version: 0.1.0 (Initial Release) Status: Initial Release Last Updated: January 2026</p> Component Version Protocol 0.1 Profile Schema 0.1 API v1"},{"location":"spec/overview/#transport","title":"Transport","text":""},{"location":"spec/overview/#base-url","title":"Base URL","text":"<pre><code>https://gateway.example.com/a2p/v1\n</code></pre>"},{"location":"spec/overview/#content-type","title":"Content Type","text":"<p>All requests and responses use JSON:</p> <pre><code>Content-Type: application/json\n</code></pre>"},{"location":"spec/overview/#version-header","title":"Version Header","text":"<pre><code>A2P-Version: 1.0\n</code></pre>"},{"location":"spec/overview/#endpoints","title":"Endpoints","text":""},{"location":"spec/overview/#protocol-endpoints-required","title":"Protocol Endpoints (Required)","text":"<p>Profile Operations:</p> Method Endpoint Description GET <code>/profile/{did}</code> Get profile POST <code>/profile/{did}/access</code> Request access GET <code>/profile/{did}/memories</code> List memories POST <code>/profile/{did}/memories/propose</code> Propose memory GET <code>/profile/{did}/proposals</code> List proposals POST <code>/profile/{did}/proposals/{id}/review</code> Review proposal <p>Agent Operations:</p> Method Endpoint Description GET <code>/agents/{did}</code> Get agent profile"},{"location":"spec/overview/#implementation-specific-endpoints","title":"Implementation-Specific Endpoints","text":"<p>Implementations MAY provide additional endpoints for user-facing operations, administrative functions, or convenience features. These endpoints are not part of the protocol specification and should be clearly documented.</p> <p>Examples: - <code>/api/profiles</code> - User-facing profile management (token-based) - <code>/api/dashboard</code> - Dashboard data - <code>/a2p/v1/profile</code> - Convenience endpoint without DID in path (token-based)</p> <p>Note: While implementations MAY provide token-based protocol endpoints (without DID in path), agents SHOULD use the standard protocol endpoints (with DID in path) for maximum interoperability.</p> <p>See API Reference for complete details.</p>"},{"location":"spec/overview/#authentication","title":"Authentication","text":"<p>All requests must include a signature header:</p> <pre><code>Authorization: A2P-Signature \n  did=\"did:a2p:agent:local:my-agent\",\n  sig=\"&lt;base64-signature&gt;\",\n  ts=\"2025-12-25T10:00:00Z\",\n  nonce=\"abc123xyz789\"\n</code></pre>"},{"location":"spec/overview/#signature-computation","title":"Signature Computation","text":"<pre><code>signature = sign(privateKey, sha256(\n  method + \"\\n\" +\n  path + \"\\n\" +\n  timestamp + \"\\n\" +\n  nonce + \"\\n\" +\n  sha256(body)\n))\n</code></pre>"},{"location":"spec/overview/#error-responses","title":"Error Responses","text":""},{"location":"spec/overview/#error-format","title":"Error Format","text":"<pre><code>{\n  \"error\": {\n    \"code\": \"A2P003\",\n    \"message\": \"Profile not found\",\n    \"details\": { ... }\n  }\n}\n</code></pre>"},{"location":"spec/overview/#error-codes","title":"Error Codes","text":"Code HTTP Description A2P001 401 Authentication failed A2P002 403 Access denied A2P003 404 Resource not found A2P004 400 Invalid request A2P005 429 Rate limited A2P006 400 Validation error A2P007 401 Timestamp invalid"},{"location":"spec/overview/#rate-limiting","title":"Rate Limiting","text":""},{"location":"spec/overview/#default-limits","title":"Default Limits","text":"Limit Value Requests per minute 60 Requests per hour 1000 Burst allowance 1.5x"},{"location":"spec/overview/#response-headers","title":"Response Headers","text":"<pre><code>X-RateLimit-Limit: 60\nX-RateLimit-Remaining: 45\nX-RateLimit-Reset: 1640000000\n</code></pre>"},{"location":"spec/overview/#conformance","title":"Conformance","text":"<p>Implementations must:</p> <ol> <li>\u2705 Support all required endpoints</li> <li>\u2705 Validate signatures correctly</li> <li>\u2705 Enforce consent policies</li> <li>\u2705 Require purpose in access requests</li> <li>\u2705 Generate consent receipts</li> <li>\u2705 Support standard memory categories</li> </ol>"},{"location":"spec/overview/#next-steps","title":"Next Steps","text":"<ul> <li>Profiles \u2014 Profile specification</li> <li>Consent \u2014 Consent and policies</li> <li>Security \u2014 Security details</li> </ul>"},{"location":"spec/profiles/","title":"Profile Specification","text":"<p>This document specifies the structure of a2p profiles.</p>"},{"location":"spec/profiles/#profile-types","title":"Profile Types","text":"Type Description Use Case <code>human</code> Individual users Personal profiles <code>agent</code> AI agents and services Bot/assistant profiles <code>entity</code> Organizations, teams Company profiles"},{"location":"spec/profiles/#human-profile","title":"Human Profile","text":""},{"location":"spec/profiles/#required-fields","title":"Required Fields","text":"Field Type Description <code>id</code> DID Profile owner's DID <code>version</code> string Schema version (e.g., \"1.0\") <code>profileType</code> string Must be \"human\" <code>identity</code> object Basic identity info"},{"location":"spec/profiles/#full-schema","title":"Full Schema","text":"<pre><code>{\n  \"id\": \"did:a2p:user:local:alice123\",\n  \"version\": \"1.0\",\n  \"profileType\": \"human\",\n  \"created\": \"2025-01-01T00:00:00Z\",\n  \"updated\": \"2025-12-25T10:00:00Z\",\n\n  \"identity\": {\n    \"did\": \"did:a2p:user:local:alice123\",\n    \"displayName\": \"Alice\",\n    \"pronouns\": \"she/her\",\n    \"avatar\": \"https://example.com/avatar.jpg\"\n  },\n\n  \"common\": {\n    \"preferences\": {\n      \"language\": \"en-US\",\n      \"timezone\": \"Europe/Madrid\",\n      \"dateFormat\": \"DD/MM/YYYY\",\n      \"communication\": {\n        \"style\": \"concise\",\n        \"formality\": \"casual\",\n        \"humor\": true\n      }\n    },\n    \"accessibility\": {\n      \"screenReader\": false,\n      \"highContrast\": false,\n      \"reducedMotion\": false\n    }\n  },\n\n  \"memories\": {\n    \"a2p:professional\": {\n      \"occupation\": \"Software Engineer\",\n      \"company\": \"Tech Corp\",\n      \"skills\": [\"TypeScript\", \"Python\", \"Rust\"]\n    },\n    \"a2p:interests\": {\n      \"topics\": [\"AI\", \"distributed systems\"],\n      \"music\": { \"genres\": [\"jazz\", \"electronic\"] }\n    },\n    \"a2p:episodic\": [\n      {\n        \"id\": \"mem_abc123\",\n        \"content\": \"Prefers TypeScript for new projects\",\n        \"confidence\": 0.88,\n        \"source\": { \"type\": \"proposal\", \"agentDid\": \"did:a2p:agent:local:claude\" },\n        \"createdAt\": \"2025-12-20T14:30:00Z\"\n      }\n    ]\n  },\n\n  \"accessPolicies\": [\n    {\n      \"id\": \"policy_default\",\n      \"name\": \"Default Policy\",\n      \"agentPattern\": \"*\",\n      \"allow\": [\"a2p:preferences.*\"],\n      \"deny\": [\"a2p:health.*\", \"a2p:financial.*\"],\n      \"permissions\": [\"read_public\"]\n    }\n  ],\n\n  \"pendingProposals\": [ ... ]\n}\n</code></pre>"},{"location":"spec/profiles/#agent-profile","title":"Agent Profile","text":"<p>Agents have their own profiles describing capabilities.</p> <pre><code>{\n  \"id\": \"did:a2p:agent:local:my-assistant\",\n  \"version\": \"1.0\",\n  \"profileType\": \"agent\",\n\n  \"identity\": {\n    \"name\": \"My Assistant\",\n    \"description\": \"A helpful AI assistant\",\n    \"icon\": \"https://example.com/icon.png\"\n  },\n\n  \"operator\": {\n    \"did\": \"did:a2p:entity:local:company\",\n    \"name\": \"Company Inc.\",\n    \"contact\": \"support@company.com\",\n    \"jurisdiction\": \"EU\"\n  },\n\n  \"capabilities\": [\n    \"conversation\",\n    \"code_generation\",\n    \"summarization\"\n  ],\n\n  \"dataHandling\": {\n    \"storage\": \"session_only\",\n    \"encryption\": true,\n    \"retention\": \"24h\",\n    \"thirdPartySharing\": false\n  },\n\n  \"aiActCompliance\": {\n    \"riskLevel\": \"limited\",\n    \"transparencyObligations\": [\n      \"user_notification\",\n      \"ai_generated_content_marking\"\n    ],\n    \"humanOversight\": {\n      \"required\": true,\n      \"mechanism\": \"human_on_the_loop\"\n    }\n  },\n\n  \"requestedScopes\": [\n    \"a2p:preferences.*\",\n    \"a2p:interests.*\"\n  ],\n\n  \"trustIndicators\": {\n    \"verified\": true,\n    \"certifications\": [\"a2p-certified\"],\n    \"operatorVerified\": true\n  }\n}\n</code></pre>"},{"location":"spec/profiles/#entity-profile","title":"Entity Profile","text":"<p>For organizations with hierarchical structure.</p> <pre><code>{\n  \"id\": \"did:a2p:entity:local:acme-corp\",\n  \"version\": \"1.0\",\n  \"profileType\": \"entity\",\n\n  \"entityType\": \"organization\",\n\n  \"identity\": {\n    \"name\": \"Acme Corporation\",\n    \"description\": \"Global technology company\"\n  },\n\n  \"hierarchy\": {\n    \"parent\": null,\n    \"children\": [\n      \"did:a2p:entity:local:acme-engineering\",\n      \"did:a2p:entity:local:acme-sales\"\n    ]\n  },\n\n  \"enforcedPolicies\": [\n    {\n      \"id\": \"policy_no_health\",\n      \"rule\": {\n        \"field\": \"deny\",\n        \"enforcement\": \"additive\",\n        \"value\": [\"a2p:health.*\"]\n      },\n      \"appliesTo\": \"all_descendants\"\n    }\n  ],\n\n  \"members\": [\n    {\n      \"did\": \"did:a2p:user:local:alice\",\n      \"role\": \"employee\"\n    }\n  ]\n}\n</code></pre>"},{"location":"spec/profiles/#multi-profile-support","title":"Multi-Profile Support","text":"<p>Users can have multiple profiles:</p> <pre><code>Base Profile (did:a2p:user:local:alice)\n\u251c\u2500\u2500 Work Profile (did:a2p:user:local:alice:work)\n\u2502   \u2514\u2500\u2500 Inherits base, adds work context\n\u251c\u2500\u2500 Personal Profile (did:a2p:user:local:alice:personal)\n\u2502   \u2514\u2500\u2500 Inherits base, different policies\n\u2514\u2500\u2500 Health Profile (did:a2p:user:local:alice:health)\n    \u2514\u2500\u2500 Strict access controls\n</code></pre>"},{"location":"spec/profiles/#inheritance","title":"Inheritance","text":"<p>Sub-profiles inherit from base and can: - Add new memories - Override preferences - Define stricter policies</p>"},{"location":"spec/profiles/#validation-rules","title":"Validation Rules","text":"Rule Description DID format Must match <code>^did:a2p:(user\\|agent\\|entity):.+$</code> Version Must be semantic version Timestamps Must be ISO 8601 Categories Must match <code>^(a2p\\|ext):[a-zA-Z0-9_.]+$</code>"},{"location":"spec/profiles/#next-steps","title":"Next Steps","text":"<ul> <li>Memories \u2014 Memory specification</li> <li>Consent \u2014 Access policies</li> <li>Schemas \u2014 JSON Schema files</li> </ul>"},{"location":"spec/schemas/","title":"JSON Schemas","text":"<p>This page lists all JSON Schema definitions for the a2p protocol.</p>"},{"location":"spec/schemas/#schema-files","title":"Schema Files","text":"Schema Description <code>profile.schema.json</code> User profile structure <code>memory.schema.json</code> Memory entry structure <code>proposal.schema.json</code> Memory proposal structure <code>consent-policy.schema.json</code> Access policy structure <code>consent-receipt.schema.json</code> Consent receipt structure <code>agent-profile.schema.json</code> Agent profile structure <code>entity-profile.schema.json</code> Entity profile structure <code>access-request.schema.json</code> Access request with purpose"},{"location":"spec/schemas/#download","title":"Download","text":"<p>All schemas are available in the repository:</p> <pre><code>https://github.com/a2p-protocol/a2p/tree/main/schemas\n</code></pre>"},{"location":"spec/schemas/#example-profile-schema","title":"Example: Profile Schema","text":"<pre><code>{\n  \"$schema\": \"https://json-schema.org/draft/2020-12/schema\",\n  \"$id\": \"https://a2p.protocol/schemas/v1/profile.json\",\n  \"title\": \"A2P Profile\",\n  \"type\": \"object\",\n  \"required\": [\"id\", \"version\", \"profileType\"],\n  \"properties\": {\n    \"id\": {\n      \"type\": \"string\",\n      \"pattern\": \"^did:a2p:(user|agent|entity):.+\"\n    },\n    \"version\": {\n      \"type\": \"string\",\n      \"pattern\": \"^\\\\d+\\\\.\\\\d+$\"\n    },\n    \"profileType\": {\n      \"type\": \"string\",\n      \"enum\": [\"human\", \"agent\", \"entity\"]\n    }\n  }\n}\n</code></pre>"},{"location":"spec/schemas/#validation","title":"Validation","text":"<p>Use any JSON Schema validator:</p> TypeScriptPython <pre><code>import Ajv from 'ajv';\nimport profileSchema from './schemas/profile.schema.json';\n\nconst ajv = new Ajv();\nconst validate = ajv.compile(profileSchema);\n\nconst valid = validate(myProfile);\nif (!valid) {\n  console.log(validate.errors);\n}\n</code></pre> <pre><code>import jsonschema\nimport json\n\nwith open('schemas/profile.schema.json') as f:\n    schema = json.load(f)\n\njsonschema.validate(my_profile, schema)\n</code></pre>"},{"location":"spec/schemas/#next-steps","title":"Next Steps","text":"<ul> <li>Overview \u2014 Specification overview</li> <li>Profiles \u2014 Profile details</li> </ul>"},{"location":"spec/security/","title":"Security Specification","text":"<p>This document specifies authentication, authorization, and security measures.</p>"},{"location":"spec/security/#authentication","title":"Authentication","text":""},{"location":"spec/security/#signature-header","title":"Signature Header","text":"<pre><code>Authorization: A2P-Signature \n  did=\"did:a2p:agent:local:my-agent\",\n  sig=\"&lt;base64-signature&gt;\",\n  ts=\"2025-12-25T10:00:00Z\",\n  nonce=\"abc123xyz789\",\n  exp=\"300\"\n</code></pre>"},{"location":"spec/security/#signature-computation","title":"Signature Computation","text":"<pre><code>signature = sign(privateKey, sha256(\n  method + \"\\n\" +\n  path + \"\\n\" +\n  timestamp + \"\\n\" +\n  nonce + \"\\n\" +\n  sha256(body)\n))\n</code></pre>"},{"location":"spec/security/#replay-protection","title":"Replay Protection","text":"Check Requirement Timestamp Within \u00b1300 seconds Nonce Unique, not seen in 5 minutes Format 16-32 alphanumeric characters"},{"location":"spec/security/#rate-limiting","title":"Rate Limiting","text":"Limit Default Requests/minute 60 Requests/hour 1000 Burst 1.5x"},{"location":"spec/security/#headers","title":"Headers","text":"<pre><code>X-RateLimit-Limit: 60\nX-RateLimit-Remaining: 45\nX-RateLimit-Reset: 1640000000\n</code></pre>"},{"location":"spec/security/#key-management","title":"Key Management","text":""},{"location":"spec/security/#rotation","title":"Rotation","text":"Trigger Response Time Scheduled Planned Compromise Immediate Personnel change 72 hours"},{"location":"spec/security/#recovery","title":"Recovery","text":"<ul> <li>Social recovery (Shamir)</li> <li>Backup keys</li> <li>Custodian recovery</li> </ul>"},{"location":"spec/security/#encryption","title":"Encryption","text":"Layer Algorithm Transport TLS 1.3 At rest AES-256-GCM Signatures Ed25519"},{"location":"spec/security/#post-quantum-roadmap","title":"Post-Quantum Roadmap","text":"Phase Timeline Preparation 2025-2026 Hybrid 2026-2027 Migration 2027-2028 PQ-native 2029+"},{"location":"spec/security/#next-steps","title":"Next Steps","text":"<ul> <li>Schemas \u2014 JSON Schema files</li> <li>Overview \u2014 Specification overview</li> </ul>"},{"location":"specification/api/","title":"API Reference","text":"<p>Complete HTTP REST API specification.</p>"},{"location":"specification/api/#base-url","title":"Base URL","text":"<pre><code>https://gateway.example.com/a2p/v1\n</code></pre>"},{"location":"specification/api/#authentication","title":"Authentication","text":"<p>All requests require signature authentication:</p> <pre><code>Authorization: A2P-Signature \n  did=\"did:a2p:agent:local:my-agent\",\n  sig=\"eyJhbGciOiJFZERTQSJ9...\",\n  ts=\"2025-12-25T10:00:00Z\",\n  nonce=\"abc123xyz789\"\n</code></pre>"},{"location":"specification/api/#common-headers","title":"Common Headers","text":""},{"location":"specification/api/#request","title":"Request","text":"Header Required Description <code>Authorization</code> Yes A2P-Signature header <code>Content-Type</code> Yes* <code>application/json</code> <code>A2P-Version</code> No Requested version (default: latest)"},{"location":"specification/api/#response","title":"Response","text":"Header Description <code>A2P-Version</code> Protocol version <code>X-RateLimit-Limit</code> Rate limit <code>X-RateLimit-Remaining</code> Remaining requests <code>X-Request-Id</code> Request identifier"},{"location":"specification/api/#endpoints","title":"Endpoints","text":""},{"location":"specification/api/#get-profile","title":"Get Profile","text":"<p>Retrieve a user's profile (filtered by policies).</p> <pre><code>GET /a2p/v1/profile/{did}\n</code></pre> <p>Parameters:</p> Name In Type Required Description <code>did</code> path string Yes User DID <code>scopes</code> query string No Comma-separated scopes <p>Response:</p> <pre><code>{\n  \"success\": true,\n  \"data\": {\n    \"id\": \"did:a2p:user:local:alice\",\n    \"profileType\": \"human\",\n    \"version\": \"1.0\",\n    \"common\": {\n      \"preferences\": { ... }\n    },\n    \"memories\": { ... }\n  },\n  \"meta\": {\n    \"requestId\": \"req_xxx\",\n    \"timestamp\": \"2025-12-25T10:00:00Z\"\n  }\n}\n</code></pre>"},{"location":"specification/api/#request-access","title":"Request Access","text":"<p>Request access to a user's profile.</p> <pre><code>POST /a2p/v1/profile/{did}/access\n</code></pre> <p>Request Body:</p> <pre><code>{\n  \"scopes\": [\"a2p:preferences\", \"a2p:interests\"],\n  \"purpose\": {\n    \"type\": \"personalization\",\n    \"description\": \"To personalize responses\",\n    \"legalBasis\": \"consent\",\n    \"retention\": \"session_only\"\n  }\n}\n</code></pre> <p>Response:</p> <pre><code>{\n  \"success\": true,\n  \"data\": {\n    \"receiptId\": \"rcpt_xxx\",\n    \"grantedScopes\": [\"a2p:preferences\"],\n    \"deniedScopes\": [\"a2p:interests\"],\n    \"expiresAt\": \"2025-12-26T10:00:00Z\"\n  }\n}\n</code></pre>"},{"location":"specification/api/#list-memories","title":"List Memories","text":"<p>Get memories from a profile.</p> <pre><code>GET /a2p/v1/profile/{did}/memories\n</code></pre> <p>Parameters:</p> Name In Type Description <code>category</code> query string Filter by category <code>limit</code> query integer Max results (default: 50) <code>offset</code> query integer Pagination offset <p>Response:</p> <pre><code>{\n  \"success\": true,\n  \"data\": {\n    \"a2p:professional\": {\n      \"occupation\": \"Engineer\",\n      \"skills\": [\"TypeScript\", \"Python\"]\n    },\n    \"a2p:episodic\": [\n      {\n        \"id\": \"mem_001\",\n        \"content\": \"Prefers concise responses\",\n        \"confidence\": 0.9\n      }\n    ]\n  }\n}\n</code></pre>"},{"location":"specification/api/#propose-memory","title":"Propose Memory","text":"<p>Submit a memory proposal.</p> <pre><code>POST /a2p/v1/profile/{did}/memories/propose\n</code></pre> <p>Request Body:</p> <pre><code>{\n  \"content\": \"Prefers TypeScript for new projects\",\n  \"category\": \"a2p:professional.preferences\",\n  \"confidence\": 0.85,\n  \"context\": \"Based on coding conversation\"\n}\n</code></pre> <p>Response:</p> <pre><code>{\n  \"success\": true,\n  \"data\": {\n    \"proposalId\": \"prop_xxx\",\n    \"status\": \"pending\",\n    \"expiresAt\": \"2026-01-01T10:00:00Z\"\n  }\n}\n</code></pre>"},{"location":"specification/api/#list-proposals","title":"List Proposals","text":"<p>Get pending proposals (for user).</p> <pre><code>GET /a2p/v1/profile/{did}/proposals\n</code></pre> <p>Parameters:</p> Name In Type Description <code>status</code> query string Filter: pending, approved, rejected <p>Response:</p> <pre><code>{\n  \"success\": true,\n  \"data\": [\n    {\n      \"id\": \"prop_xxx\",\n      \"agentDid\": \"did:a2p:agent:local:assistant\",\n      \"content\": \"Prefers TypeScript\",\n      \"category\": \"a2p:professional\",\n      \"confidence\": 0.85,\n      \"status\": \"pending\",\n      \"proposedAt\": \"2025-12-25T10:00:00Z\"\n    }\n  ],\n  \"meta\": {\n    \"count\": 1\n  }\n}\n</code></pre>"},{"location":"specification/api/#review-proposal","title":"Review Proposal","text":"<p>Approve or reject a proposal.</p> <pre><code>POST /a2p/v1/profile/{did}/proposals/{proposalId}/review\n</code></pre> <p>Request Body:</p> <pre><code>{\n  \"action\": \"approve\",\n  \"editedContent\": \"Prefers TypeScript for web projects\"\n}\n</code></pre> <p>Response:</p> <pre><code>{\n  \"success\": true,\n  \"data\": {\n    \"proposalId\": \"prop_xxx\",\n    \"status\": \"approved\",\n    \"memoryId\": \"mem_yyy\"\n  }\n}\n</code></pre>"},{"location":"specification/api/#error-responses","title":"Error Responses","text":"<pre><code>{\n  \"success\": false,\n  \"error\": {\n    \"code\": \"A2P004\",\n    \"message\": \"Consent required for scope: a2p:health\",\n    \"details\": {\n      \"deniedScopes\": [\"a2p:health.*\"]\n    }\n  }\n}\n</code></pre>"},{"location":"specification/api/#error-codes","title":"Error Codes","text":"Code HTTP Description A2P001 401 Unauthorized A2P002 403 Forbidden A2P003 404 Not Found A2P004 403 Consent Required A2P005 429 Rate Limited A2P006 400 Invalid Request A2P007 401 Timestamp Invalid A2P008 401 Nonce Reused"},{"location":"specification/api/#rate-limits","title":"Rate Limits","text":"Endpoint Limit Window GET /profile 100 per hour POST /access 30 per hour POST /propose 20 per hour POST /review 50 per hour"},{"location":"specification/api/#implementation-specific-endpoints","title":"Implementation-Specific Endpoints","text":"<p>Implementations MAY provide additional endpoints beyond those specified in this protocol. These endpoints are not part of the protocol specification and are implementation-specific.</p>"},{"location":"specification/api/#when-to-use-implementation-specific-endpoints","title":"When to Use Implementation-Specific Endpoints","text":"<p>Implementation-specific endpoints are appropriate for:</p> <ol> <li>User-Facing Operations:</li> <li>User dashboards (e.g., <code>/api/dashboard</code>)</li> <li>Profile management UI (e.g., <code>/api/profiles</code>)</li> <li> <p>Administrative operations (e.g., <code>/api/admin/*</code>)</p> </li> <li> <p>Convenience Features:</p> </li> <li>Token-based profile access (e.g., <code>/a2p/v1/profile</code> without DID in path)</li> <li>Batch operations (e.g., <code>/api/profiles/batch</code>)</li> <li> <p>Analytics endpoints (e.g., <code>/api/analytics</code>)</p> </li> <li> <p>Custom Features:</p> </li> <li>Service-specific functionality</li> <li>Integration with other systems</li> <li>Extended capabilities</li> </ol>"},{"location":"specification/api/#protocol-vs-implementation-endpoints","title":"Protocol vs Implementation Endpoints","text":"<p>Protocol Endpoints (<code>/a2p/v1/*</code>): - MUST be implemented by all conformant implementations - MUST follow protocol specifications exactly - MUST use A2P-Signature authentication (or connection tokens) - MUST have DID in path (for profile operations, unless using connection tokens) - Are interoperable across all implementations</p> <p>Implementation-Specific Endpoints (<code>/api/*</code>, custom paths): - MAY be implemented by implementations - Can use different authentication (tokens, sessions, etc.) - Can use different URL patterns - Are NOT interoperable (agents cannot rely on them) - SHOULD be clearly documented as implementation-specific</p>"},{"location":"specification/api/#examples","title":"Examples","text":"<p>Valid Implementation-Specific Endpoints:</p> <pre><code># User-facing dashboard\nGET /api/profiles                    # List user's profiles (token-based)\nGET /api/profiles/:did               # Get specific profile\nPOST /api/profiles                   # Create profile\n\n# Convenience protocol endpoints (optional)\nGET /a2p/v1/profile                 # Profile access without DID in path (token-based)\nPOST /a2p/v1/profile/memories/propose  # Propose memory without DID in path\n\n# Administrative\nGET /api/admin/users                 # Admin operations\nPOST /api/admin/agents/verify       # Agent verification\n</code></pre> <p>Note: While implementations MAY provide token-based protocol endpoints (without DID in path), agents SHOULD use the standard protocol endpoints (with DID in path) for maximum interoperability.</p>"},{"location":"specification/api/#interoperability-considerations","title":"Interoperability Considerations","text":"<ul> <li>Agents SHOULD only use protocol-standard endpoints (<code>/a2p/v1/profile/:did</code>)</li> <li>Users MAY use implementation-specific endpoints (e.g., <code>/api/profiles</code>)</li> <li>Conformance tests only verify protocol-standard endpoints</li> <li>Custom endpoints do not affect protocol conformance</li> </ul>"},{"location":"specification/api/#next-steps","title":"Next Steps","text":"<ul> <li>Schemas \u2014 Data structures</li> <li>Security \u2014 Authentication details</li> </ul>"},{"location":"specification/overview/","title":"Protocol Specification","text":"<p>Technical specification of the a2p protocol.</p>"},{"location":"specification/overview/#overview","title":"Overview","text":"<p>a2p is an open protocol for user-sovereign AI agent profiles. This specification defines:</p> <ul> <li>Data Models \u2014 Profile, memory, consent structures</li> <li>API Endpoints \u2014 HTTP REST API</li> <li>Security \u2014 Authentication, authorization, encryption</li> <li>Versioning \u2014 Version negotiation and migration</li> </ul>"},{"location":"specification/overview/#protocol-version","title":"Protocol Version","text":"<p>Current Version: 1.0</p> <pre><code>A2P-Version: 1.0\n</code></pre>"},{"location":"specification/overview/#terminology","title":"Terminology","text":"Term Definition User Human owner of a profile Agent AI system accessing profiles Entity Organization, team, or group Profile User-owned data container Memory Piece of information in a profile Proposal Agent-suggested memory awaiting approval Policy Access control rule DID Decentralized Identifier"},{"location":"specification/overview/#architecture","title":"Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                       User Layer                            \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                     \u2502\n\u2502  \u2502 Profile \u2502  \u2502 Profile \u2502  \u2502 Profile \u2502                     \u2502\n\u2502  \u2502  (Web)  \u2502  \u2502 (Mobile)\u2502  \u2502  (CLI)  \u2502                     \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2518                     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n        \u2502            \u2502            \u2502\n        \u25bc            \u25bc            \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502                     Gateway Layer                           \u2502\n\u2502                  (HTTP REST API)                            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                        \u2502\n        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n        \u25bc               \u25bc               \u25bc\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Agent 1   \u2502  \u2502   Agent 2   \u2502  \u2502   Agent 3   \u2502\n\u2502  (ChatGPT)  \u2502  \u2502  (Claude)   \u2502  \u2502  (Custom)   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"specification/overview/#data-models","title":"Data Models","text":""},{"location":"specification/overview/#profile","title":"Profile","text":"<pre><code>{\n  \"id\": \"did:a2p:user:local:alice\",\n  \"version\": \"1.0\",\n  \"profileType\": \"human | agent | entity\",\n  \"created\": \"ISO8601\",\n  \"updated\": \"ISO8601\",\n  \"identity\": { ... },\n  \"common\": { ... },\n  \"memories\": { ... },\n  \"accessPolicies\": [ ... ],\n  \"pendingProposals\": [ ... ]\n}\n</code></pre> <p>See Schemas for complete definitions.</p>"},{"location":"specification/overview/#memory","title":"Memory","text":"<pre><code>{\n  \"id\": \"mem_xxx\",\n  \"content\": \"string or object\",\n  \"category\": \"a2p:category.subcategory\",\n  \"confidence\": 0.0-1.0,\n  \"source\": { ... },\n  \"sensitivity\": \"low | standard | high\",\n  \"created\": \"ISO8601\"\n}\n</code></pre>"},{"location":"specification/overview/#consent-policy","title":"Consent Policy","text":"<pre><code>{\n  \"id\": \"policy_xxx\",\n  \"name\": \"string\",\n  \"agentPattern\": \"DID pattern with wildcards\",\n  \"allow\": [\"scope patterns\"],\n  \"deny\": [\"scope patterns\"],\n  \"permissions\": [\"read_public\", \"read_scoped\", \"propose\", ...],\n  \"conditions\": { ... }\n}\n</code></pre>"},{"location":"specification/overview/#api-endpoints","title":"API Endpoints","text":""},{"location":"specification/overview/#base-url","title":"Base URL","text":"<pre><code>https://gateway.example.com/a2p/v1\n</code></pre>"},{"location":"specification/overview/#authentication","title":"Authentication","text":"<p>All requests require signature:</p> <pre><code>Authorization: A2P-Signature \n  did=\"did:a2p:agent:local:xxx\",\n  sig=\"base64\",\n  ts=\"ISO8601\",\n  nonce=\"string\"\n</code></pre>"},{"location":"specification/overview/#endpoints","title":"Endpoints","text":"<p>Protocol Endpoints (required for conformance):</p> Method Path Description GET <code>/profile/:did</code> Get profile POST <code>/profile/:did/access</code> Request access GET <code>/profile/:did/memories</code> List memories POST <code>/profile/:did/memories/propose</code> Propose memory GET <code>/profile/:did/proposals</code> List proposals POST <code>/profile/:did/proposals/:id/review</code> Review proposal <p>Note: Implementations MAY provide additional implementation-specific endpoints (e.g., <code>/api/profiles</code> for user-facing operations). These are not part of the protocol specification. See API Reference for details.</p>"},{"location":"specification/overview/#security","title":"Security","text":""},{"location":"specification/overview/#transport","title":"Transport","text":"<ul> <li>TLS 1.3 required</li> <li>Certificate validation required</li> </ul>"},{"location":"specification/overview/#authentication_1","title":"Authentication","text":"<ul> <li>DID-based identity</li> <li>Ed25519 signatures (default)</li> <li>Timestamp + nonce replay protection</li> </ul>"},{"location":"specification/overview/#authorization","title":"Authorization","text":"<ul> <li>Policy-based access control</li> <li>Scope filtering</li> <li>Purpose validation</li> </ul> <p>See Security for details.</p>"},{"location":"specification/overview/#versioning","title":"Versioning","text":""},{"location":"specification/overview/#header","title":"Header","text":"<pre><code>A2P-Version: 1.0\nA2P-Version-Supported: 1.0, 1.1\n</code></pre>"},{"location":"specification/overview/#compatibility","title":"Compatibility","text":"<ul> <li>MAJOR: Breaking changes</li> <li>MINOR: Backward compatible additions</li> <li>PATCH: Bug fixes</li> </ul> <p>See Versioning for migration details.</p>"},{"location":"specification/overview/#conformance","title":"Conformance","text":"<p>Implementations must:</p> <ol> <li>Support all required endpoints</li> <li>Validate signatures correctly</li> <li>Enforce rate limits</li> <li>Return proper error codes</li> <li>Include version headers</li> </ol> <p>See conformance test suite for validation.</p>"},{"location":"specification/overview/#next-steps","title":"Next Steps","text":"<ul> <li>Schemas \u2014 Complete JSON schemas</li> <li>API Reference \u2014 Endpoint details</li> <li>Versioning \u2014 Version migration</li> </ul>"},{"location":"specification/schemas/","title":"JSON Schemas","text":"<p>Complete JSON Schema definitions for a2p data structures.</p>"},{"location":"specification/schemas/#schema-locations","title":"Schema Locations","text":"<p>All schemas are available at:</p> <pre><code>https://a2p.protocol/schemas/v1/{schema}.json\n</code></pre>"},{"location":"specification/schemas/#profile-schema","title":"Profile Schema","text":"<pre><code>{\n  \"$schema\": \"https://json-schema.org/draft/2020-12/schema\",\n  \"$id\": \"https://a2p.protocol/schemas/v1/profile.json\",\n  \"title\": \"A2P Profile\",\n  \"type\": \"object\",\n  \"required\": [\"id\", \"version\", \"profileType\"],\n\n  \"properties\": {\n    \"id\": {\n      \"type\": \"string\",\n      \"pattern\": \"^did:\",\n      \"description\": \"DID of the profile owner\"\n    },\n    \"version\": {\n      \"type\": \"string\",\n      \"pattern\": \"^\\\\d+\\\\.\\\\d+$\"\n    },\n    \"profileType\": {\n      \"type\": \"string\",\n      \"enum\": [\"human\", \"agent\", \"entity\"]\n    },\n    \"created\": {\n      \"type\": \"string\",\n      \"format\": \"date-time\"\n    },\n    \"updated\": {\n      \"type\": \"string\",\n      \"format\": \"date-time\"\n    },\n    \"identity\": {\n      \"$ref\": \"#/$defs/identity\"\n    },\n    \"common\": {\n      \"$ref\": \"#/$defs/common\"\n    },\n    \"memories\": {\n      \"type\": \"object\",\n      \"additionalProperties\": true\n    },\n    \"accessPolicies\": {\n      \"type\": \"array\",\n      \"items\": { \"$ref\": \"#/$defs/policy\" }\n    }\n  }\n}\n</code></pre>"},{"location":"specification/schemas/#memory-schema","title":"Memory Schema","text":"<pre><code>{\n  \"$schema\": \"https://json-schema.org/draft/2020-12/schema\",\n  \"$id\": \"https://a2p.protocol/schemas/v1/memory.json\",\n  \"title\": \"A2P Memory\",\n  \"type\": \"object\",\n  \"required\": [\"id\", \"content\", \"category\"],\n\n  \"properties\": {\n    \"id\": {\n      \"type\": \"string\",\n      \"pattern\": \"^mem_\"\n    },\n    \"content\": {\n      \"oneOf\": [\n        { \"type\": \"string\" },\n        { \"type\": \"object\" }\n      ]\n    },\n    \"category\": {\n      \"type\": \"string\",\n      \"pattern\": \"^(a2p|ext):[a-zA-Z0-9_.]+\"\n    },\n    \"confidence\": {\n      \"type\": \"number\",\n      \"minimum\": 0,\n      \"maximum\": 1\n    },\n    \"sensitivity\": {\n      \"type\": \"string\",\n      \"enum\": [\"low\", \"standard\", \"high\"],\n      \"default\": \"standard\"\n    },\n    \"source\": {\n      \"$ref\": \"#/$defs/source\"\n    },\n    \"scope\": {\n      \"type\": \"array\",\n      \"items\": { \"type\": \"string\" }\n    },\n    \"metadata\": {\n      \"type\": \"object\"\n    }\n  }\n}\n</code></pre>"},{"location":"specification/schemas/#proposal-schema","title":"Proposal Schema","text":"<pre><code>{\n  \"$schema\": \"https://json-schema.org/draft/2020-12/schema\",\n  \"$id\": \"https://a2p.protocol/schemas/v1/proposal.json\",\n  \"title\": \"A2P Memory Proposal\",\n  \"type\": \"object\",\n  \"required\": [\"id\", \"userDid\", \"agentDid\", \"content\", \"category\", \"status\"],\n\n  \"properties\": {\n    \"id\": {\n      \"type\": \"string\",\n      \"pattern\": \"^prop_\"\n    },\n    \"userDid\": {\n      \"type\": \"string\",\n      \"pattern\": \"^did:\"\n    },\n    \"agentDid\": {\n      \"type\": \"string\",\n      \"pattern\": \"^did:\"\n    },\n    \"content\": {\n      \"type\": \"string\",\n      \"maxLength\": 10000\n    },\n    \"category\": {\n      \"type\": \"string\",\n      \"pattern\": \"^(a2p|ext):\"\n    },\n    \"confidence\": {\n      \"type\": \"number\",\n      \"minimum\": 0,\n      \"maximum\": 1,\n      \"default\": 0.8\n    },\n    \"context\": {\n      \"type\": \"string\",\n      \"maxLength\": 500\n    },\n    \"status\": {\n      \"type\": \"string\",\n      \"enum\": [\"pending\", \"approved\", \"rejected\", \"expired\"]\n    },\n    \"proposedAt\": {\n      \"type\": \"string\",\n      \"format\": \"date-time\"\n    },\n    \"expiresAt\": {\n      \"type\": \"string\",\n      \"format\": \"date-time\"\n    }\n  }\n}\n</code></pre>"},{"location":"specification/schemas/#access-request-schema","title":"Access Request Schema","text":"<pre><code>{\n  \"$schema\": \"https://json-schema.org/draft/2020-12/schema\",\n  \"$id\": \"https://a2p.protocol/schemas/v1/access-request.json\",\n  \"title\": \"A2P Access Request\",\n  \"type\": \"object\",\n  \"required\": [\"agentDid\", \"userDid\", \"scopes\", \"purpose\"],\n\n  \"properties\": {\n    \"agentDid\": {\n      \"type\": \"string\",\n      \"pattern\": \"^did:\"\n    },\n    \"userDid\": {\n      \"type\": \"string\",\n      \"pattern\": \"^did:\"\n    },\n    \"scopes\": {\n      \"type\": \"array\",\n      \"items\": { \"type\": \"string\" },\n      \"minItems\": 1\n    },\n    \"purpose\": {\n      \"type\": \"object\",\n      \"required\": [\"type\", \"description\", \"legalBasis\"],\n      \"properties\": {\n        \"type\": {\n          \"type\": \"string\",\n          \"enum\": [\n            \"personalization\",\n            \"recommendation\",\n            \"analysis\",\n            \"support\",\n            \"research\",\n            \"compliance\",\n            \"other\"\n          ]\n        },\n        \"description\": {\n          \"type\": \"string\",\n          \"maxLength\": 500\n        },\n        \"legalBasis\": {\n          \"type\": \"string\",\n          \"enum\": [\n            \"consent\",\n            \"contract\",\n            \"legal_obligation\",\n            \"vital_interests\",\n            \"public_task\",\n            \"legitimate_interests\"\n          ]\n        },\n        \"retention\": {\n          \"type\": \"string\"\n        }\n      }\n    }\n  }\n}\n</code></pre>"},{"location":"specification/schemas/#consent-policy-schema","title":"Consent Policy Schema","text":"<pre><code>{\n  \"$schema\": \"https://json-schema.org/draft/2020-12/schema\",\n  \"$id\": \"https://a2p.protocol/schemas/v1/consent-policy.json\",\n  \"title\": \"A2P Consent Policy\",\n  \"type\": \"object\",\n  \"required\": [\"id\", \"name\", \"agentPattern\"],\n\n  \"properties\": {\n    \"id\": {\n      \"type\": \"string\",\n      \"pattern\": \"^policy_\"\n    },\n    \"name\": {\n      \"type\": \"string\",\n      \"maxLength\": 100\n    },\n    \"priority\": {\n      \"type\": \"integer\",\n      \"default\": 0\n    },\n    \"agentPattern\": {\n      \"type\": \"string\"\n    },\n    \"allow\": {\n      \"type\": \"array\",\n      \"items\": { \"type\": \"string\" }\n    },\n    \"deny\": {\n      \"type\": \"array\",\n      \"items\": { \"type\": \"string\" }\n    },\n    \"permissions\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\": \"string\",\n        \"enum\": [\n          \"read_public\",\n          \"read_scoped\",\n          \"read_full\",\n          \"propose\",\n          \"write\"\n        ]\n      }\n    },\n    \"conditions\": {\n      \"type\": \"object\"\n    }\n  }\n}\n</code></pre>"},{"location":"specification/schemas/#schema-downloads","title":"Schema Downloads","text":"<ul> <li>profile.schema.json</li> <li>memory.schema.json</li> <li>proposal.schema.json</li> <li>consent-policy.schema.json</li> <li>access-request.schema.json</li> </ul>"},{"location":"specification/schemas/#next-steps","title":"Next Steps","text":"<ul> <li>API Reference \u2014 Endpoint documentation</li> <li>Versioning \u2014 Schema versioning</li> </ul>"},{"location":"specification/versioning/","title":"Versioning","text":"<p>Protocol versioning and migration strategy.</p>"},{"location":"specification/versioning/#current-version","title":"Current Version","text":"<p>a2p Protocol Version: 1.0</p>"},{"location":"specification/versioning/#semantic-versioning","title":"Semantic Versioning","text":"<pre><code>MAJOR.MINOR.PATCH\n</code></pre> Component Meaning Example MAJOR Breaking changes 2.0.0 MINOR New features (backward compatible) 1.1.0 PATCH Bug fixes 1.0.1"},{"location":"specification/versioning/#version-negotiation","title":"Version Negotiation","text":""},{"location":"specification/versioning/#request-header","title":"Request Header","text":"<pre><code>A2P-Version: 1.0\nA2P-Version-Min: 1.0\nA2P-Version-Max: 1.1\n</code></pre>"},{"location":"specification/versioning/#response-header","title":"Response Header","text":"<pre><code>A2P-Version: 1.0\nA2P-Version-Supported: 1.0, 1.1\n</code></pre>"},{"location":"specification/versioning/#negotiation-algorithm","title":"Negotiation Algorithm","text":"<ol> <li>If <code>A2P-Version</code> specified \u2192 use if supported</li> <li>Else if <code>A2P-Version-Max</code> specified \u2192 use highest \u2264 max</li> <li>Else \u2192 use latest supported</li> </ol>"},{"location":"specification/versioning/#compatibility","title":"Compatibility","text":""},{"location":"specification/versioning/#backward-compatibility-window","title":"Backward Compatibility Window","text":"<ul> <li>2 major versions backward supported</li> <li>24 months minimum support for previous major</li> </ul>"},{"location":"specification/versioning/#change-types","title":"Change Types","text":"Change Backward Compatible Add optional field \u2705 Yes Add new endpoint \u2705 Yes Add enum value \u2705 Yes Remove field \u274c No Change field type \u274c No Remove endpoint \u274c No"},{"location":"specification/versioning/#deprecation-policy","title":"Deprecation Policy","text":"<pre><code>Announcement \u2192 Warning \u2192 Sunset \u2192 Removal\n   6 months     3 months   3 months\n</code></pre>"},{"location":"specification/versioning/#deprecation-header","title":"Deprecation Header","text":"<pre><code>Deprecation: true\nSunset: Sat, 01 Jul 2027 00:00:00 GMT\nLink: &lt;https://a2p.protocol/migration/v2&gt;; rel=\"successor-version\"\n</code></pre>"},{"location":"specification/versioning/#migration","title":"Migration","text":""},{"location":"specification/versioning/#migration-endpoint","title":"Migration Endpoint","text":"<pre><code>POST /a2p/v1/migrate\n</code></pre> <p>Request:</p> <pre><code>{\n  \"fromVersion\": \"1.0\",\n  \"toVersion\": \"2.0\",\n  \"dryRun\": true\n}\n</code></pre> <p>Response:</p> <pre><code>{\n  \"success\": true,\n  \"data\": {\n    \"changes\": [\n      {\n        \"field\": \"memories.a2p:health\",\n        \"action\": \"restructure\",\n        \"description\": \"Health memories moved to new schema\"\n      }\n    ],\n    \"warnings\": [],\n    \"rollbackSupported\": true\n  }\n}\n</code></pre>"},{"location":"specification/versioning/#rollback","title":"Rollback","text":"<p>Within 30 days of migration:</p> <pre><code>POST /a2p/v1/migrate/rollback\n</code></pre>"},{"location":"specification/versioning/#next-steps","title":"Next Steps","text":"<ul> <li>API Reference \u2014 Endpoint documentation</li> <li>Schemas \u2014 Schema definitions</li> </ul>"},{"location":"tutorials/agent-integration/","title":"Agent Integration Guide","text":"<p>A complete guide to integrating a2p into your AI agent.</p>"},{"location":"tutorials/agent-integration/#overview","title":"Overview","text":"<p>This guide covers:</p> <ol> <li>Setting up agent identity</li> <li>Requesting user access</li> <li>Reading profile data</li> <li>Proposing memories</li> <li>Handling consent</li> </ol>"},{"location":"tutorials/agent-integration/#1-agent-identity","title":"1. Agent Identity","text":"<p>Your agent needs a DID:</p> <pre><code>// Generate or load agent DID\nconst agentDid = 'did:a2p:agent:local:my-agent';\n\n// Initialize client\nconst client = new A2PClient({\n  agentDid,\n  privateKey: process.env.AGENT_PRIVATE_KEY\n});\n</code></pre>"},{"location":"tutorials/agent-integration/#2-requesting-access","title":"2. Requesting Access","text":"<p>Always request access with a purpose:</p> <pre><code>const access = await client.requestAccess({\n  userDid: 'did:a2p:user:local:alice',\n  scopes: ['a2p:preferences', 'a2p:interests'],\n  purpose: {\n    type: 'personalization',\n    description: 'Personalize our conversation',\n    legalBasis: 'consent',\n    retention: 'session_only'\n  }\n});\n\nif (!access.granted) {\n  // Handle denial gracefully\n  console.log('User denied access');\n}\n</code></pre>"},{"location":"tutorials/agent-integration/#3-reading-profile","title":"3. Reading Profile","text":"<pre><code>const profile = await client.getProfile({\n  userDid: 'did:a2p:user:local:alice',\n  scopes: access.grantedScopes\n});\n\n// Use in prompts\nconst systemPrompt = `\nUser preferences:\n- Language: ${profile.common.preferences.language}\n- Style: ${profile.common.preferences.communication.style}\n`;\n</code></pre>"},{"location":"tutorials/agent-integration/#4-proposing-memories","title":"4. Proposing Memories","text":"<pre><code>// After learning something about the user\nawait client.proposeMemory({\n  userDid: 'did:a2p:user:local:alice',\n  content: 'Prefers detailed technical explanations',\n  category: 'a2p:preferences.communication',\n  confidence: 0.85,\n  context: 'User asked for more details multiple times'\n});\n</code></pre>"},{"location":"tutorials/agent-integration/#5-best-practices","title":"5. Best Practices","text":"Practice Description Request minimal scopes Only what you need Explain purpose clearly Users read this High confidence for proposals Don't spam low-confidence Handle denial gracefully Don't break if denied Cache reasonably Respect TTL"},{"location":"tutorials/agent-integration/#next-steps","title":"Next Steps","text":"<ul> <li>Memory Proposals \u2014 Proposal patterns</li> <li>Framework Adapters \u2014 Use with LangChain, etc.</li> </ul>"},{"location":"tutorials/memory-proposals/","title":"Memory Proposals Guide","text":"<p>How to effectively propose memories from your AI agent.</p>"},{"location":"tutorials/memory-proposals/#when-to-propose","title":"When to Propose","text":"<p>Good candidates for memory proposals:</p> \u2705 Propose \u274c Don't Propose Stable preferences Temporary context Repeated patterns One-time mentions Explicit statements Inferred guesses High confidence Low confidence"},{"location":"tutorials/memory-proposals/#confidence-levels","title":"Confidence Levels","text":"Level When to Use 0.9+ User explicitly stated 0.7-0.9 Strong inference from multiple signals 0.5-0.7 Reasonable inference &lt;0.5 Don't propose, too uncertain"},{"location":"tutorials/memory-proposals/#good-proposals","title":"Good Proposals","text":"<pre><code>// User said: \"I always use TypeScript for my projects\"\nawait client.proposeMemory({\n  content: 'Uses TypeScript for all projects',\n  category: 'a2p:professional.preferences',\n  confidence: 0.95,  // Explicit statement\n  context: 'User explicitly stated in conversation'\n});\n</code></pre>"},{"location":"tutorials/memory-proposals/#bad-proposals","title":"Bad Proposals","text":"<pre><code>// User mentioned Python once in passing\nawait client.proposeMemory({\n  content: 'Prefers Python',\n  category: 'a2p:professional.preferences',\n  confidence: 0.3,  // Too low, don't propose\n  context: 'Mentioned once'\n});\n// \u274c Don't do this\n</code></pre>"},{"location":"tutorials/memory-proposals/#categories-guide","title":"Categories Guide","text":"Category Use For <code>a2p:preferences.communication</code> Response style <code>a2p:preferences.language</code> Language choice <code>a2p:professional.skills</code> Technical skills <code>a2p:interests.topics</code> Interest areas <code>a2p:episodic</code> General learned facts"},{"location":"tutorials/memory-proposals/#next-steps","title":"Next Steps","text":"<ul> <li>Agent Integration \u2014 Full integration guide</li> <li>SDK Reference \u2014 API details</li> </ul>"},{"location":"tutorials/multi-profile/","title":"Multi-Profile Setup","text":"<p>Learn how to manage multiple profiles for different contexts.</p>"},{"location":"tutorials/multi-profile/#why-multiple-profiles","title":"Why Multiple Profiles?","text":"<p>Users may want different \"personas\" for different contexts:</p> Profile Use Case Shared Data Base Common preferences Language, timezone Work Professional AI tools Skills, role Personal Personal assistants Interests, hobbies Health Medical AI Health conditions"},{"location":"tutorials/multi-profile/#profile-hierarchy","title":"Profile Hierarchy","text":"<pre><code>flowchart TB\n    base[\"\ud83d\udccb Base Profile\\ndid:a2p:user:local:alice\"]\n\n    work[\"\ud83d\udcbc Work\\ndid:a2p:user:local:alice:work\"]\n    personal[\"\ud83c\udfe0 Personal\\ndid:a2p:user:local:alice:personal\"]\n    health[\"\ud83c\udfe5 Health\\ndid:a2p:user:local:alice:health\"]\n\n    base --&gt; work\n    base --&gt; personal\n    base --&gt; health</code></pre>"},{"location":"tutorials/multi-profile/#creating-sub-profiles","title":"Creating Sub-Profiles","text":"<pre><code>import { A2PUserClient } from '@a2p/sdk';\n\nconst client = new A2PUserClient(storage);\n\n// Create base profile first\nconst baseProfile = await client.createProfile({\n  displayName: 'Alice',\n  preferences: {\n    language: 'en-US',\n    timezone: 'Europe/Madrid'\n  }\n});\n\n// Create work sub-profile\nconst workProfile = await client.createSubProfile({\n  name: 'Work',\n  inheritsFrom: baseProfile.id,\n  purpose: 'Professional AI interactions',\n  overrides: {\n    preferences: {\n      communication: {\n        formality: 'professional',\n        style: 'detailed'\n      }\n    }\n  },\n  additionalMemories: {\n    'a2p:professional': {\n      role: 'Senior Engineer',\n      company: 'Tech Corp',\n      skills: ['TypeScript', 'Python', 'Cloud']\n    }\n  }\n});\n\n// Create personal sub-profile  \nconst personalProfile = await client.createSubProfile({\n  name: 'Personal',\n  inheritsFrom: baseProfile.id,\n  purpose: 'Personal assistant interactions',\n  overrides: {\n    preferences: {\n      communication: {\n        formality: 'casual',\n        humor: true\n      }\n    }\n  }\n});\n\nconsole.log('Work profile:', workProfile.id);\n// Output: did:a2p:user:local:alice:work\n</code></pre>"},{"location":"tutorials/multi-profile/#inheritance-rules","title":"Inheritance Rules","text":""},{"location":"tutorials/multi-profile/#what-gets-inherited","title":"What Gets Inherited","text":"Data Inherited Can Override <code>identity.displayName</code> \u2705 \u2705 <code>common.preferences</code> \u2705 \u2705 (merge) <code>memories</code> \u274c N/A (separate) <code>accessPolicies</code> \u2705 \u2705 (add more restrictive)"},{"location":"tutorials/multi-profile/#override-example","title":"Override Example","text":"<pre><code>// Base profile\n{\n  \"preferences\": {\n    \"language\": \"en-US\",\n    \"communication\": {\n      \"style\": \"concise\"\n    }\n  }\n}\n\n// Work profile override\n{\n  \"overrides\": {\n    \"preferences\": {\n      \"communication\": {\n        \"formality\": \"professional\"\n      }\n    }\n  }\n}\n\n// Effective work preferences (merged)\n{\n  \"language\": \"en-US\",           // inherited\n  \"communication\": {\n    \"style\": \"concise\",          // inherited\n    \"formality\": \"professional\"  // override\n  }\n}\n</code></pre>"},{"location":"tutorials/multi-profile/#profile-specific-policies","title":"Profile-Specific Policies","text":"<p>Each sub-profile can have its own policies:</p> <pre><code>// Work profile: allow professional data\nawait client.createPolicy({\n  profileId: workProfile.id,\n  name: 'Work AI Access',\n  agentPattern: 'did:a2p:agent:local:work-*',\n  allow: ['a2p:professional.*', 'a2p:preferences.*'],\n  deny: ['a2p:personal.*', 'a2p:health.*']\n});\n\n// Personal profile: allow interests, deny work\nawait client.createPolicy({\n  profileId: personalProfile.id,\n  name: 'Personal AI Access',\n  agentPattern: '*',\n  allow: ['a2p:interests.*', 'a2p:preferences.*'],\n  deny: ['a2p:professional.*']\n});\n</code></pre>"},{"location":"tutorials/multi-profile/#switching-profiles","title":"Switching Profiles","text":""},{"location":"tutorials/multi-profile/#for-agents","title":"For Agents","text":"<p>Agents should request the appropriate profile:</p> <pre><code>// Agent requesting work context\nconst access = await agentClient.requestAccess({\n  userDid: 'did:a2p:user:local:alice:work',  // Specific sub-profile\n  scopes: ['a2p:professional'],\n  purpose: { ... }\n});\n\n// Agent requesting personal context\nconst access = await agentClient.requestAccess({\n  userDid: 'did:a2p:user:local:alice:personal',\n  scopes: ['a2p:interests'],\n  purpose: { ... }\n});\n</code></pre>"},{"location":"tutorials/multi-profile/#user-selection","title":"User Selection","text":"<p>Users can indicate which profile to use:</p> <pre><code>// User sets default profile for an agent\nawait client.setAgentProfilePreference({\n  agentDid: 'did:a2p:agent:local:work-copilot',\n  preferredProfile: 'did:a2p:user:local:alice:work'\n});\n</code></pre>"},{"location":"tutorials/multi-profile/#managing-sub-profiles","title":"Managing Sub-Profiles","text":""},{"location":"tutorials/multi-profile/#list-sub-profiles","title":"List Sub-Profiles","text":"<pre><code>const subProfiles = await client.listSubProfiles();\n\nfor (const sub of subProfiles) {\n  console.log(`${sub.name}: ${sub.id}`);\n}\n</code></pre>"},{"location":"tutorials/multi-profile/#update-sub-profile","title":"Update Sub-Profile","text":"<pre><code>await client.updateSubProfile(workProfile.id, {\n  overrides: {\n    preferences: {\n      communication: { verbosity: 'detailed' }\n    }\n  }\n});\n</code></pre>"},{"location":"tutorials/multi-profile/#delete-sub-profile","title":"Delete Sub-Profile","text":"<pre><code>await client.deleteSubProfile(workProfile.id);\n// Base profile and other sub-profiles unaffected\n</code></pre>"},{"location":"tutorials/multi-profile/#best-practices","title":"Best Practices","text":""},{"location":"tutorials/multi-profile/#profile-organization","title":"Profile Organization","text":"<ul> <li>Base profile: Only common, non-sensitive preferences</li> <li>Work profile: Professional context, company policies</li> <li>Personal profile: Interests, personal preferences</li> <li>Health profile: Medical info with strict policies</li> </ul>"},{"location":"tutorials/multi-profile/#policy-strategy","title":"Policy Strategy","text":"<pre><code>// Base profile: restrictive default\n{ \"deny\": [\"a2p:*\"], \"allow\": [\"a2p:preferences.language\"] }\n\n// Sub-profiles: context-specific access\n// Work: professional categories\n// Personal: interests categories\n// Health: only verified medical agents\n</code></pre>"},{"location":"tutorials/multi-profile/#next-steps","title":"Next Steps","text":"<ul> <li>Consent &amp; Policies \u2014 Advanced policy configuration</li> <li>Security \u2014 Protecting sensitive profiles</li> </ul>"},{"location":"tutorials/quickstart-python/","title":"Quickstart: Python","text":"<p>Build your first a2p integration in Python.</p>"},{"location":"tutorials/quickstart-python/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.9+</li> <li>pip or poetry</li> </ul>"},{"location":"tutorials/quickstart-python/#installation","title":"Installation","text":"<pre><code>pip install a2p-sdk\n</code></pre>"},{"location":"tutorials/quickstart-python/#1-initialize-the-client","title":"1. Initialize the Client","text":"<pre><code>from a2p import A2PClient, A2PUserClient\n\n# For agents accessing user profiles\nagent_client = A2PClient(\n    agent_did=\"did:a2p:agent:local:my-agent\",\n    # Optional: custom gateway\n    # gateway_url=\"https://gateway.example.com\"\n)\n\n# For users managing their profiles\nuser_client = A2PUserClient()\n</code></pre>"},{"location":"tutorials/quickstart-python/#2-create-a-user-profile","title":"2. Create a User Profile","text":"<pre><code># Create a new profile\nprofile = await user_client.create_profile(\n    display_name=\"Alice\",\n    preferences={\n        \"language\": \"en-US\",\n        \"timezone\": \"Europe/Madrid\",\n        \"communication\": {\n            \"style\": \"concise\",\n            \"formality\": \"casual\"\n        }\n    }\n)\n\nprint(f\"Created profile: {profile.id}\")\n# did:a2p:user:local:abc123xyz\n</code></pre>"},{"location":"tutorials/quickstart-python/#3-request-access-agent","title":"3. Request Access (Agent)","text":"<pre><code># Agent requests access to user profile\naccess_result = await agent_client.request_access(\n    user_did=\"did:a2p:user:local:alice\",\n    scopes=[\"a2p:preferences\", \"a2p:interests\"],\n    purpose={\n        \"type\": \"personalization\",\n        \"description\": \"Tailor responses to your preferences\",\n        \"legal_basis\": \"consent\"\n    }\n)\n\nif access_result.granted:\n    print(f\"Access granted for: {access_result.granted_scopes}\")\nelse:\n    print(f\"Access denied: {access_result.reason}\")\n</code></pre>"},{"location":"tutorials/quickstart-python/#4-read-user-profile-agent","title":"4. Read User Profile (Agent)","text":"<pre><code># Get user profile (filtered by permissions)\nuser_profile = await agent_client.get_profile(\n    user_did=\"did:a2p:user:local:alice\",\n    scopes=[\"a2p:preferences\", \"a2p:interests\"]\n)\n\nprint(f\"User preferences: {user_profile.common.preferences}\")\nprint(f\"User interests: {user_profile.memories.get('a2p:interests')}\")\n</code></pre>"},{"location":"tutorials/quickstart-python/#5-propose-a-memory-agent","title":"5. Propose a Memory (Agent)","text":"<pre><code># Agent proposes a memory based on conversation\nproposal = await agent_client.propose_memory(\n    user_did=\"did:a2p:user:local:alice\",\n    content=\"Prefers Python for data science projects\",\n    category=\"a2p:professional.preferences\",\n    confidence=0.85,\n    context=\"Based on discussion about frameworks\"\n)\n\nprint(f\"Proposal submitted: {proposal.id}\")\n# User will review and approve/reject\n</code></pre>"},{"location":"tutorials/quickstart-python/#6-review-proposals-user","title":"6. Review Proposals (User)","text":"<pre><code># User reviews pending proposals\nproposals = await user_client.get_pending_proposals()\n\nfor proposal in proposals:\n    print(f\"From: {proposal.agent_did}\")\n    print(f\"Content: {proposal.content}\")\n    print(f\"Category: {proposal.category}\")\n\n    # Approve, reject, or edit\n    await user_client.review_proposal(\n        proposal.id,\n        action=\"approve\",\n        # Optional: edit before approving\n        # edited_content=\"Strongly prefers Python\"\n    )\n</code></pre>"},{"location":"tutorials/quickstart-python/#7-set-consent-policies-user","title":"7. Set Consent Policies (User)","text":"<pre><code># User defines access policies\nawait user_client.set_policy(\n    name=\"Work Assistants\",\n    agent_pattern=\"did:a2p:agent:local:work-*\",\n    allow=[\n        \"a2p:preferences.*\",\n        \"a2p:professional.*\"\n    ],\n    deny=[\n        \"a2p:health.*\",\n        \"a2p:financial.*\"\n    ],\n    permissions=[\"read_scoped\", \"propose\"]\n)\n</code></pre>"},{"location":"tutorials/quickstart-python/#complete-example","title":"Complete Example","text":"<pre><code>import asyncio\nfrom a2p import A2PClient, A2PUserClient\n\nasync def main():\n    # === User Setup ===\n    user_client = A2PUserClient()\n\n    # Create profile\n    profile = await user_client.create_profile(\n        display_name=\"Alice\",\n        preferences={\n            \"language\": \"en-US\",\n            \"communication\": {\"style\": \"concise\"}\n        }\n    )\n\n    # Set policy\n    await user_client.set_policy(\n        name=\"Default\",\n        agent_pattern=\"*\",\n        allow=[\"a2p:preferences.*\"],\n        permissions=[\"read_scoped\", \"propose\"]\n    )\n\n    # === Agent Access ===\n    agent_client = A2PClient(\n        agent_did=\"did:a2p:agent:local:my-assistant\"\n    )\n\n    # Request access\n    access = await agent_client.request_access(\n        user_did=profile.id,\n        scopes=[\"a2p:preferences\"],\n        purpose={\n            \"type\": \"personalization\",\n            \"description\": \"Personalize responses\",\n            \"legal_basis\": \"consent\"\n        }\n    )\n\n    if access.granted:\n        # Read profile\n        user_profile = await agent_client.get_profile(\n            user_did=profile.id,\n            scopes=[\"a2p:preferences\"]\n        )\n\n        print(f\"Got preferences: {user_profile.common.preferences}\")\n\n        # Propose memory\n        await agent_client.propose_memory(\n            user_did=profile.id,\n            content=\"User is interested in data science\",\n            category=\"a2p:interests.topics\",\n            confidence=0.9\n        )\n\n    # === User Reviews ===\n    proposals = await user_client.get_pending_proposals()\n    for p in proposals:\n        await user_client.review_proposal(p.id, action=\"approve\")\n\n    print(\"Done!\")\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n</code></pre>"},{"location":"tutorials/quickstart-python/#using-with-async-frameworks","title":"Using with Async Frameworks","text":""},{"location":"tutorials/quickstart-python/#fastapi","title":"FastAPI","text":"<pre><code>from fastapi import FastAPI\nfrom a2p import A2PClient\n\napp = FastAPI()\nclient = A2PClient(agent_did=\"did:a2p:agent:local:my-api\")\n\n@app.get(\"/personalized/{user_did}\")\nasync def get_personalized(user_did: str):\n    profile = await client.get_profile(\n        user_did=user_did,\n        scopes=[\"a2p:preferences\"]\n    )\n\n    return {\n        \"greeting\": f\"Hello, {profile.identity.display_name}!\",\n        \"language\": profile.common.preferences.language\n    }\n</code></pre>"},{"location":"tutorials/quickstart-python/#next-steps","title":"Next Steps","text":"<ul> <li>Quickstart: TypeScript \u2014 TypeScript version</li> <li>Agent Integration \u2014 Deeper integration guide</li> <li>CrewAI Adapter \u2014 Use with CrewAI</li> <li>SDK Reference \u2014 Full API docs</li> </ul>"},{"location":"tutorials/quickstart-typescript/","title":"Quickstart: TypeScript","text":"<p>Build your first a2p integration in 5 minutes.</p>"},{"location":"tutorials/quickstart-typescript/#prerequisites","title":"Prerequisites","text":"<ul> <li>Node.js 18+</li> <li>npm or pnpm</li> </ul>"},{"location":"tutorials/quickstart-typescript/#installation","title":"Installation","text":"<pre><code>npm install @a2p/sdk\n</code></pre>"},{"location":"tutorials/quickstart-typescript/#1-initialize-the-client","title":"1. Initialize the Client","text":"<pre><code>import { A2PClient, A2PUserClient } from '@a2p/sdk';\n\n// For agents accessing user profiles\nconst agentClient = new A2PClient({\n  agentDid: 'did:a2p:agent:local:my-agent',\n  // Optional: custom gateway\n  // gatewayUrl: 'https://gateway.example.com'\n});\n\n// For users managing their profiles\nconst userClient = new A2PUserClient();\n</code></pre>"},{"location":"tutorials/quickstart-typescript/#2-create-a-user-profile","title":"2. Create a User Profile","text":"<pre><code>// Create a new profile\nconst profile = await userClient.createProfile({\n  displayName: 'Alice',\n  preferences: {\n    language: 'en-US',\n    timezone: 'Europe/Madrid',\n    communication: {\n      style: 'concise',\n      formality: 'casual'\n    }\n  }\n});\n\nconsole.log('Created profile:', profile.id);\n// did:a2p:user:local:abc123xyz\n</code></pre>"},{"location":"tutorials/quickstart-typescript/#3-request-access-agent","title":"3. Request Access (Agent)","text":"<pre><code>// Agent requests access to user profile\nconst accessResult = await agentClient.requestAccess({\n  userDid: 'did:a2p:user:local:alice',\n  scopes: ['a2p:preferences', 'a2p:interests'],\n  purpose: {\n    type: 'personalization',\n    description: 'Tailor responses to your preferences',\n    legalBasis: 'consent'\n  }\n});\n\nif (accessResult.granted) {\n  console.log('Access granted for:', accessResult.grantedScopes);\n} else {\n  console.log('Access denied:', accessResult.reason);\n}\n</code></pre>"},{"location":"tutorials/quickstart-typescript/#4-read-user-profile-agent","title":"4. Read User Profile (Agent)","text":"<pre><code>// Get user profile (filtered by permissions)\nconst userProfile = await agentClient.getProfile({\n  userDid: 'did:a2p:user:local:alice',\n  scopes: ['a2p:preferences', 'a2p:interests']\n});\n\nconsole.log('User preferences:', userProfile.common.preferences);\nconsole.log('User interests:', userProfile.memories['a2p:interests']);\n</code></pre>"},{"location":"tutorials/quickstart-typescript/#5-propose-a-memory-agent","title":"5. Propose a Memory (Agent)","text":"<pre><code>// Agent proposes a memory based on conversation\nconst proposal = await agentClient.proposeMemory({\n  userDid: 'did:a2p:user:local:alice',\n  content: 'Prefers TypeScript for new projects',\n  category: 'a2p:professional.preferences',\n  confidence: 0.85,\n  context: 'Based on discussion about frameworks'\n});\n\nconsole.log('Proposal submitted:', proposal.id);\n// User will review and approve/reject\n</code></pre>"},{"location":"tutorials/quickstart-typescript/#6-review-proposals-user","title":"6. Review Proposals (User)","text":"<pre><code>// User reviews pending proposals\nconst proposals = await userClient.getPendingProposals();\n\nfor (const proposal of proposals) {\n  console.log(`From: ${proposal.agentDid}`);\n  console.log(`Content: ${proposal.content}`);\n  console.log(`Category: ${proposal.category}`);\n\n  // Approve, reject, or edit\n  await userClient.reviewProposal(proposal.id, {\n    action: 'approve',\n    // Optional: edit before approving\n    // editedContent: 'Strongly prefers TypeScript'\n  });\n}\n</code></pre>"},{"location":"tutorials/quickstart-typescript/#7-set-consent-policies-user","title":"7. Set Consent Policies (User)","text":"<pre><code>// User defines access policies\nawait userClient.setPolicy({\n  name: 'Work Assistants',\n  agentPattern: 'did:a2p:agent:local:work-*',\n  allow: [\n    'a2p:preferences.*',\n    'a2p:professional.*'\n  ],\n  deny: [\n    'a2p:health.*',\n    'a2p:financial.*'\n  ],\n  permissions: ['read_scoped', 'propose']\n});\n</code></pre>"},{"location":"tutorials/quickstart-typescript/#complete-example","title":"Complete Example","text":"<pre><code>import { A2PClient, A2PUserClient } from '@a2p/sdk';\n\nasync function main() {\n  // === User Setup ===\n  const userClient = new A2PUserClient();\n\n  // Create profile\n  const profile = await userClient.createProfile({\n    displayName: 'Alice',\n    preferences: {\n      language: 'en-US',\n      communication: { style: 'concise' }\n    }\n  });\n\n  // Set policy\n  await userClient.setPolicy({\n    name: 'Default',\n    agentPattern: '*',\n    allow: ['a2p:preferences.*'],\n    permissions: ['read_scoped', 'propose']\n  });\n\n  // === Agent Access ===\n  const agentClient = new A2PClient({\n    agentDid: 'did:a2p:agent:local:my-assistant'\n  });\n\n  // Request access\n  const access = await agentClient.requestAccess({\n    userDid: profile.id,\n    scopes: ['a2p:preferences'],\n    purpose: {\n      type: 'personalization',\n      description: 'Personalize responses',\n      legalBasis: 'consent'\n    }\n  });\n\n  if (access.granted) {\n    // Read profile\n    const userProfile = await agentClient.getProfile({\n      userDid: profile.id,\n      scopes: ['a2p:preferences']\n    });\n\n    console.log('Got preferences:', userProfile.common.preferences);\n\n    // Propose memory\n    await agentClient.proposeMemory({\n      userDid: profile.id,\n      content: 'User is interested in AI',\n      category: 'a2p:interests.topics',\n      confidence: 0.9\n    });\n  }\n\n  // === User Reviews ===\n  const proposals = await userClient.getPendingProposals();\n  for (const p of proposals) {\n    await userClient.reviewProposal(p.id, { action: 'approve' });\n  }\n\n  console.log('Done!');\n}\n\nmain().catch(console.error);\n</code></pre>"},{"location":"tutorials/quickstart-typescript/#next-steps","title":"Next Steps","text":"<ul> <li>Quickstart: Python \u2014 Python version</li> <li>Agent Integration \u2014 Deeper integration guide</li> <li>LangChain Adapter \u2014 Use with LangChain</li> <li>SDK Reference \u2014 Full API docs</li> </ul>"}]}